define("models/api",function(t,e,i){var n,l=t("nmc/main/model"),d=t("$"),u=function(){},p=t("appUtil"),f=t("manager"),o=function(t){return d.param(t)},a=(n={},function(t,i){return function(){var e=i.apply(null,arguments);return n[e]?n[e].then(function(t){return p.clone(t)}):(n[e]=t.apply(this,arguments),n[e].then(function(t){return delete n[e],t},function(t){throw delete n[e],t}))}}),h=function(){var c={};function r(t,e,i){var n=c[i.cacheTag],o=n[t];o&&clearTimeout(o.timer);var a=setTimeout(function(){o&&(clearTimeout(o.timer),delete n[t])},6e4*i.expire);n[t]={data:p.clone(e),timer:a,timeStamp:Date.now(),expire:i.expire}}return function(t,e,i){var n,o,a=d.param(t);if(c[e.cacheTag]||(c[e.cacheTag]={}),e.success==u&&e.fail==u&&e.cache){if(e.flush){for(var s in c[e.cacheTag])clearTimeout(c[e.cacheTag][s].timer);c[e.cacheTag]={}}(o=c[e.cacheTag][a])?n=Promise.resolve(p.clone(o.data)):(n=i()).then(function(t){r(a,t,e)})}else n=i(),c[e.cacheTag][a]&&n.then(function(t){r(a,t,e)});return n}}();e.req=e.request=function m(t,e){e=e||{};var s=d.extend({success:u,fail:u,name:"delegateCApi",data:t,cache:!1,cacheTag:"",flush:!1,expire:5,combine:!0,secure:!1},e),c=s.success,r=s.fail;return h(t,s,function(){return function(t,e,i){return e.success==u&&e.fail==u&&e.combine?a(i,o).apply(this,arguments):i()}(t,s,function(){return new Promise(function(e,i){var n=function(t){c.call(this,t),e(t)},o=function(t){r.apply(this,arguments),i(t)},a="/capi?cmd="+t.cmd+"&action=delegate&serviceType="+t.serviceType;s.secure&&(a+="&secure=1"),s.version&&(a+="&version="+s.version),s.withClientIP&&(a+="&withClientIP=1"),s.withClientUA&&(a+="&withClientUA=1"),f.getAllWhiteList(function(t){s.secure&&t.CONSOLE_STS_WHITE&&t.CONSOLE_STS_WHITE.length&&(a+="&sts=1"),new l({delegateCApi:{url:a,method:"post"}},"/cgi").request(d.extend({},s,{success:n,fail:o}))})})})})},e.duplicatePromiseCombine=a}),define("models/capi",function(t,e,i){var n=t("nmc/main/model");i.exports=new n({querySecretId:{url:"/capi?action=querySecretId",method:"get"},applySecretId:{url:"/capi?action=applySecretId",method:"post"},deleteSecretId:{url:"/capi?action=deleteSecretId",method:"post"},disableSecretId:{url:"/capi?action=disableSecretId",method:"post"},enableSecretId:{url:"/capi?action=enableSecretId",method:"post"},queryKeyReq:{url:"/capi?action=queryKeyReq",method:"get"},batchQueryKeyReq:{url:"/capi?action=batchQueryKeyReq",method:"get"},querySecretProjectReq:{url:"/capi?action=querySecretProjectReq",method:"get"},applyKeyReq:{url:"/capi?action=applyKeyReq",method:"post"},enableKeyReq:{url:"/capi?action=enableKeyReq",method:"post"},disableKeyReq:{url:"/capi?action=disableKeyReq",method:"post"},deleteKeyReq:{url:"/capi?action=deleteKeyReq",method:"post"}},"/cgi")}),define("models/dao_config",function(t,e,i){var n={checkLogin:{url:"/login?action=checkLogin",method:"get"},quitLogin:{url:"/login?action=quitLogin",method:"get"},queryRegion:{url:"/com?action=queryRegion",method:"get"},queryCorpRedirect:{url:"/com?action=queryCorpRedirect",method:"get"},queryWhiteList:{url:"/com?action=getWhiteList",method:"post"},getUserData:{url:"/com?action=getUserData",method:"post"},queryOs:{url:"/cvm?action=queryOS",method:"get"},queryCdnMenu:{url:"/com?action=queryCdnMenu",method:"get"},queryYunsoMenu:{url:"/com?action=queryYunsoMenu",method:"get"},queryWenzhiMenu:{url:"/com?action=queryWenzhiMenu",method:"get"},queryMonitorMenu:{url:"/com?action=queryMonitorMenu",method:"get"},queryCpayMenu:{url:"/com?action=queryCpayMenu",method:"get"},getUserIsSeeGuidelines:{url:"/com?action=getUserIsSeeGuidelines",method:"get"},setUserIsSeeGuidelines:{url:"/com?action=setUserIsSeeGuidelines",method:"post"},getUserGuideData:{url:"/com?action=getUserGuideData",method:"get"},setUserGuideData:{url:"/com?action=setUserGuideData",method:"post"},getMsgList:{url:"/message?action=getMsgList",method:"get"},getTicketNum:{url:"/com?action=getTicketNum",method:"get"},getVouchersNum:{url:"/com?action=getVouchersNum",method:"get"},getCVMNotice:{url:"/cvm?action=getNotice",method:"get"},payByCartCvm:{url:"/cvm?action=payByCartCvm",method:"post"},getCvmList:{url:"/cvm?action=getCvmList",method:"get"},getCvmMore:{url:"/cvm?action=getCvmMore",method:"get"},getFlowCscResult:{url:"/com?action=getFlowCscResult",method:"get"},rebootCvm:{url:"/cvm?action=rebootCvm",method:"post"},cvmAction:{url:"/cvm?action=cvmAction",method:"post"},modifyCvmAliasBatch:{url:"/cvm?action=modifyCvmAliasBatch",method:"post"},resetCvmSystem:{url:"/cvm?action=resetCvmSystem",method:"post"},switchCvmSystem:{url:"/cvm?action=switchCvmSystem",method:"post"},getQuotiesChargeItem:{url:"/cvm?action=getQuotiesChargeItem",method:"post"},resetCvmPasswd:{url:"/cvm?action=resetCvmPasswd",method:"post"},formatCvmDisk:{url:"/cvm?action=formatCvmDisk",method:"post"},getBandwidthHistory:{url:"/cvm?action=getBandwidthHistory",method:"get"},getPrice:{url:"/cvm?action=getPrice",method:"post"},getPriceForHour:{url:"/cvm?action=getPriceForHour",method:"get"},getBandwidthReturnFittingPrice:{url:"/cvm?action=getBandwidthReturnFittingPrice",method:"get"},upgradeHourCvm:{url:"/cvm?action=upgradeHourCvm",method:"post"},upgradeHourCvmBandwidth:{url:"/cvm?action=upgradeHourCvmBandwidth",method:"post"},returnCvm:{url:"/cvm?action=returnCvm",method:"post"},canPrepaidReturn:{url:"/cvm?action=getReturnResourcesPrice",method:"post"},verifyCode:{url:"/cvm?action=verifyCode",method:"post"},destroyCvm:{url:"/cvm?action=destroyCvm",method:"post"},destroyCvmAndCdhCvm:{url:"/cvm?action=destroyCvmAndCdhCvm",method:"post"},restoreCdhCvm:{url:"/cdh?action=restoreCdhCvm",method:"post"},returnCvmInTime:{url:"/cdh?action=returnCvmInTime",method:"get"},getCdhChartData:{url:"/cdh?action=getCdhChartData",method:"get"},getCdhMonitorChartData:{url:"/cdh?action=getCdhMonitorChartData",method:"get"},getStatisticsGridData:{url:"/cdh?action=getStatisticsGridData",method:"get"},getCdhChartDataBatch:{url:"/cdh?action=getCdhChartDataBatch",method:"get"},getRealTimeCdhData:{url:"/cdh?action=getRealTimeCdhData",method:"get"},upgradeXenToKvm:{url:"/cvm?action=upgradeXenToKvm",method:"post"},getImageCategories:{url:"/cvm?action=getImageCategories",method:"get"},getMarketWhiteList:{url:"/cvm?action=getMarketWhiteList",method:"get"},checkResetSys:{url:"/cvm?action=checkResetSys",method:"get"},getImageProductsDetail:{url:"/cvm?action=getImageProductsDetail",method:"get"},getImagesDetail:{url:"/cvm?action=getImagesDetail",method:"get"},setBandwidthLimit:{url:"/cvm?action=setBandwidth",method:"post"},setBandwidthLimitForFlow:{url:"/cvm?action=setBandwidthLimitForFlow",method:"post"},changeProject:{url:"/cvm?action=changeProject",method:"post"},setRenewFlag:{url:"/cvm?action=setRenewFlag",method:"post"},queryKeypair:{url:"/sshkey?action=queryKeypair",method:"get"},createKeypair:{url:"/sshkey?action=createKeypair",method:"post"},loadKeypair:{url:"/sshkey?action=loadKeypair",method:"post"},modifyKeypair:{url:"/sshkey?action=modifyKeypair",method:"post"},deleteKeypair:{url:"/sshkey?action=deleteKeypair",method:"post"},manageCvmKey:{url:"/sshkey?action=manageCvmKey",method:"post"},detailKeypair:{url:"/sshkey?action=detailKeypair",method:"get"},loadChartData:{url:"/cvm?action=loadChartData",method:"get"},getMonitorAgent:{url:"/cvm?action=getMonitorAgent",method:"get"},queryKeyByIps:{url:"/cvm?action=queryKeyByIps",method:"get"},queryCvmOpLogs:{url:"/cvm?action=queryCvmOpLogs",method:"get"},getServiceAccount:{url:"/com?action=getServiceAccount",method:"get"},getAccounts:{url:"/com?action=getAccounts",method:"get"},createCvmImage:{url:"/image?action=createCvmImage",method:"post"},queryImages:{url:"/image?action=getCvmImageInfo",method:"get"},delImages:{url:"/image?action=deleteCvmImage",method:"post"},modImage:{url:"/image?action=modifyCvmImageInfo",method:"post"},queryCbsList:{url:"/cbs?action=getCbsList",method:"get"},modifyCbsAlias:{url:"/cbs?action=modifyCbsAlias",method:"post"},setCbsAutoRenewFlag:{url:"/cbs?action=setCbsAutoRenewFlag",method:"post"},getDashboardBase:{url:"/dashboard?action=getDashboardBase",method:"get"},getAppMonitor:{url:"/dashboard?action=getAppMonitor",method:"get"},getAppSecurity:{url:"/dashboard?action=getAppSecurity",method:"get"},getNetworkFlow:{url:"/dashboard?action=getNetworkFlow",method:"get"},getMargin:{url:"/dashboard?action=getMargin",method:"get"},getServicesInfo:{url:"/dashboard?action=getServicesInfo",method:"get"},getExpireNum:{url:"/dashboard?action=getExpireNum",method:"get"},getNotice:{url:"/dashboard?action=getNotice",method:"get"},getVpcList:{url:"/vpc?action=getVpcList",method:"get"},getVpcRegionWhiteList:{url:"/vpc?action=getVpcRegionWhiteList",method:"get"},getVpcView:{url:"/vpc?action=getVpcView",method:"get"},addVpc:{url:"/vpc?action=addVpc",method:"post"},delVpc:{url:"/vpc?action=delVpc",method:"post"},modifyVpcProperty:{url:"/vpc?action=modifyVPCProperty",method:"post"},modifyVPCSubnetRouteTable:{url:"/vpc?action=modifyVPCSubnetRouteTable",method:"post"},getVpcDeviceCount:{url:"/vpc?action=getVpcDeviceCount",method:"get"},getSubnetInfo:{url:"/subnet?action=getSubnetInfo",method:"get"},addSubnet:{url:"/subnet?action=addSubnet",method:"post"},queryZone:{url:"/subnet?action=queryZone",method:"get"},getVpcZoneWhiteList:{url:"/vpc?action=getVpcZoneWhiteList",method:"get"},modifySubnet:{url:"/subnet?action=modifySubnet",method:"post"},deleteSubnet:{url:"/subnet?action=deleteSubnet",method:"post"},getVPCGatewayList:{url:"/route?action=getVPCGatewayList",method:"get"},getVPCRouteTable:{url:"/route?action=getVPCRouteTable",method:"get"},addVPCRouteTable:{url:"/route?action=addVPCRouteTable",method:"post"},modifyVPCRouteTable:{url:"/route?action=modifyVPCRouteTable",method:"post"},deleteVPCRouteTable:{url:"/route?action=deleteVPCRouteTable",method:"post"},getVpnGw:{url:"/vpc?action=getVpnGw",method:"get"},initVpnGw:{url:"/vpc?action=initVpnGw",method:"post"},clearVpnGw:{url:"/vpc?action=clearVpnGw",method:"post"},clearSslVpn:{url:"/sslvpn?action=clearSslVpn",method:"post"},getVpnGwQuota:{url:"/vpc?action=getVpnGwQuota",method:"get"},addVpnGw:{url:"/vpc?action=addVpnGw",method:"post"},addUserGw:{url:"/vpc?action=addUserGw",method:"post"},addVpnConn:{url:"/vpc?action=addVpnConn",method:"post"},getUserGwProperty:{url:"/vpc?action=getUserGwProperty",method:"get"},getVpnConnProperty:{url:"/vpc?action=getVpnConnProperty",method:"get"},getVpnStuff:{url:"/vpc?action=getVpnStuff",method:"get"},modifyVpnGw:{url:"/vpc?action=modifyVpnGw",method:"post"},delUserGw:{url:"/vpc?action=delUserGw",method:"post"},modifyUserGw:{url:"/vpc?action=modifyUserGw",method:"post"},modifyVpnConn:{url:"/vpc?action=modifyVpnConn",method:"post"},delVpnConn:{url:"/vpc?action=delVpnConn",method:"post"},getVpnPrice:{url:"/vpc?action=getVpnPrice",method:"post"},payByCart:{url:"/vpc?action=payByCart",method:"post"},getDealsByCond:{url:"/vpc?action=getDealsByCond",method:"post"},getUserGwVendor:{url:"/vpc?action=getUserGwVendor",method:"get"},loadVpnChartData:{url:"/vpc?action=loadVpnChartData",method:"get"},getOperatelogList:{url:"/operatelog?action=getOperatelogList",method:"get"},getVpcTopo:{url:"/vpctopo?action=getVpcTopo",method:"get"},getVpcTopoExternal:{url:"/vpctopo?action=getVpcTopoExternal",method:"get"},getGwStatusList:{url:"/vpctopo?action=getGwStatusList",method:"get"},getVpnGwStatusList:{url:"/vpctopo?action=getVpnGwStatusList",method:"get"},getVpnConnStatusList:{url:"/vpctopo?action=getVpnConnStatusList",method:"get"},getVpcStatisticList:{url:"/vpc?action=getVpcStatisticList",method:"get"},getVpcSubnetStatisticList:{url:"/vpc?action=getVpcSubnetStatisticList",method:"get"},updateCvm:{url:"/vpc?action=updateCvm",method:"post"},getVpcExternalStatistic:{url:"/vpc?action=getVpcExternalStatistic",method:"get"},getVpcSubnetIpCounts:{url:"/vpc?action=getVpcSubnetIpCounts",method:"get"},getVpcRtbStatisticList:{url:"/vpc?action=getVpcRtbStatisticList",method:"get"},getVpcVpnGwStatisticList:{url:"/vpc?action=getVpcVpnGwStatisticList",method:"get"},getVpcVpnGwStatisticListEx:{url:"/vpc?action=getVpcVpnGwStatisticListEx",method:"get"},getVpcVpnConnStatisticList:{url:"/vpc?action=getVpcVpnConnStatisticList",method:"get"},getVpcUserGwStatisticList:{url:"/vpc?action=getVpcUserGwStatisticList",method:"get"},delegateCApi:{url:"/capi?action=delegate",method:"post"},queryConfigureProducts:{url:"/datacfg?action=queryConfigureProducts",method:"get"},updateUserDefined:{url:"/datacfg?action=updateUserDefined",method:"post"},queryConfigureCodeData:{url:"/datacfg?action=queryConfigureCodeData",method:"post"},getSslVpnStatisticListEx:{url:"/sslvpn?action=getSslVpnStatisticListEx",method:"get"},getVpcVpnUsedList:{url:"/sslvpn?action=getVpcVpnUsedList",method:"get"},getDeveloperAccountList:{url:"/com?action=getDeveloperAccountList",method:"get"},switchDeveloperAccount:{url:"/com?action=switchDeveloperAccount",method:"post"},resetCpmPasswd:{url:"/cpm?action=resetCpmPasswd",method:"post"},getVpcBmVpnGwList:{url:"/vpcbm?action=getVpcBmVpnGwList",method:"get"},getPriceBm:{url:"/cpm?action=getPrice",method:"post"},generateDeals:{url:"/vpcbm?action=generateDeals",method:"post"},getGroupList:{url:"/com?action=getGroupList",method:"get"},ping:{url:"/com?action=ping",method:"get"},reportTranslate:{url:"/com?action=reportTranslate",method:"post"},hideNewSidebarTip:{url:"/datacfg?action=hideNewSidebarTip",method:"get"},useOldSidebar:{url:"/datacfg?action=useOldSidebar",method:"get"},useNewSidebar:{url:"/datacfg?action=useNewSidebar",method:"get"}};for(var o in n){var a=n[o];a&&a.url&&(a.url="/cgi"+a.url)}var s={get:function(t){return n[t]}};i.exports=s}),define("models/directconnect",function(t,e,i){var n=new(t("nmc/main/model"))({getDCInfo:{url:"/dc?action=getDCInfo",method:"get"},applyDC:{url:"/dc?action=applyDC",method:"post"},getARList:{url:"/dc?action=getARList",method:"get"},updateDCInfo:{url:"/dc?action=updateDCInfo",method:"post"},updateApplyStatus:{url:"/dc?action=updateApplyStatus",method:"post"},updateDCApplyInfo:{url:"/dc?action=updateDCApplyInfo",method:"post"},getApplyInfo:{url:"/dc?action=getApplyInfo",method:"get"},deleteDCApply:{url:"/dc?action=deleteDCApply",method:"post"},getVIFInfo:{url:"/dc?action=getVIFInfo",method:"get"},checkIsEnterprise:{url:"/dc?action=checkIsEnterprise",method:"post"},createVIF:{url:"/dc?action=createVIF",method:"post"},updateVIFInfo:{url:"/dc?action=updateVIFInfo",method:"post"},deleteVIF:{url:"/dc?action=deleteVIF",method:"post"},getVPCVIFNum:{url:"/dc?action=getVPCVIFNum",method:"get"},updateDeal:{url:"/dc?action=updateDeal",method:"post"},updatePayStatus:{url:"/dc?action=updatePayStatus",method:"post"},getPrice:{url:"/trade?action=getPrice",method:"post"},payByCart:{url:"/trade?action=payByCart",method:"post"},getDealsByCond:{url:"/trade?action=getDealsByCond",method:"post"},approveVIF:{url:"/dc?action=approveVIF",method:"post"},describeDirectConnectGateway:{url:"/dc?action=describeDirectConnectGateway",method:"get"},createDirectConnectGateway:{url:"/dc?action=createDirectConnectGateway",method:"post"},deleteDirectConnectGateway:{url:"/dc?action=deleteDirectConnectGateway",method:"post"},getChartData:{url:"/dc?action=getChartData",method:"get"}},"/cgi");i.exports=n}),define("models/eip",function(t,e,i){var n=t("nmc/main/model");i.exports=new n({queryEipList:{url:"/cgi/eip?action=queryEipList",method:"get"},queryEipQuota:{url:"/cgi/eip?action=queryEipQuota",method:"get"},createEip:{url:"/cgi/eip?action=createEip",method:"post"},bindEip:{url:"/cgi/eip?action=bindEip",method:"post"},unBindEip:{url:"/cgi/eip?action=unBindEip",method:"post"},updateEip:{url:"/cgi/eip?action=updateEip",method:"post"},deleteEip:{url:"/cgi/eip?action=deleteEip",method:"post"},wipToEip:{url:"/cgi/eip?action=wipToEip",method:"post"},queryCvmList:{url:"/cgi/eip?action=queryCvmList",method:"get"},exportEipList:{url:"/cgi/eip?action=exportEipList",method:"get"},getEipFlowCscResult:{url:"/cgi/eip?action=getEipFlowCscResult",method:"get"}})}),define("models/firewall",function(t,e,i){var n=t("nmc/main/model");i.exports=new n({getUSGFromProject:{url:"/firewall?action=getUSGFromProject",method:"get"},createUSG:{url:"/firewall?action=createUSG",method:"post"},getVMFromUSG:{url:"/firewall?action=getVMFromUSG",method:"get"},getUSGFromVM:{url:"/firewall?action=getUSGFromVM",method:"get"},getAvailableVM:{url:"/firewall?action=getAvailableVM",method:"get"},modifyVMOfUSG:{url:"/firewall?action=modifyVMOfUSG",method:"post"},modifyUSGInfo:{url:"/firewall?action=modifyUSGInfo",method:"post"},deleteUSG:{url:"/firewall?action=deleteUSG",method:"post"},getUSGPolicy:{url:"/firewall?action=getUSGPolicy",method:"get"},updatePolicyOfUSG:{url:"/firewall?action=updatePolicyOfUSG",method:"post"},getUSGLink:{url:"/firewall?action=getUSGLink",method:"get"},copy:{url:"/firewall?action=copy",method:"post"}},"/cgi")}),define("models/iaas",function(t,e){var s=t("manager"),i=t("models/api"),p=t("models/reporter"),o=t("appUtil"),a=t("util"),c=t("tips"),r=t("nmcConfig"),l=t("login"),d=t("widget/cam/cam"),u=t("dialog"),f=t("router"),h=t("insight"),m=-1<location.hostname.indexOf("cloud.tencent.com")?"iaas.cloud.tencent.com":"iaas.qcloud.com",g=function(n){var o;return n=n||"qcbase-proxy",new Promise(function(t,e){if(o=document.getElementById(n))try{if(o.contentWindow.postSend)return t(o.contentWindow.postSend)}catch(i){}else(o=document.createElement("iframe")).id=n,o.style.display="none",o.src="//"+m+"/proxy.html",document.body.appendChild(o);o.addEventListener("load",function(){try{t(o.contentWindow.postSend)}catch(i){e(i)}}),o.addEventListener("error",e)})},v=function(n,e,o){var a,t,i,s,c;o=o||{};try{o.useOptsUrl&&(n=o.url);var r=(t=n,i=f.queryToObj(t),s=(i.i||i.query||"").split("/"),c=2==s.length?s[1]:s[0],{service:2==s.length?s[0]:"qcbase",action:c});n=h.provideCgiTraceUrl(n,{extendReport:function(t,e){return{seqId:e.requestHeaders&&e.requestHeaders["X-SeqId"],service:r.service,action:r.action}}}),o.useOptsUrl&&(o.url=n)}catch(u){}var l=h.captureTrace("CGI Call: "+n),d=window.getLifeInfo&&window.getLifeInfo();return d&&d.lid&&d.life&&(o.lid=d.lid,o.life=d.life),g().then(function(t){return a=Date.now(),t(n,e,o)}).then(function(t){var e=Date.now()-a;if(p.report(t,e,n,o),o.v3)return t;if(!1===o.classicResponse)return t;if(0==t.code)return t.data;throw t})["catch"](function(t){var e=Date.now()-a;if(p.report({code:t.status},e,n,o),"object"==typeof t&&!t.stack)try{t.stack=l.stack}catch(i){}throw t})};v=i.duplicatePromiseCombine(v,function(t,e){return t+"\n"+JSON.stringify(e)});var b=function(o,a){return(o=o||{}).camTipsType=o.camTipsType||"dialog",function(t){var e;if("function"==typeof o.error&&(t=o.error(t)),d.isCamRefused(t)){if(!1!==o.camTips)if("dialog"==o.camTipsType){var i=new Bee("<div><cam-tips>"+t.message+"</cam-tips></div>");u.create(i.$el,820,"",{title:"您没有权限执行此操作",defaultCancelBtn:!1,button:{"确定":function(){u.hide()}}})}else e=t.message}else 800200==t.cgwCode?u.confirm("您的账号暂未完成实名认证，请前往完成实名认证！",function(){f.navigate("/developer/auth")},function(){},{title:"提示",width:480,mainBtnName:"前往认证",defaultCancelBtn:!1}):e=(t.code?"["+t.code+"] ":"")+(t.message||r.defaultReqErr);if("VERIFY_LOGIN_FAILED"==t.code&&(e="当前用户登录已超时，请重新登录",s.ping(function(){console.error(m+" 用户态异常"),l.show()})),!1!==o.tipErr&&e&&c.error(e),"object"==typeof t&&!t.stack&&a)try{t.stack=a.stack}catch(n){}throw t}},y=function(t,e){var i="/cgi/graphql";return t.operationName?i+="?operationName="+t.operationName+"&uin="+a.getUin():i+="?uin="+a.getUin(),v(i,t,$.extend({classicResponse:!1},e))};function C(t,e){var i,n,o=(t=t||[]).join(".");for(e=e||[],i=0;i<e.length;i++)if(((n=e[i]).path||[]).join(".")==o)return JSON.parse(n.message);return null}e.singleGqlRequest=function(t,e){var i=(t=t||{}).regionId,n=t.path,o=t.schema,a=t.params,s=t.paramsSchema,c=t.localParamsSchema,r=Object.keys(s||{}),l=$.extend({},s,c),d=Object.keys(l).map(function(t){return"$"+t+": "+l[t]}).join(", ");d&&(d="("+d+")");var u=r.map(function(t){return t+": $"+t}).join(", ");u&&(u="("+u+")");var p=function f(t,e,i){var n;return n="{"+e[0]+(1<e.length?f(t,e.slice(1)):t)+"}",i&&(n="("+i+")"+n),n}(u+o,n);return y({regionId:i,variables:a,operationName:null,query:"query "+d+p},e).then(function(t){if(t.code)return{error:t};var e=t.errors;return{data:function a(t,e){var i,n,o=e;for(i=0;i<t.length;i++){if(n=t[i],!(o&&n in o))return null;o=o[n]}return o}(n,t.data),error:C(n,e)||e&&e[0],errors:e}},function(t){return{data:null,error:t,errors:[{path:n,message:JSON.stringify(t)}]}})},e.getWhiteList=function(t,e){return v("/cgi/whitelist",{whitelistKeys:t,type:e},{classicResponse:!1})},e.ready=g,e.request=v,e.apiRequest=function(t,e){t.cmd&&!t.action&&(t.action=t.cmd),t.data=t.data||{},e&&e.v3&&(t.data.Version="2017-03-12");var i=t.data&&t.data.Action||t.action||"";!f.debug||t.regionId||t.data.region||(console.warn(t.serviceType,i),console.warn("请传入 regionId! 没有传入 regionId / region 时会隐式使用 cookie 中的 regionId, 这可能会造成请求地域混乱"));var n=h.captureTrace("CAPI Call: "+t.serviceType+"."+t.action);return v("/cgi/capi?i="+t.serviceType+"/"+i+"&uin="+a.getUin(),t,e).then(function(t){if(e&&(!1===e.classicResponse||e.v3)){if(t&&t.code)throw t;if(!1===e.classicResponse&&(t=t.data)&&t.Response&&t.Response.Error)throw{code:t.Response.Error.Code,message:t.Response.Error.Message}}if(e&&e.v3&&(t=o.toLowerCaseFL(t.data||{}))&&t.response&&t.response.error)throw{code:t.response.error.code,message:t.response.error.message};return t})["catch"](b(e,n))},e.dcRequest=function(t,e){return v("/cgi/dc?action=delegate&i="+t["interface"]+"&uin="+a.getUin(),t,e)},e.cloudLogRequest=function(t,e){return v("/cgi/cloudLog?action=delegate&i="+t["interface"],t,e)},e.gqlRequest=y,e.getGqlError=C,e.errorHandler=b}),define("models/manager",function(t,e,i){var I=t("dataManager"),x=t("net"),l=t("daoConfig"),k=t("util"),d=t("appUtil"),r=t("constants"),u=t("tips"),a=t("router"),n=(t("reporter"),t("config/productmenu")),o={};n&&n.all&&n.all.forEach(function(t){t.forEach(function(t){t.menu.forEach(function(t){t.href&&(o[t.href]=t)})})});var s,p={checkLogin:function(e,i,t){t=t!=undefined&&t,x.send(l.get("checkLogin"),{cb:function(t){I.commonCb(t,e,i)},global:t})},quitLogin:function(e,i){x.send(l.get("quitLogin"),{cb:function(t){I.commonCb(t,e,i)}})},queryRegion:function(e,i,n){n||(n="region_list");I.get(n)?e(I.get(n)):x.send(l.get("queryRegion"),{cb:function(t){I.commonCb(t,e,i,n)}})},queryBmRegion:function(e,t){var i="bm_region_list",n=I.get(i);n?e(n):this.delegateCApi(8,"bm","DescribeRegions",{},function(t){I.set(i,t),e(t)},t)},queryCorpRedirect:function(e,i,n){x.send(l.get("queryCorpRedirect"),{cb:function(t){I.commonCb(t,e,i,n)}})},queryOs:function(t,e,i){x.send(l.get("queryOs"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},queryCdnMenu:function(i,t){var e="cdn."+document.domain;$.ajax({type:"get",url:"//"+e+"/ajax/api.php?action=get_menu&format=jsonp&g_tk="+k.getACSRFToken(),dataType:"jsonp",jsonp:"cb",success:function(t){var e={};t&&t.data&&(e=t.data),i(e)}})},queryCpayMenu:function(e,i){x.send(l.get("queryCpayMenu"),{cb:function(t){I.commonCb(t,e,i)}})},queryCnsMenu:function(i,t){$.ajax({type:"get",url:"//wss.qcloud.com/dns/api/config/get_menu?mc_gtk="+k.getACSRFToken(),dataType:"jsonp",jsonp:"cb",success:function(t){var e={};t&&(e=t),i(e)}})},queryOvmMenu:function(i,t){$.ajax({url:"//ovm.qcloud.com/gamecloud_ovm/app_menu/GetMenu",dataType:"jsonp",jsonp:"cb",success:function(t){var e={};t&&(e=t),i(e)}})},queryDayuMenu:function(i){$.ajax({type:"get",url:"//dy.qcloud.com/ajax/api.php?action=get_menu&format=jsonp&g_tk="+k.getACSRFToken(),dataType:"jsonp",jsonp:"cb",success:function(t){var e={};t&&t.data&&(e=t.data),i(e)}})},queryYunsoMenu:function(e,i){x.send(l.get("queryYunsoMenu"),{cb:function(t){I.commonCb(t,e,i)}})},queryWenzhiMenu:function(e,i){x.send(l.get("queryWenzhiMenu"),{cb:function(t){I.commonCb(t,e,i)}})},queryMonitorMenu:function(e,i){$.ajax({url:"//monitor."+QCCONSOLE_HOST.substr(8)+"/index.php/nav/list",dataType:"jsonp",data:{_format:"json"},jsonp:"cb",success:function(t){I.commonCb(t,e,i)},error:i})},queryTmlMenu:function(e,i){$.ajax({url:"//tml.qcloud.com/ajax/get_menu",dataType:"jsonp",jsonp:"cb",data:{_format:"json"},success:function(t){I.commonCb(t,e,i)},error:i})},queryCosMenu:function(e,i){$.ajax({url:"https://cosapi.qcloud.com/api.php",dataType:"jsonp",jsonp:"callback",data:{Action:"GetMenu",mc_gtk:k.getACSRFToken()},success:function(t){I.commonCb(t,e,i)},error:i})},getProjects:function(o,t){this.getComData(function(t){var e=t.userInfo.grantInfo,i=e&&e.allowServiceList||[],n=a.fragment&&a.fragment.split("/")[1];n&&-1<i.indexOf(n)&&e.projectList?o({isShowAll:!0,data:e.projectList}):o({isShowAll:t.isShowAllProject,data:t.projects})})},getUserAreaInfo:function(e,t){this.getComData(function(t){e(t.userInfo.areaInfo)})},queryWhiteList:function(t,e,i,n){x.send(l.get("queryWhiteList"),{data:t,global:n,cb:function(t){I.commonCb(t,e,i)}})},getUserData:function(t,e,i){x.send(l.get("getUserData"),{data:t,global:!1,cb:function(t){I.commonCb(t,e,i)}})},setUserIsSeeGuidelines:function(t,e,i){x.send(l.get("setUserIsSeeGuidelines"),{data:{isSeeGuidelines:t},global:!1,cb:function(t){I.commonCb(t,e,i)}})},getUserIsSeeGuidelines:function(e,i){x.send(l.get("getUserIsSeeGuidelines"),{cb:function(t){I.commonCb(t,e,i)}})},setUserGuideData:function(t,e,i){x.send(l.get("setUserGuideData"),{data:t,global:!1,cb:function(t){I.commonCb(t,e,i)}})},getUserGuideData:function(e,i){x.send(l.get("getUserGuideData"),{cb:function(t){I.commonCb(t,e,i)}})},getComData:function(t,e){d.getComData()?t(d.getComData()):$(document).on("login_data_inited",function i(){$(document).off("login_data_inited",i),t(d.getComData())}),this._getComDataStats()},_getComDataStats:function(){},getFlowCscResult:function(t,s,c,e){x.send(l.get("getFlowCscResult"),{data:t,global:"vpc"===e,cb:function(t){var e=(t.data||{}).output;if(I.commonCb(t,s,c),0==t.code)if(e&&e.failedInfo)for(var i,n=0;i=e.failedInfo[n];n++){var o=i.errorNum;o=(o="object"==typeof o?o[0]:o).toString().substring(1);var a=r.FLOW_RESULT_FAIL[o]||"操作执行失败，请稍后重试";u.error(a);break}else e&&e.errorCode&&(a=r.FLOW_RESULT_FAIL[e.errorCode]||"操作执行失败，请稍后重试",u.error(a))}})},getCvmList:function(t,e,i,n){var o=l.get("getCvmList");"post"==t.method?o.method="post":o.method="get",x.send(o,{data:t,global:n,cb:function(t){I.commonCb(t,e,i)}})},getCvmMore:function(t,e,i,n,o,a){x.send(l.get("getCvmMore"),{data:t,cb:function(t){I.commonCb(t,e,i,o,a)},global:n})},getCVMNotice:function(e,i){x.send(l.get("getCVMNotice"),{cb:function(t){I.commonCb(t,e,i)}})},rebootCvm:function(t,e,i){x.send(l.get("rebootCvm"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},cvmAction:function(t,e,i){x.send(l.get("cvmAction"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},modifyCvmAliasBatch:function(t,e,i){x.send(l.get("modifyCvmAliasBatch"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},resetCvmSystem:function(t,e,i){x.send(l.get("resetCvmSystem"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},switchCvmSystem:function(t,e,i){x.send(l.get("switchCvmSystem"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},getQuotiesChargeItem:function(t,e,i,n,o){x.send(l.get("getQuotiesChargeItem"),{data:t,cb:function(t){I.commonCb(t,e,i,n,o)}})},resetCvmPasswd:function(t,e,i){x.send(l.get("resetCvmPasswd"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},formatCvmDisk:function(t,e,i){x.send(l.get("formatCvmDisk"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},getBandwidthHistory:function(t,e,i){x.send(l.get("getBandwidthHistory"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},getPrice:function(t,e,i){x.send(l.get("getPrice"),{data:t,global:!1,cb:function(t){I.commonCb(t,e,i)}})},getPriceForHour:function(t,e,i){x.send(l.get("getPriceForHour"),{data:t,global:!1,cb:function(t){I.commonCb(t,e,i)}})},getBandwidthReturnFittingPrice:function(t,e,i){x.send(l.get("getBandwidthReturnFittingPrice"),{data:t,global:!1,cb:function(t){I.commonCb(t,e,i)}})},upgradeHourCvm:function(t,e,i){x.send(l.get("upgradeHourCvm"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},upgradeHourCvmBandwidth:function(t,e,i){x.send(l.get("upgradeHourCvmBandwidth"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},getServiceAccount:function(e,i,n){n||(n="is_user_service_account");I.get(n)?e(I.get(n)):x.send(l.get("getServiceAccount"),{data:{},cb:function(t){I.commonCb(t,e,i,n)}})},getAccounts:function(t,e,i){x.send(l.get("getAccounts"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},createCvmImage:function(t,e,i){x.send(l.get("createCvmImage"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},returnCvm:function(t,e,i){x.send(l.get("returnCvm"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},canPrepaidReturn:function(t,e,i){x.send(l.get("canPrepaidReturn"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},verifyCode:function(t,e,i){x.send(l.get("verifyCode"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},destroyCvm:function(t,e,i){x.send(l.get("destroyCvm"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},destroyCvmAndCdhCvm:function(t,e,i){x.send(l.get("destroyCvmAndCdhCvm"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},returnCvmInTime:function(t,e,i){x.send(l.get("returnCvmInTime"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},restoreCdhCvm:function(t,e,i){x.send(l.get("restoreCdhCvm"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},getImageCategories:function(e,i){x.send(l.get("getImageCategories"),{cb:function(t){I.commonCb(t,e,i)}})},getImageProductsDetail:function(t,e,i){x.send(l.get("getImageProductsDetail"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},getImagesDetail:function(t,e,i){x.send(l.get("getImagesDetail"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},getMarketWhiteList:function(e,i){x.send(l.get("getMarketWhiteList"),{cb:function(t){I.commonCb(t,e,i)}})},checkResetSys:function(t,e,i){x.send(l.get("checkResetSys"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},setBandwidthLimit:function(t,e,i){x.send(l.get("setBandwidthLimit"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},setBandwidthLimitForFlow:function(t,e,i){x.send(l.get("setBandwidthLimitForFlow"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},changeProject:function(t,e,i){x.send(l.get("changeProject"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},setRenewFlag:function(t,e,i){x.send(l.get("setRenewFlag"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},getAllWhiteList:function(t){var e="allWhiteList";I.get(e)?t&&t(I.get(e)):$(document).on("allWhiteListLoaded",function(){t&&t(I.get(e))})},isPrepaid:function(){var e=$.Deferred();return this.getAllWhiteList(function(t){t.PrepaidForCVM||t.CDB_PrepaidForCDB?e.resolve():e.reject()}),e},getMsgList:function(t,e,i){x.send(l.get("getMsgList"),{data:t,global:!1,cb:function(t){I.commonCb(t,e,i)}})},getTicketNum:function(e,i){x.send(l.get("getTicketNum"),{global:!1,cb:function(t){I.commonCb(t,e,i)}})},getVouchersNum:function(e,i){x.send(l.get("getVouchersNum"),{global:!1,cb:function(t){I.commonCb(t,e,i)}})},queryKeypair:function(t,e,i){x.send(l.get("queryKeypair"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},createKeypair:function(t,e,i){x.send(l.get("createKeypair"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},loadKeypair:function(t,e,i){x.send(l.get("loadKeypair"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},modifyKeypair:function(t,e,i){x.send(l.get("modifyKeypair"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},deleteKeypair:function(t,e,i){x.send(l.get("deleteKeypair"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},manageCvmKey:function(t,e,i){x.send(l.get("manageCvmKey"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},detailKeypair:function(t,n,e){x.send(l.get("detailKeypair"),{data:t,cb:function(t){I.commonCb(t,function(t){var e=t.detail_list?t.detail_list[0]:[{}],i=e.bind_uuidlist||[];e.regionList=[],i.map(function(t){return e.regionList.push(t.area),t.uuid}),n(t)},e)}})},loadChartDataV2:function(t,o,e,a,i){var s=this,c=(t=t||{}).chartInfos||[],n=t.namespace||"cvm",r=t.date||"",l=t.area||1,d=t.appId,u=t.vpcId,p=t.ip,f=t.uuid;s.chartDataCache||(s.chartDataCache={});for(var h=[],m=(new Date).getTime(),g=0;g<c.length;g++){var v=s.chartDataCache[a+"_"+c[g]+"_"+JSON.stringify(r)];if(v){if("1h"==r&&v.time+3e5<m){h.push(c[g]);continue}!0}else h.push(c[g])}if(h.length){var b=[];for(g=0;g<h.length;g++)b.push({resourceType:n,resourceId:a,resourceArea:l,metric:h[g],time:r,vpc:u,appId:d,ip:p,uuid:f});var y="https://monitor."+QCCONSOLE_HOST.substr(8)+"/index.php/"+n+"/graph?g_tk="+k.getACSRFToken()+"&cb=?",C={_format:"jsonp",querys:b};x.getJSON(y,C,function(t){I.commonCb(t,function(t){for(var e=(t=t||{}).graphs||[],i=0;i<e.length;i++)e[i]&&(s.chartDataCache[a+"_"+e[i].metric+"_"+JSON.stringify(r)]={time:m,chartData:e[i]});var n=[];for(g=0;g<c.length;g++)s.chartDataCache[a+"_"+c[g]+"_"+JSON.stringify(r)]&&n.push({chartInfo:c[g],chartData:k.cloneObject(s.chartDataCache[a+"_"+c[g]+"_"+JSON.stringify(r)].chartData)});o(n)},e)})}else{var w=[];for(g=0;g<c.length;g++)w.push({chartInfo:c[g],chartData:k.cloneObject(s.chartDataCache[a+"_"+c[g]+"_"+JSON.stringify(r)].chartData)});o(w)}},loading:!1,cbList:[],getMonitorAgent:function(t,e,i){var n=this,o=n.agentCache||{},a=Date.now();if(o&&o.time&&o.time+3e5>=a)e(o.data);else{if(n.cbList&&n.cbList.push({cb:e,fail:i}),n.loading)return;n.loading=!0,x.send(l.get("getMonitorAgent"),{data:t,cb:function(t){n.agentCache=t,n.agentCache.time=Date.now();for(var e=0;e<n.cbList.length;e++){var i=n.cbList[e];i&&I.commonCb(t,i.cb||function(){},i.fail||function(){})}n.cbList=[],n.loading=!1}})}},queryKeyByIps:function(t,e,i){x.send(l.get("queryKeyByIps"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},queryCvmOpLogs:function(t,e,i,n,o,a,s){x.send(l.get("queryCvmOpLogs"),{data:{deviceIds:t.join("|"),startTime:e,endTime:i,offset:n,count:o},cb:function(t){I.commonCb(t,a,s)}})},queryImages:function(t,e,i,n,o,a){var s={regionId:t,imgStatus:e};o!=undefined&&(s.virtualPlatform=o),x.send(l.get("queryImages"),{data:s,cb:function(t){I.commonCb(t,i,n)},global:a})},queryImageDetail:function(t,e,i){x.send(l.get("queryImages"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},delImages:function(t,e,i){x.send(l.get("delImages"),{data:{imageIds:t},cb:function(t){I.commonCb(t,e,i)}})},modImage:function(t,e,i,n,o){x.send(l.get("modImage"),{data:{imageId:t,imageName:e,imageDesc:i},cb:function(t){I.commonCb(t,n,o)}})},queryCbsList:function(t,e,i,n){x.send(l.get("queryCbsList"),{data:t,global:n,cb:function(t){I.commonCb(t,e,i)}})},modifyCbsAlias:function(t,e,i){x.send(l.get("modifyCbsAlias"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},setCbsAutoRenewFlag:function(t,e,i){x.send(l.get("setCbsAutoRenewFlag"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},getDashboardBase:function(e,i){x.send(l.get("getDashboardBase"),{cb:function(t){I.commonCb(t,e,i)}})},getAppMonitor:function(e,i){$.ajax({url:"//monitor."+QCCONSOLE_HOST.substr(8)+"/index.php/alarm/scope",dataType:"jsonp",data:{_format:"json",g_tk:k.getACSRFToken()},jsonp:"cb",success:function(t){I.commonCb(t,e,i)},error:i})},getAppSecurity:function(e,i){x.send(l.get("getAppSecurity"),{cb:function(t){I.commonCb(t,e,i)}})},getNetworkFlow:function(e,i){x.send(l.get("getNetworkFlow"),{cb:function(t){I.commonCb(t,e,i)}})},getMargin:function(e,i){var t;(t=I.get("cache_margin"))?e(t):x.send(l.get("getMargin"),{cb:function(t){I.commonCb(t,e,i,"cache_margin")}})},getServicesInfo:function(t,e,i){x.send(l.get("getServicesInfo"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},getExpireNum:function(t,e,i,n){x.send(l.get("getExpireNum"),{data:t,global:n,cb:function(t){I.commonCb(t,e,i)}})},getNotice:function(t,e,i){x.send(l.get("getNotice"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},getVpcRegionWhiteList:function(e,i){x.send(l.get("getVpcRegionWhiteList"),{data:{},cb:function(t){I.commonCb(t,e,i)}})},getVpcList:function(t,e,i){x.send(l.get("getVpcList"),{data:{regionId:t},cb:function(t){I.commonCb(t,e,i)}})},getVpcStatisticList:function(t,e,i,n,o,a){x.send(l.get("getVpcStatisticList"),{data:{regionId:t,offset:i,limit:n,keyword:e},cb:function(t){I.commonCb(t,o,a)}})},getVpcExternalStatistic:function(t,e,i,n,o){x.send(l.get("getVpcExternalStatistic"),{data:{regionId:t,vpcIds:e,keys:i},cb:function(t){I.commonCb(t,n,o)}})},getVpcTopo:function(t,e,i,n){x.send(l.get("getVpcTopo"),{data:{regionId:t,vpcId:e},cb:function(t){I.commonCb(t,i,n)}})},getVpcTopoExternal:function(t,e,i,n){x.send(l.get("getVpcTopoExternal"),{data:{regionId:t,vpcId:e},cb:function(t){I.commonCb(t,i,n)}})},updateCvm:function(t,e,i,n,o,a,s,c,r){x.send(l.get("updateCvm"),{data:{regionId:t,vpcId:e,uuid:i,srcVpcIp:n,dstVpcIp:o,srcSubnetId:a,dstSubnetId:s},cb:function(t){I.commonCb(t,c,r)}})},getVpcSubnetStatisticList:function(t,e,i){x.send(l.get("getVpcSubnetStatisticList"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},getVpcSubnetIpCounts:function(t,e,i,n){x.send(l.get("getVpcSubnetIpCounts"),{data:{regionId:t,subnetList:e},cb:function(t){I.commonCb(t,i,n)}})},getVpcRtbStatisticList:function(t,e,i,n,o,a,s){x.send(l.get("getVpcRtbStatisticList"),{data:{regionId:t,vpcId:e,offset:n,limit:o,keyword:i},cb:function(t){I.commonCb(t,a,s)}})},getVpcVpnGwStatisticList:function(t,e,i,n,o,a,s){x.send(l.get("getVpcVpnGwStatisticList"),{data:{regionId:t,vpcId:e,offset:n,limit:o,keyword:i},cb:function(t){I.commonCb(t,a,s)}})},getVpcVpnGwStatisticListEx:function(t,e,i,n,o,a,s,c){$.isFunction(a)&&(c=s,s=a,a=o,o=n,n=i,i=undefined),x.send(l.get("getVpcVpnGwStatisticListEx"),{data:{regionId:t,vpcId:e,vpnGwId:i,offset:o,limit:a,keyword:n},cb:function(t){I.commonCb(t,s,c)}})},getSslVpnStatisticListEx:function(t,e,i,n,o,a,s,c){x.send(l.get("getSslVpnStatisticListEx"),{data:{regionId:t,vpcId:e,sslVpnId:i,offset:o,limit:a,keyword:n},cb:function(t){I.commonCb(t,s,c)}})},getVpcVpnUsedList:function(t,e,i){x.send(l.get("getVpcVpnUsedList"),{data:{regionId:t},cb:function(t){I.commonCb(t,e,i)}})},getVpcVpnConnStatisticList:function(t,e,i,n,o,a,s){x.send(l.get("getVpcVpnConnStatisticList"),{data:{regionId:t,vpcId:e,offset:n,limit:o,keyword:i},cb:function(t){I.commonCb(t,a,s)}})},getVpcUserGwStatisticList:function(t,e,i,n,o,a){x.send(l.get("getVpcUserGwStatisticList"),{data:{regionId:t,offset:i,limit:n,keyword:e},cb:function(t){I.commonCb(t,o,a)}})},getVpcView:function(t,e,i,n){x.send(l.get("getVpcView"),{data:{regionId:t,vpcId:e},cb:function(t){I.commonCb(t,i,n)}})},addVpc:function(t,e,i,n,o,a){x.send(l.get("addVpc"),{data:{regionId:t,vpcName:e,vpcCIDR:i,subnetList:n},cb:function(t){I.commonCb(t,o,a)}})},delVpc:function(t,e,i,n){x.send(l.get("delVpc"),{data:{vpcId:e,regionId:t},cb:function(t){I.commonCb(t,i,n)}})},modifyVpcProperty:function(t,e,i,n,o){x.send(l.get("modifyVpcProperty"),{data:{vpcId:e,vpcName:i,regionId:t},cb:function(t){I.commonCb(t,n,o)}})},modifyVPCSubnetRouteTable:function(t,e,i,n,o,a){x.send(l.get("modifyVPCSubnetRouteTable"),{data:{regionId:t,vpcId:e,subnetId:i,routeId:n},cb:function(t){I.commonCb(t,o,a)}})},getVpcDeviceCount:function(t,e,i,n){x.send(l.get("getVpcDeviceCount"),{data:{regionId:t,vpcId:e},cb:function(t){I.commonCb(t,i,n)}})},getSubnetInfo:function(t,e,i,n,o){x.send(l.get("getSubnetInfo"),{data:{regionId:t,vpcId:e,subnetId:i},cb:function(t){I.commonCb(t,n,o)}})},addSubnet:function(t,e,i,n,o){x.send(l.get("addSubnet"),{data:{regionId:t,vpcId:e,subnetList:i},cb:function(t){I.commonCb(t,n,o)}})},queryZone:function(t,e,i,n){x.send(l.get("queryZone"),{data:{regionId:t},cb:function(t){I.commonCb(t,e,i,!1,n)}})},getVpcZoneWhiteList:function(t,e,i){x.send(l.get("getVpcZoneWhiteList"),{data:{zoneIds:t},cb:function(t){I.commonCb(t,e,i)}})},modifySubnet:function(t,e,i,n,o,a,s){x.send(l.get("modifySubnet"),{data:{regionId:t,vpcId:e,subnetId:i,subnetName:n,rtbId:o},cb:function(t){I.commonCb(t,a,s)}})},deleteSubnet:function(t,e,i,n,o){x.send(l.get("deleteSubnet"),{data:{regionId:t,vpcId:e,subnetId:i},cb:function(t){I.commonCb(t,n,o)}})},getVPCGatewayList:function(t,e,i,n,o){x.send(l.get("getVPCGatewayList"),{data:{regionId:t,vpcId:e,gatewayType:i},cb:function(t){I.commonCb(t,n,o)}})},getVPCRouteTable:function(t,e,i,n,o,a){x.send(l.get("getVPCRouteTable"),{data:{regionId:t,vpcId:e,routerId:i,rtbId:n},cb:function(t){I.commonCb(t,o,a)}})},addVPCRouteTable:function(t,e,i,n,o,a,s){x.send(l.get("addVPCRouteTable"),{data:{regionId:t,vpcId:e,routerId:i,rtbName:n,routeList:o},cb:function(t){I.commonCb(t,a,s)}})},modifyVPCRouteTable:function(t,e,i,n,o,a,s,c){x.send(l.get("modifyVPCRouteTable"),{data:{regionId:t,vpcId:e,routerId:i,rtbId:n,rtbName:o,routeList:a},cb:function(t){I.commonCb(t,s,c)}})},deleteVPCRouteTable:function(t,e,i,n,o,a){x.send(l.get("deleteVPCRouteTable"),{data:{regionId:t,vpcId:e,routerId:i,rtbId:n},cb:function(t){I.commonCb(t,o,a)}})},getVpnGw:function(t,e,i,n,o){x.send(l.get("getVpnGw"),{data:{regionId:t,vpcId:e,vpnGwId:i},cb:function(t){I.commonCb(t,n,o)}})},initVpnGw:function(t,e,i){x.send(l.get("initVpnGw"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},clearVpnGw:function(t,e,i,n,o){x.send(l.get("clearVpnGw"),{data:{regionId:t,vpcId:e,vpnGwId:i},cb:function(t){I.commonCb(t,n,o)}})},clearSslVpn:function(t,e,i,n,o){x.send(l.get("clearSslVpn"),{data:{regionId:t,vpcId:e,sslVpnId:i},cb:function(t){I.commonCb(t,n,o)}})},getVpnGwQuota:function(e,i){x.send(l.get("getVpnGwQuota"),{cb:function(t){I.commonCb(t,e,i)}})},addVpnGw:function(t,e,i){x.send(l.get("addVpnGw"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},modifyVpnGw:function(t,e,i){x.send(l.get("modifyVpnGw"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},addUserGw:function(t,e,i){x.send(l.get("addUserGw"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},modifyUserGw:function(t,e,i){x.send(l.get("modifyUserGw"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},delUserGw:function(t,e,i){x.send(l.get("delUserGw"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},addVpnConn:function(t,e,i){x.send(l.get("addVpnConn"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},modifyVpnConn:function(t,e,i){x.send(l.get("modifyVpnConn"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},delVpnConn:function(t,e,i){x.send(l.get("delVpnConn"),{data:t,cb:function(t){I.commonCb(t,e,i)}})},getVpnStuff:function(t,e,i,n){x.send(l.get("getVpnStuff"),{data:{regionId:t,vpcId:e},cb:function(t){I.commonCb(t,i,n)}})},getVpnConnProperty:function(t,e,i,n,o){x.send(l.get("getVpnConnProperty"),{data:{vpcId:t,vpcConnId:e,taskId:i},cb:function(t){I.commonCb(t,n,o)}})},getVpnPrice:function(t,e,i){x.send(l.get("getVpnPrice"),{data:t,global:!1,cb:function(t){I.commonCb(t,e,i)}})},payByCart:function(t,e,i){x.send(l.get("payByCart"),{data:t,global:!1,cb:function(t){I.commonCb(t,e,i)}})},payByCartCvm:function(t,e,i){x.send(l.get("payByCartCvm"),{data:t,global:!1,cb:function(t){I.commonCb(t,e,i)}})},getDealsByCond:function(t,e,i){x.send(l.get("getDealsByCond"),{data:t,global:!1,cb:function(t){I.commonCb(t,e,i)}})},getUserGwVendor:function(e,i){x.send(l.get("getUserGwVendor"),{global:!1,cb:function(t){I.commonCb(t,e,i)}})},loadVpnChartData:function(t,e,i){x.send(l.get("loadVpnChartData"),{data:t,cb:function(t){I.commonCb(t,e,i,!1,!1)}})},getGwStatusList:function(t,e,i,n){x.send(l.get("getGwStatusList"),{data:{regionId:t,vpcId:e},cb:function(t){I.commonCb(t,i,n,!1,!1)}})},getVpnGwStatusList:function(t,e,i,n){x.send(l.get("getVpnGwStatusList"),{data:{regionId:t,vpcId:e},cb:function(t){I.commonCb(t,i,n,!1,!1)}})},getVpnConnStatusList:function(t,e,i,n){x.send(l.get("getVpnConnStatusList"),{data:{regionId:t,vpcId:e},cb:function(t){I.commonCb(t,i,n,!1,!1)}})},getOperatelogList:function(t,e,i,n){x.send(l.get("getOperatelogList"),{data:t,global:n,cb:function(t){I.commonCb(t,e,i)}})},queryConfigureProducts:function(t,e,i,n){x.send(l.get("queryConfigureProducts"),{data:t,global:n,cb:function(t){I.commonCb(t,e,i)}})},updateUserDefined:function(t,e,i,n){x.send(l.get("updateUserDefined"),{data:t,global:n,cb:function(t){I.commonCb(t,e,i)}})},queryConfigureCodeData:function(t,e,i,n){x.send(l.get("queryConfigureCodeData"),{data:t,global:n,cb:function(t){I.commonCb(t,e,i)}})},getDeveloperAccountList:function(t,e,i,n){x.send(l.get("getDeveloperAccountList"),{data:t,global:n,cb:function(t){I.commonCb(t,e,i)}})},switchDeveloperAccount:function(t,e,i,n){x.send(l.get("switchDeveloperAccount"),{data:t,global:n,cb:function(t){I.commonCb(t,e,i)}})},resetCpmPasswd:function(t,e,i,n){x.send(l.get("resetCpmPasswd"),{data:t,global:n,cb:function(t){I.commonCb(t,e,i)}})},getPriceBm:function(t,e,i){x.send(l.get("getPriceBm"),{data:t,global:!1,cb:function(t){I.commonCb(t,e,i)}})},getVpcBmVpnGwList:function(t,e,i,n,o,a,s){x.send(l.get("getVpcBmVpnGwList"),{data:{regionId:t,vpcId:e,offset:n,limit:o,keyword:i},cb:function(t){I.commonCb(t,a,s)}})},generateDeals:function(t,e,i){x.send(l.get("generateDeals"),{data:t,global:!1,cb:function(t){I.commonCb(t,e,i)}})},delegateCApi:function(t,e,i,n,o,a,s){var c={};Object.keys(n).forEach(function(t){var e=n[t];e!==undefined&&(c[t]=e)}),x.send({url:"/cgi/capi?"+$.param({cmd:i,action:"delegate",serviceType:e}),method:"post"},{data:{regionId:t,serviceType:e,cmd:i,data:c},cb:function(t){var e=t.data;I.commonCb(t,o,a,null,!e),0!==t.code&&e&&(s?u.error(s(e.cgwerrorCode,e)):u.error(t.msg||e.message||e.msg||"请求服务器失败"))}})},queryBarad:function(t,e,i,n){x.send({url:"/cgi/barad?action=query",method:"post"},{data:$.extend({regionId:t},e),cb:function(t){I.commonCb(t,i,n)}})},checkTask:function(t){var o=$.extend({checkTime:1e3,hideTips:!1,tips:""},t);return o.hideTips||u.requestStart({text:o.tips}),new Promise(function(e,i){!function n(){p.getFlowCscResult({taskId:o.taskId,regionId:o.regionId},function(t){0===t.status?(o.hideTips||u.requestStop(),e(t.output)):1===t.status?(o.hideTips||u.requestStop(),i(t.output)):setTimeout(n,o.checkTime)},i)}()})},getCdhChartData:function(t,e,i){x.send(l.get("getCdhChartData"),{data:t,cb:function(t){I.commonCb(t,e,i,!1,!1)}})},getCdhMonitorChartData:function(t,e,i){x.send(l.get("getCdhMonitorChartData"),{data:t,cb:function(t){I.commonCb(t,e,i,!1,!1)}})},getStatisticsGridData:function(t,e,i){x.send(l.get("getStatisticsGridData"),{data:t,cb:function(t){I.commonCb(t,e,i,!1,!1)}})},getCdhChartDataBatch:function(t,e,i){x.send(l.get("getCdhChartDataBatch"),{data:t,cb:function(t){I.commonCb(t,e,i,!1,!1)}})},getRealTimeCdhData:function(t,e,i){x.send(l.get("getRealTimeCdhData"),{data:t,cb:function(t){I.commonCb(t,e,i,!1,!1)}})},getGroupList:function(t,e,i,n){x.send(l.get("getGroupList"),{data:t,global:n,cb:function(t){I.commonCb(t,e,i)}})},ping:function(e,i){x.send(l.get("ping"),{global:!1,cb:function(t){I.commonCb(t,e,i)}})},queryZoneName:(s={},function(t,e){var i=t.regionId,n=t.zoneId,o=(e=e||{}).tipErr;return new Promise(function(e,t){i||t(new Error("缺少 regionId")),n?s[i]?setTimeout(function(){e(d.clone(s[i]))},0):p.queryZone(i,function(t){s[i]=t,e(d.clone(s[i]))},t,o):t(new Error("缺少 zoneId"))}).then(function(t){var e="";return t.some(function(t){if(t.zoneId==n)return e=t.zoneName,!0}),e||n})}),getNextDate:function(t,e){if(!t)return"";var i=d.getDate(t),n=i.getDate(),o=new Date(i.getFullYear(),i.getMonth()+1,0);return i.setMonth(i.getMonth()+(e||1)),i.getDate()<n?i.setDate(0):n===o.getDate()&&i.setFullYear(i.getFullYear(),i.getMonth()+1,0),d.formatDate(i,"yyyy-MM-dd")},getInstanceEniLimit:function(t,e,i){this.delegateCApi(t.regionId,"vpc","GetInstanceEniLimit",t,function(t){e(t)},i)},getInstanceEniNum:function(t,e,i){this.delegateCApi(t.regionId,"vpc","DescribeNetworkInterfaces",t,function(t){e(t)},i)},reportVisitProduct:function(t){var n;t||(t=a&&a.option&&!a.option.html5Mode?location.hash.slice(1):location.pathname);for(var e=t.split("/");e&&e.length;){if(o[e.join("/")]){n=e.join("/");break}e.pop()}n&&this.getComData(function(t){if(t&&t.userInfo){var e=t.userInfo.uin,i=t.userInfo.ownerUin;x.send({url:"/cgi/capi?"+$.param({cmd:"ReportUserLastVisit",action:"delegate",serviceType:"account",secure:1,sts:1}),method:"post"},{data:{regionId:1,serviceType:"account",cmd:"ReportUserLastVisit",data:{productName:n,loginUin:e,loginOwnerUin:i,skey:k.cookie.get("skey")||k.cookie.get("p_skey")}}})}})},reportTranslate:function(t,e,i){x.send(l.get("reportTranslate"),{data:t,global:!1,cb:function(t){I.commonCb(t,e,i)}})},hideNewSidebarTip:function(t,e,i){x.send(l.get("hideNewSidebarTip"),{data:t,global:!1,cb:function(t){I.commonCb(t,e,i)}})},useOldSidebar:function(t,e,i){x.send(l.get("useOldSidebar"),{data:t,global:!1,cb:function(t){I.commonCb(t,e,i)}})},useNewSidebar:function(t,e,i){x.send(l.get("useNewSidebar"),{data:t,global:!1,cb:function(t){I.commonCb(t,e,i)}})}},f={};p._cacheRequest=function(t,e,i){f[t]=f[t]||{},i=i||{};var n=f[t],o={},a=0,s=1e3*i.expire;"function"!=typeof e[0]&&(o=e[0],a=1);var c=$.param(o),r=$.Deferred();return e[a]=d.beforeFn(e[a]||function(){},function(t){var e=!n[c];n[c]={data:d.clone(t)},s&&e&&(n[c].timer=setTimeout(function(){delete n[c]},s)),r.resolve(t)}),n&&n[c]&&n[c].data?(e[a](n[c].data),r.resolve(n[c].data)):p[t].apply(p,e),r.promise()},i.exports=p}),define("models/market",function(t,e,i){var n=t("nmc/main/model");i.exports=new n({getProviderDealList:{url:"/market?action=getDealList",method:"get"},setServiceStatus:{url:"/market?action=setServiceStatus",method:"post"},getDealInfo:{url:"/market?action=getDealInfo",method:"get"},getPendingDealNum:{url:"/market?action=getPendingDealNum",method:"get"}},"/cgi")}),define("models/message",function(t,e,i){var n=t("nmc/main/model");i.exports=new n({getMsgList:{url:"/message?action=getMsgList",method:"get"},getMsgSearch:{url:"/message?action=getMsgSearch",method:"get"},getMsgSummary:{url:"/message?action=getMsgSummary",method:"get"},getMsgType:{url:"/message?action=getMsgType",method:"get"},getMsgContent:{url:"/message?action=getMsgContent",method:"get"},queryMsgTypeList:{url:"/message?action=queryMsgTypeList",method:"get"},getReceiversOnAllType:{url:"/message?action=getReceiversOnAllType",method:"get"},msgRead:{url:"/message?action=msgRead",method:"post"},msgReadAll:{url:"/message?action=msgReadAll",method:"post"},msgDelete:{url:"/message?action=msgDelete",method:"post"}},"/cgi")}),define("models/reporter",function(t,e){var b=t("reporter"),y=(t("widget/cam/cam"),{VERIFY_LOGIN_FAILED:1001,defaultCode:1999}),C={UnauthorizedOperation:4102,defaultCode:4999},w=[1001,4102,42];e.report=function I(t,e,i,n){if(!b.ignore()){try{var o=t.code,a=t.code;/^\d+$/g.test(o)||(o?o=y[o]||C.defaultCode:(0===i.indexOf("/cgi/graphql")?o=function h(t){if(t.errors){for(var e=0;e<t.errors.length;e++){var i=t.errors[e];if(i.message)try{var n=JSON.parse(i.message)||{};return"undefined"!=typeof n.code?n.code:n.data.Response.Error.Code}catch(o){}}return C.defaultCode}return 0}(t):(n.v3||!1===n.classicResponse)&&(o=function m(t){return t&&t.data&&t.data.Response&&t.data.Response.Error?t.data.Response.Error.Code:0}(t)),/^\d+$/g.test(o)||(o=C[o]||C.defaultCode)))}catch(g){}var s=2;0==o?s=1:-1<w.indexOf(o)&&(s=3);var c="iaas/"+i.replace(/\/capi/,"").replace(/^\//,"").replace(/&t=\d+$/,"");b.cgi({cgi:c,code:o,type:s,time:e});try{if("undefined"!=typeof feMonitor){3==s&&(o=0),/^\d+$/g.test(a)||"InternalError"!=a&&(o=0);var r=(c=(c=c.replace(/&uin=\d*/g,"")).split("i=")[1]||c.split("query=")[1]).split("/"),l=2==r.length?r[1]:r[0],d=location.pathname.split(/\/\d+/)[0]||"",u="/detail";-1<d.indexOf(u)&&(d=d.slice(0,d.indexOf(u)+u.length));var p=d.split("/")&&d.split("/")[1];e=15e3<e?15e3:e,l=l.split("&")[0],l=encodeURIComponent(l),new Date;var f=feMonitor.getReportMonitorParams({intfID:"5",business:"console",subBusiness:p,timeCost:e,result:o,cgiName:l,page:d});feMonitor&&feMonitor.reportCgi(f)}}catch(v){}}}}),define("models/snapshot",function(t,e,i){var n=t("nmc/main/model");i.exports=new n({querySnapshot:{url:"/snapshot?action=querySnapshot",method:"get"},modifySnapshot:{url:"/snapshot?action=modifySnapshot",method:"post"},createSnapshot:{url:"/snapshot?action=createSnapshot",method:"post"},delSnapshot:{url:"/snapshot?action=delSnapshot",method:"post"},rollbackSnapshot:{url:"/snapshot?action=rollbackSnapshot",method:"post"},querySnapshotLog:{url:"/snapshot?action=querySnapshotLog",method:"get"},checkSnapAbility:{url:"/snapshot?action=checkSnapAbility",method:"get"},createAutoSnapshotPolicy:{url:"/snapshot?action=createAutoSnapshotPolicy",method:"post"},describeAutoSnapshotPolicies:{url:"/snapshot?action=describeAutoSnapshotPolicies",method:"get"},modifyAutoSnapshotPolicy:{url:"/snapshot?action=modifyAutoSnapshotPolicy",method:"post"},deleteAutoSnapshotPolicies:{url:"/snapshot?action=deleteAutoSnapshotPolicies",method:"post"},bindAutoSnapshotPolicy:{url:"/snapshot?action=bindAutoSnapshotPolicy",method:"post"},describeCbsAssociatedAsp:{url:"/snapshot?action=describeCbsAssociatedAsp",method:"get"},unbindAutoSnapshotPolicy:{url:"/snapshot?action=unbindAutoSnapshotPolicy",method:"post"}},"/cgi")}),define("widget/alg/Locks",function(t,e,i){i.exports=function(){var i={},n=0,o=this,a=function(t){var e=o.isLocked();e!==t&&o.onChange&&o.onChange(e)};o.lock=function(t){if(!i.hasOwnProperty(t)){var e=o.isLocked();i[t]=!0,n++,a(e)}},o.unlock=function(t){if(i.hasOwnProperty(t)){var e=o.isLocked();delete i[t],n--,a(e)}},o.isLocked=function(){return 0<n}}}),define("widget/baseInfo/baseInfo",function(t,e,i){t("pageManager");var n=t("appUtil"),o=t("widget/pubsubhub/pubsubhub"),a=t("qccomponent"),s=t("./validator"),c=i.exports=a.ComponentBase.extend({$tpl:'    <div class="tc-15-list-wrap {{className}}">        <div class="head-top-title"><h3>{{title}}</h3>            <a b-on-click="edit(true)" b-if="!isEdit && showEdit && info" href="javascript:;"><i class="pencil-icon "></i>编辑</a>        </div>        <form action="javascript:;" b-on-submit="save()">            {{> detailTpl }}            <div class="tc-15-page tc-15-table-panel-edit" style="margin-left: 95px;" b-if="isEdit">                <button class="tc-15-btn" b-ref="saveBtn" type="submit">保存</button>                <button class="tc-15-btn weak" b-on-click="cancel()">取消</button>            </div>        </form>    </div>',$afterInit:function(){c.__super__.$afterInit.call(this),this.load(),this.bindEvent()},detailTpl:'    <div class="tc-15-list-content">        <ul>            <li><em class="tc-15-list-tit">名称</em>                <span b-if="!isEdit" class="tc-15-list-det">{{info.name}}</span>                <div class="tc-15-input-text-wrap" b-if="isEdit">                    <input type="text" data-validate="name" class="tc-15-input-text" b-model="info.name" maxlength="25">                    <div class="tc-15-input-tips">还能输入{{25 - (info.name).length}}个字符，英文、汉字、数字、连接线"-"或下划线"_"</div>                </div>            </li>            <li><em class="tc-15-list-tit">ID</em><span class="tc-15-list-det">{{info.id}}</span>            </li>        </ul>    </div>',showEdit:!0,edit:function(t){this.$set("isEdit",t),t&&$(this.$el).find("input:text:visible:first").select()},getData:function(t){return new Promise(function(t,e){console.log("实现该方法以拉取数据")})},updateData:function(){return new Promise(function(t,e){console.log("实现该方法更新编辑数据")})},validate:function(t){return!0},save:function(){var e=$(this.$refs.saveBtn),t=new s({rules:this.rules});if(t.btn=this.$refs.saveBtn,!e.hasClass("disabled")&&t.validateAll(this.$el,this)&&this.validate(t,this.$el,this))return e.addClass("disabled"),this.updateData(this.info).then(function(t){return e.removeClass("disabled"),t},function(t){throw e.removeClass("disabled"),t})},cancel:function(){this.$set({info:n.clone(this.origin)}),this.edit(!1)},refresh:function(){return this.load()},load:function(){var e=this;return this.getData(this.id).then(function(t){e.$set({info:t,regionId:n.getRegionId(),origin:n.clone(t),isEdit:!1}),e.$emit("loaded")})},bindEvent:function(){var t=this;o.on(this.changeEvent,function(){t.load()})}},{defaults:{title:"基本信息",showEdit:!0,className:"vpc-line-inf"}})}),define("widget/baseInfo/validator",function(t,e,i){t("appUtil");var o=t("qccomponent"),n=t("widget/validator/validatorV2");i.exports=n.extend({typeAttr:"data-validate",showErr:function(t,e,i,n){var o=this;(i=i||{}).silence||(i.noTips||this.showTips(t,e,i),$(t).parent().addClass(this.errClass),"SELECT"===t.tagName.toUpperCase()&&$(t).addClass(this.errClass),$(t).filter(this.validateSelector).off(".validator").on("input.validator change.validator",function(){o.validate(t,{noTips:!0},n)}))},hideErr:function(t){this.hideTips(t),$(t).parent().removeClass(this.errClass),"SELECT"===t.tagName.toUpperCase()&&$(t).removeClass(this.errClass)},showTips:function(t,e,i){var n=new(o.getComponent("qc-popover"))({$data:$.extend({trigger:"",hideDestroy:!0,content:e,position:"top"},i),target:t,handler:this.btn});(t.tips=n).show()},hideTips:function(t){var e=t.tips;e&&e.hide()}})}),define("widget/betaTip/betaTip",function(t,e,i){var n=t("$"),o=(t("util"),t("pageManager")),a=t("router"),s=function(){a.navigate("ticket")},c={vpc:'    <div class="title-select-panel">        <h2>私有网络</h2>    </div>    <i class="line"></i>    <i class="vpc-view"></i>    <div class="vpc-info">        <h3>私有网络可以做什么</h3>        <p class="info">您可以在此创建独立的私有地址空间，并在此空间内管理云服务器<br>您可以使用 VPN服务将您的数据中心与此空间进行连接，搭建您的混合云服务</p>        <a href="javascript:void(0);" class="btn-mod" id="betaTicket">立即申请开通</a>    </div>',firewall:'    <div class="title-select-panel">        <h2>开通安全组</h2>    </div>    <i class="line"></i>    <div class="firewall-welcome">        <i class="line"></i>        <i class="firewall-view"></i>        <div class="cdn-info">            <h3>腾讯云安全组新鲜出炉,诚邀试用</h3>            <p class="info">安全组提供基于IP和端口的云主机出入访问规则控制</p>            <a href="javascript:;" id="betaTicket" class="btn-mod">申请试用</a>        </div>    </div>'},r={show:function(t){t&&(o.appArea.html(c[t]),n("#betaTicket").click(s))}};i.exports=r}),define("widget/cacher/Cacher",function(t,e,i){var u=t("appUtil"),s="_KEY_",p=function(c,r,l){var d=l.promiseStyle,u=l.ns,p=l.alias||r;return function(){var t,i,n,o,e=this,a=[].slice.call(arguments),s=p+"-"+a.join("-");return t=d?function(e){c[r].apply(c,a).done(function(t){e(null,t)}).fail(function(t){e(t)})}:(i=c,n=r,o=a,function(e){var t=o.concat([function(t){e(null,t)},e]);i[n].apply(i,t)}),u&&[].concat(u).forEach(function(t){e.addNsCache(f(t,a),s)}),e.getCache(s,t,l)}};function f(t,i){return 0<=t.indexOf("$")?t.replace(/\$(\d+)/g,function(t,e){return i[e]||""}):[t].concat(i).join(".")}var n=function(t){var e=this;e.nsCache={},e.storage={},e.waiting={},(t||[]).forEach(e.registerCacheFn.bind(e))};$.extend(n.prototype,{addNsCache:function(t,e){var i,n,o=t.split("."),a=this.nsCache;for(i=0;i<o.length;i++)a=a[n=o[i]]||(a[n]={});(a[s]||(a[s]={}))[e]=1},clearNsCache:function(t){var e,i,n=t.split("."),o=this.nsCache,a=[];for(e=0;e<n.length;e++)(o=o[i=n[e]]||(o[i]={})).ALL&&o.ALL[s]&&(a=a.concat(Object.keys(o.ALL[s])));o[s]&&(a=a.concat(Object.keys(o[s]))),a.forEach(this.resetCache.bind(this))},getCache:function(i,t,e){var n=this.storage,o=this.waiting,a=e.ignoreCache,s=e.lifetime,c=function(t){return u.clone(t)};if(o.hasOwnProperty(i))return o[i].then(c);var r,l=$.Deferred(),d=(new Date).getTime();return!0!==a&&n.hasOwnProperty(i)&&(!(r=n[i]).expire||r.expire>d)?l.resolve(u.clone(r.data)):((o[i]=l).always(function(){delete o[i]}),t(function(t,e){t?l.reject(t):(n[i]={expire:s?d+s:0,data:e},l.resolve(e))}),l.then(c))},resetCache:function(t){delete this.storage[t]},resetNamespace:function(t){1<arguments.length&&(t=[].join.call(arguments,".")),this.clearNsCache(t)},registerCacheFn:function(t){var e,i,n,o,a,s,c,r,l,d=this,u=d;$.isArray(t)?(e=t[0],i=t[1],n=t[2],s=t[3]||0):(e=t.host,i=t.fnName,n=t.alias,o=t.promise,a=t.ns,s=t.lifetime,c=t.isModify),r=u[n=n||i]=p(e,i,{ignoreCache:c,lifetime:s,ns:a,promiseStyle:o,alias:n}),l=function(){var e=[].slice.call(arguments),t=n+"-"+e.join("-");d.resetCache(t),a&&[].concat(a).forEach(function(t){d.clearNsCache(f(t,e))})},c&&(u[n]=function(){var t=this,e=[].slice.call(arguments),i=r.apply(t,arguments);return i.done(function(){l.apply(t,e)}),i}),!c&&/^get/.test(n)&&(u[n.replace(/^get/,"reset")]=l,u[n.replace(/^get/,"getFresh")]=p(e,i,{ignoreCache:!0,ns:a,promiseStyle:o,alias:n}))}}),i.exports=n}),define("widget/cam/cam",function(t,e,i){var n=t("qccomponent"),o=/\(\w+:\w+\)/g,a=/\(([\w\-|\/]*:){5}.*?\)/g,s=(t("dialog"),(n=t("qccomponent")).getComponent("grid-view").extend({dataCallback:function(t){return $(this.$el).removeClass("none-mod cam-tips"),this.camTipsStatus&&(this.$set("camTipsStatus",!1),this.hideTips()),s.__super__.dataCallback(t)},errorCallback:function(t){return e.isCamRefused(t)&&($(this.$el).addClass("none-mod cam-tips"),this.$set({camTipsStatus:!0,list:[],totalNum:0}),this.showTips("<cam-tips>"+(t.message||t.msg)+"</cam-tips>")),s.__super__.errorCallback(t)}}));n.tag("grid-view",s);var c=n.extend({$tpl:'<div class="authority-wrap" style="text-align: left">    <p class="authority-inf text-weak">该操作需要授权，请联系您的开发商为您添加权限。<a  target="_blank" href="//www.qcloud.com/document/product/378/4509">查看授权操作指南 <i class="external-link-icon"></i></a></p>    <p class="authority-tit text-weak" b-if="_content">失败信息描述：</p>        <div class="rich-textarea" b-if="_content">        \x3c!--<div class="permission-code-editor">                <ul class="editor-toolbars">                    <li class="active">                        <a href="##" class="editor-toolbars-item"><i class="icon copy"></i></a>                    </li>                </ul>        </div>--\x3e        <div class="rich-content">{{{ _content }}}</div>    </div></div>',$afterInit:function(){var t=this.content||$(this.$content).text();this.$set("_content",this.format(t))},format:function(t){return"undefined"==t&&(t=""),t.replace(/^\(.+?\)/,"").trim().replace(o,'<span class="text-success">$&</span>').replace(a,'<span class="text-warning">$&</span>').replace(/^(.+)$/gm,'<p class="rich-text">$1</p>')}}),r=n.extend({$tpl:'<span>    <span b-if="!icon" qc-popover-position?="position" qc-popover="<cam-tips>{{_content}}</cam-tips>" data-style="{{style}}">*****</span>    <i b-if="icon" class="icon-info-red" qc-popover-position?="position" qc-popover="<cam-tips>{{_content}}</cam-tips>" data-style="{{style}}"></i></span>',style:"width: 510px",$afterInit:function(){var t=this.content||$(this.$content).text();this.$set("_content",t),this.$watch("type",function(t){this.$set("icon","icon"==t||this.icon)},!0)}});n.tag("cam-tips",c),n.tag("cam-help-tips",r),e.CamTips=c,e.isCamRefused=function(t,e){return 4102==+t.code||42==+t.code||"UnauthorizedOperation"===t.code||"AuthFailure.UnauthorizedOperation"===t.code},e.CamHelpTips=r}),define("widget/chart/SDKWrap",function(t,e,i){var n=t("qccomponent"),o=t("lib/monitor-sdk-importer"),a=t("appUtil"),s=i.exports=n.extend({optionsExpression:"getOptions(regionId, data)",$afterInit:function(){var i=this;s.__super__.$afterInit.apply(i,arguments),o.ready().then(function(e){i.bufferUpdate=a.bufferFn(function(t){i.chartDisposer=e.MonitorDetailBuilder.build(t,i.$el)},100),i.$watch(i.optionsExpression,i.bufferUpdate,!0)})},$beforeDestroy:function(){this.bufferUpdate&&this.bufferUpdate.destroy(),this.chartDisposer&&this.chartDisposer(),s.__super__.$beforeDestroy.apply(this,arguments)}})}),define("widget/contextmenu/contextmenu",function(t,e,i){var I=t("$"),n=t("util"),a=".contextmenu{position:absolute;border:1px solid #d1d1d1;box-shadow: 1px 1px 2px rgba(0,0,0,.2);z-index: 1100;min-width:192px;background: #fff;}.contextmenu ul {border-bottom:1px solid #e1e1e1;padding:5px 0;}.contextmenu a{display:block;padding:4px 10px;font-size:12px;color:#222}.contextmenu a:hover {background-color:#0071ce;color:#fff}.contextmenu li.disabled a {color:#999; cursor:default}.contextmenu li.disabled a:hover {background-color:transparent;color:#999}",x=function(){I("#contextMenu").hide().html(""),I("body").off("click",x)},o=function(t){var o=this;this.options=I.extend({},{object:null,selector:"tbody tr",data:{},filterClass:"",getData:null,onShow:null},t);var e=this.options.object;if(e){this.menuId=(new Date).getTime();var i=this.menuEl=I("#contextMenu");i.length||(this.menuEl=i=I('<div id="contextMenu" class="contextmenu"></div>').appendTo("body").hide().bind("click",function(t){t.stopPropagation()}),n.insertStyle(a),I(document).off("contextmenu").on("contextmenu",function(t){x()})),I(e).off("contextmenu").on("contextmenu",this.options.selector,function(t){var e=I(this),i=I(t.target),n=o.options.filterClass;if(!n||!i.hasClass(n)&&!i.closest("."+n).length){if(/tr/.test(o.options.selector))if(e.filter("[data-isloading=true], .disabled").length)return;return o.trigger=e,o._show(t),!1}})}};o.prototype={_show:function(t){var i=this,e=this.options,n=this.menuEl;if(e.getData||!n.html()||this.menuId!=n.attr("menuId")){for(var o,a=I([]),s=e.getData?e.getData(i.trigger):e.data,c=0;o=s[c];c++){var r=I("<ul/>");for(var l in o){var d=o[l],u=l,p="",f=d;"object"==typeof d&&d.callback&&(u=d.name||l,p='data-name="'+l+'"',f=d.callback);var h=I("<li "+p+'><a href="javascript:;">'+u+"</a></li>");!function(t,e){t.on("click",function(){"function"==typeof e&&!I(this).hasClass("disabled")&&e(i.trigger,I(this)),t.trigger("mouseleave"),i.hide()})}(h,f),r.append(h)}a=a.add(r)}if(!a.find("li").length)return void x();n.html("").append(a),n.attr("menuId",this.menuId)}e.onShow&&e.onShow(t,n,i.trigger),n.show();var m=t.clientX,g=t.clientY,v=I(window),b=v.width(),y=v.height(),C=n.outerWidth(),w=n.outerHeight();y<g+w&&(g=y-w),b<m+C&&(m=b-C),n.css({left:m,top:g}),I("body").off("click",x).on("click",x)},hide:function(){x()},destroy:function(){}},i.exports=o}),define("widget/copy/copy",function(t,e,i){var s=t("$"),c=t("tips"),r=(t("util"),t("clipboard")),n=function(t){this.$handle=s(t.handle),this.$container=s(t.container),t.container&&this.bindEvent(),this.initClipboard()};n.prototype={bindEvent:function(){var o=this;this.$container.mouseenter(function(){o.$handle.hide(),s(this).find("[data-clipboard-text]").each(function(t,e){var i=s(e),n=i.attr("data-clipboard-text");o._checkTxt(n)&&i.show()})}).mouseleave(function(){s(this).find("[data-clipboard-text]").hide()})},initClipboard:function(){var a=this;this.$handle.each(function(t,e){var i=s(e),n=i.attr("data-clipboard-text");if(a._checkTxt(n)){var o=new r(i[0],{text:function(){return n}});o.on("success",function(){c.success("复制成功")}),o.on("error",function(t){c.error("您的浏览器不支持一键复制，请选中文本后用 Ctrl + C 快捷键进行复制"),console.warn(t)})}})},_checkTxt:function(t){return t&&"-"!=t}},i.exports=n}),define("widget/copy/fakeCopy",function(t,e,i){var n=function(t,e){this.text=t,this.callback=e,this.selectFake()};n.prototype.selectFake=function(){var t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var e=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.addEventListener("focus",window.scrollTo(0,e)),this.fakeElem.style.top=e+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.fakeElem.select(),this.copyText()},n.prototype.removeFake=function(){this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)},n.prototype.copyText=function(){var t=!0;try{t=document.execCommand("copy")}catch(e){t=!1}this.handleResult(t)},n.prototype.handleResult=function(t){this.callback&&this.callback.call(this,t)},i.exports=n}),define("widget/detail/detail",function(t,e,i){t("$");var n=t("qccomponent"),o=t("router"),a='    <div class="{{ ClassName ? ClassName : \'\'}}">        \x3c!--添加窗体模块--\x3e        {{> headerTpl }}        <qc-detail-tabs b-if="tabData && !hideTabs" active-index="{{activeIndex}}" b-with="tabData" b-ref="tabs"></qc-detail-tabs>        {{> content }}    </div>',s='    <div data-role="qc-tabs" class="manage-area-main secondary-main" style="overflow-y: inherit;">        <div class="tc-15-tab tc-15-tab-alt">            <ul role="tablist" class="tc-15-tablist" b-if="list.length > 1">                <li class="{{$index == activeIndex ? \'tc-cur\': \'\'}}" b-repeat="tab in list">                    <a b-on-click="$set(\'activeIndex\', $index)"                       title="{{tab.label}}" href="javascript:;">{{tab.label}}</a>                </li>            </ul>            <div data-tab-pane b-repeat="tab in list" b-style="{display: $index == activeIndex ? \'block\': \'none\'}">                {{> tab.content }}            </div>        </div>    </div>',c=n.getComponent("qc-tabs").extend({$tpl:s});n.tag("qc-detail-tabs",c);var r=n.extend({$tpl:a,backUrl:"",$afterInit:function(){var i=this;this.$refs.tabs&&this.$refs.tabs.$watch("activeIndex",function(t,e){t!=e&&i.loadTabs(t||0)},!0)},loadTabs:function(t){},back:function(){1<history.length?history.back():this.backUrl?o.navigate(this.backUrl):this.$destroy()}},{defaults:{title:"",content:"",hideTabs:!1,headerTpl:'    <div class="manage-area-title secondary-title">        <a href="javascript:;" b-on-click="back()" class="back-link">            <i class="btn-back-icon"></i>            <span>返回</span>        </a>        <span class="line-icon">|</span>        <h2 title="{{title || id}}">{{title || id}}</h2>        <div class="manage-area-title-right">            {{> headerRightTpl }}        </div>    </div>'}});i.exports=r}),define("widget/dialog/dialog",function(t,e,i){t("$");var s=t("dialog"),n={show:function(t,e){var i=(t=t||{}).flag||"success",n=t.content||"操作完成",o=t.title||"温馨提示",a={};a[t.okBtnTxt||"确定"]=function(){e&&e(),s.hide()},t.sub_title&&(n="<h4>"+t.sub_title+"</h4>"+n);s.create('<i class="b-'+i+'-icon"></i><div style="width: 300px; margin-left: 10px; vertical-align: middle; display: inline-block;">'+n+"</div>",480,"",{title:o,button:a,defaultCancelCb:t.defaultCancelCb});s.center()}};i.exports=n}),define("widget/editInPlace/editInPlace",function(t,e,i){var n=t("qccomponent").getComponent("popup-confirm").extend({$tpl:'    <div data-role="qc-popover" class="tc-15-edit-in-place"         style="display: none;top:-10000px;left:-10000px;z-index:999;position:absolute;background-color: #ffffff"         b-style="style">        <div>            {{> content }}        </div>        <button class="tc-15-btn m" data-confirm b-on-click="hide(true)">{{confirmKey}}</button>        <button class="tc-15-btn m weak" b-on-click="hide()">{{cancelKey}}</button>    </div>'});i.exports=n}),define("widget/errorTips/errorTips",function(t,e,i){var n=t("qccomponent"),o=t("widget/cam/cam"),a=/\(\w+:\w+\)/g,s=/\(([\w|\/]*:){5}.*?\)/g,c=(t("dialog"),{$afterInit:function(){var t=this.content||$(this.$content).text();this.$set("_content",this.format(t))},format:function(t){return"undefined"==t&&(t=""),t.replace(/^\(.+?\)/,"").trim().replace(a,'<span class="text-success">$&</span>').replace(s,'<span class="text-warning">$&</span>').replace(/^(.+)$/gm,'<p class="rich-text">$1</p>')}}),r=n.extend($.extend({$tpl:'<div class="authority-wrap" style="text-align: left">    <p class="authority-inf text-weak">该操作失败， 请联系您的开发商为您提供帮助。</p>    <p class="authority-tit text-weak" b-if="_content">详细的错误信息如下：</p>    <div class="rich-textarea" b-if="_content">        \x3c!--<div class="permission-code-editor">                <ul class="editor-toolbars">                    <li class="active">                        <a href="##" class="editor-toolbars-item"><i class="icon copy"></i></a>                    </li>                </ul>        </div>--\x3e        <div class="rich-content">{{{ _content }}}</div>    </div></div>'},c)),l={$afterInit:function(){var t=this.content||$(this.$content).text();this.$set("_content",t),this.$watch("type",function(t){this.$set("icon","icon"==t||this.icon)},!0)}},d=n.extend($.extend({$tpl:'<span>    <span b-if="!icon" qc-popover-position?="position" qc-popover="<error-tips>{{_content}}</error-tips>">*****</span>    <i b-if="icon" class="icon-info-red" qc-popover-position?="position" qc-popover="<error-tips>{{_content}}</error-tips>"></i></span>',type:"icon"},l));n.tag("error-tips",r),n.tag("error-help-tips",d),e.ErrorTips=r,e.CamTips=o.CamTips,e.isCamRefused=function(t,e){return t&&(4102==t.code||42==t.code||"AuthFailure"==t.code||"UnauthorizedOperation"==t.code)},e.CamHelpTips=o.CamHelpTips,e.ErrorHelpTips=d}),define("widget/fieldsManager/fieldsManager",function(t,e,i){var u=t("$"),p=t("util"),f=t("dialog"),a=t("tips"),h='    <div class="customize-column" id="customizeColumn">        <div class="tip_box">            <%=tipText%><span id="limitTip">，最多可勾选<%= maxLimit %>个字段，已勾选<%=defaultsNum %>个。</span>        </div>        <div class="list-wrap clearfix">            <% var field, i = -1; for (field in data) { i++; var required = data[field]["required"]; var isDefault = data[field]["defaults"];                 var eachColNum = eachColNum; %>                <% if (i % eachColNum === 0) { %>                <ul class="list-mod">                <% } %>                <li>                    <input type="checkbox" class=\'tc-15-checkbox <%= required ? "required" : ""%>\' id="customize_field_<%- field %>" value="<%- field %>"                     <% if (required) { %>                        disabled checked                     <% } else { %>                        <% if (selectedFields && selectedFields.length > 0) { %>                            <% if (selectedFields.indexOf(field) >= 0 && !required ) {                             %>                                checked                            <% } %>                        <% } else { %>                            <% if (isDefault && !required ) {                             %>                                checked                            <% } %>                        <% } %>                    <% } %>                    >                    <label for="customize_field_<%- field %>"><%= data[field]["name"] %></label>                </li>                <% if ((i+1) % eachColNum === 0) { %>                </ul>                <% } %>            <% } %>        </div>    </div>',n=function(t){this.options=u.extend({},{eachColNum:6},t),this.options.data&&this.options.cacheKey&&this.bindEvent()};n.prototype={bindEvent:function(){var t=this.options.settingHandle,e=this;t&&t.off("click").on("click",function(){e.showDialog()})},getDisplayFields:function(){return this._getDisplayFieldsData()},showDialog:function(){var t=this,e=this.options,i=e.data,n=e.eachColNum,o=e.cacheKey,a=localStorage[o]||"",s=this._countFields(),c=(s.requiredCount,s.defaultsCount),r=e.maxLimit||s.count,l=e.tipText||"请选择您想显示的列表详细信息，根据您的分辨率",d=p.tmpl(h,{data:i,tipText:l,eachColNum:n,defaultsNum:c,maxLimit:r,selectedFields:a?a.split(","):[]});f.create(d,"540","",{title:e.title||"自定义列表字段",preventResubmit:!0,button:{"确定":function(){t._setFields()}}}),u("#customizeColumn").off("click.fieldsLimit").on("click.fieldsLimit",":checkbox",this._initItemEvent.bind(this)),this._initItemEvent()},_setFields:function(){var t=this.options,e=t.cacheKey,i=t.callback,n=u("#customizeColumn").find('input[type="checkbox"]:checked'),o=[];n.each(function(t,e){e=u(e),o.push(e.val())}),localStorage[e]=o.join(","),i&&i(this._getDisplayFieldsData()),!t.withoutTips&&a.success("设置成功"),f.hide()},_getDisplayFieldsData:function(){var t=this.options,e=t.data,i=t.cacheKey,n=localStorage[i]&&localStorage[i].split(","),o={fields:[],data:{},allWidth:0};for(var a in e){var s=e[a].required,c=e[a].defaults;(s||n&&0<=n.indexOf(a)||!n&&c)&&(o.data[a]=e[a],o.fields.push(a),o.allWidth+=e[a].width)}return o},_countFields:function(){var t=this.options.data,e=0,i=0,n=0;for(var o in t)t.hasOwnProperty(o)&&(e++,t[o].required&&i++,t[o].defaults&&n++);return{count:e,requiredCount:i,defaultsCount:n}},_initItemEvent:function(){var t=this.options,e=this._countFields(),i=t.maxLimit||e.count,n=u("#customizeColumn :checked").length;n<i?u("#customizeColumn :checkbox").not(".required").attr("disabled",!1).siblings("label").removeAttr("data-title"):u("#customizeColumn :checkbox").not(":checked").attr("disabled",!0).siblings("label").attr("data-title","最多勾选"+i+"个字段，已勾选"+n+"个"),u("#limitTip").html("，最多勾选"+i+"个字段，已勾选"+n+"个。")}},i.exports=n}),define("widget/fieldsManager/gridView",function(t,e,i){var r=t("widget/fieldsManager/fieldsManager"),n=t("$"),l=function(e,t){var i=(t=t||this.colums).map(function(t){return-1<e.fields.indexOf(t.key)?t.hide=!1:t.hide=!0,t});this.setColums(i),n(document).trigger("updateColumByField")},o={1:"100%",2:"48%",3:"32%"};i.exports=function(a,e,s,c){return{$afterInit:function(){var t=this;t.$watch("colums.length",function(){t.buildFieldsManager()},!0),n(e).click(function(){t.showFieldsManager()})},buildFieldsManager:function(t){var e,i=this,n=i.$get("colums"),o=(e={},n.forEach(function(t){t.hide||0==t.selected||(t.defaults=!0),e[t.key]=t}),e);i.fm=new r({data:o,cacheKey:t||a,eachColNum:s,maxLimit:c,callback:function(t){l.call(i,t,n)}}),l.call(i,i.fm.getDisplayFields(),n)},showFieldsManager:function(t){var e=this.fm.showDialog();!t&&n(e).find("ul.list-mod").width(o[Math.ceil(this.$get("colums").length/6)])}}}}),define("widget/form/Checkbox",function(t,e,i){var n=t("qccomponent"),o=n.extend({$tpl:'    <label b-attr="attr" b-on="$event" title="{{loading ? (checked ? checkingText : uncheckingText) : (checked ? checkedText : uncheckedText)}}" class="tc-15-switch {{checked ? \'tc-15-switch-checked\' : \'\'}} {{loading ? \'indeterminate\' : \'\'}}" title="{{title}}">        <input type="checkbox" class="tc-15-switch-input" b-model="checked" disabled?="disabled">        <span class="tc-15-switch-helper">{{checked ? checkedText : uncheckedText}}</span>    </label>',$valuekey:"checked"},{defaults:{disabled:!1,loading:!1,checkedText:"已开启",uncheckedText:"已关闭",checkingText:"开启中",uncheckingText:"关闭中"}});n.tag("qc-checkbox",o),i.exports=o}),define("widget/form/NumberStepInput",function(t,e,i){var n=t("qccomponent"),o=n.extend({$tpl:'    <span class="tc-15-input-num {{extraClass}}">        <style>            input::-webkit-outer-spin-button,            input::-webkit-inner-spin-button {                -webkit-appearance: none !important;            }            input[type="number"]{                -moz-appearance:textfield;            }        </style>        <span class="minus {{disableMinus ? \'disabled\' : \' \'}}" tabindex="0" role="button" b-on-click="minus()">-</span>        <input type="number" class="num" b-ref="input" b-on="{change: inputChange.bind(this), keyup: inputKeyup.bind(this)}" style="">        <span class="plus {{disablePlus ? \'disabled\' : \' \'}}" tabindex="0" role="button" b-on-click="plus()">+</span>{{unit}}    </span>',$afterInit:function(){var t=this;t.$set({val:Number(t.initVal),min:Number(t.min),max:Number(t.max)}),t.$set("val",Number(t.initVal)),t.$refs.input.value=t.val,t.checkButtonState(),t.$watch("[step, min, limitMin, max, limitMax, val]",t.checkButtonState.bind(t))},$valuekey:"val",inputChange:function(t){var e=t.target.value;this.limitMin&&e<this.min&&(e=this.min),this.limitMax&&e>this.max&&(e=this.max),t.target.value=Number(e),this.$set("val",Number(e))},inputKeyup:function(t){},minus:function(){this.disableMinus||(this.$set("val",this.val-this.step),this.$refs.input.value=this.val)},plus:function(){this.disablePlus||(this.$set("val",this.val+this.step),this.$refs.input.value=this.val)},checkButtonState:function(){this.$set({disableMinus:this.limitMin&&this.val-this.step<this.min,disablePlus:this.limitMax&&this.val+this.step>this.max})}},{defaults:{initVal:1,step:1,min:1,limitMin:!0,limitMax:!1,extraClass:"m",unit:"台"}});n.tag("qc-number-step",o),i.exports=o}),define("widget/grid/Action",function(t,e,i){var n,o=t("qccomponent"),a="_clickHooker";(n=i.exports=o.extend({constructor:function(t,e){var i;e=e||t,t='    <a b-if="!hidden" href="#" data-role="{{!disabled && act}}" class="oper-item {{disabled ? \'disable\' : \'\'}}" data-title="{{title}}">{{text}}</a>',(i=e.$data||{}).menu?t='    <div b-if="!hidden" class="tc-15-dropdown {{expanded ? \'tc-15-menu-active\' : \'\'}} {{up ? \'tc-15-dropup\' : \'\'}}" data-cell-action-menu>        <a href="javascript:;" class="tc-15-dropdown-link" b-on="{click:expand}">{{text || \'更多\'}}<i class="caret"></i></a>        <ul b-if="expanded" class="tc-15-dropdown-menu">            <div b-template b-repeat="action in menu">                <li role="presentation"><cell-action b-with="action"></cell-action></li>            </div>        </ul>    </div>':"separator"===i.type&&(t='    <i class="black-seperate-line-icon" role="separator"></i>'),e.$tpl=t,n.__super__.constructor.call(this,e)},expand:function(t){var e=this,i=$(document),n=$(t.currentTarget),o=e[a];e.expanded||(e.$set("expanded",!0),o||(o=e[a]={handler:function(){e.$set("expanded",!1),o.destroy()},hook:function(){i.on("click",o.handler)},destroy:function(){i.off("click",o.handler)}}),setTimeout(function(){n.blur(),o.hook()},1))},collapse:function(){var t=this[a];this.expanded&&t&&t.handler()}})).tag("cell-action",n);var s=".tc-15-dropdown.tc-15-menu-active[data-cell-action-menu]";n.isMenuActivated=function(t){var e=(t=$(t||document.body)).find(s);return e.length&&e.is(":visible")},n.hideMenu=function(t){(t=$(t||document.body)).find(s).each(function(t,e){var i=e.bee;i&&i.collapse()})}}),define("widget/grid/LocalGrid",function(t,e,i){var o=t("qccomponent").getComponent("grid-view"),n=t("./Action"),a=t("appUtil"),s="_bufferReloadHandler",c="_lastMouseDownPosition";(i.exports=o.extend({renameIconHtml:' <i b-if="!item.$disabled && !item.$loading" class="pencil-icon hover-icon" data-role="rename" data-title="编辑"></i>',events:{"click [data-grid-body] tr [data-role]":function(t){var e,i,n=$(t.currentTarget).attr("data-role")||"",o="onRow"+n.charAt(0).toUpperCase()+n.slice(1),a=this;(a[o]||a.handleAction)&&(e=a.findRowIndex(t),!(i=a.list[e])||!a.actionOnDisabled&&i.$disable||(a.handleAction?a.handleAction(n,i,e,t):a[o](i,e,t))),t.preventDefault()},"mousedown [data-grid-body] tr":function(t){this[c]={x:t.pageX,y:t.pageY}},"click [data-grid-body] tr":function(t){var e,i,n=this,o=n[c];n[c]=null,o&&(5<Math.abs(o.x-t.pageX)||5<Math.abs(o.y-t.pageY))||!n.onRowClick&&!n.handleAction||$(t.target).closest("tr [data-role]").length||(e=n.findRowIndex(t),!(i=n.list[e])||!n.actionOnDisabled&&i.$disable||(n.handleAction?n.handleAction("click",i,e,t):n.onRowClick(i,e,t)))}},listFn:function(t,e){var i=this,n=Object.keys(t||{});if(2===n.length&&"orderField"in t&&"order"in t)return i.outerSorting?void i.$set({pendingOrderField:t.orderField,pendingOrder:t.order}):(i.$set(t),void i.$set("list",i.localSort(i.list,t.orderField,t.order)));i.outerPaging&&2===n.length&&"page"in t&&"count"in t?i.$set({pendingPage:t.page,pendingCount:t.count}):o.prototype.listFn.apply(this,arguments)},bufferReload:function(t,e){var i=this,n=i[s];n||(n=i[s]=a.bufferFn(function(t){i.setData({totalNum:0,searchKey:"",list:[]}),i.listFn(t),i.bufferOpt=null})),t&&(t=$.extend(i.bufferOpt||(i.bufferOpt={}),t)),n(t)},findRowIndex:function(t){return $(t.currentTarget).closest("tr").attr("data-index")},findRowData:function(t){var e=this.findRowIndex(t);return this.list[e]},updateRowData:function(n,i){var o,t,a=this.list;o=$.isFunction(n)?n:(t=Object.keys(n),function(e){var i=!0;return t.forEach(function(t){e[t]!==n[t]&&(i=!1)}),i}),a&&a.length&&a.forEach(function(t,e){o(t)&&a.$set(e,i)})},getActions:function(t,e,i){},localSort:function(t,o,a){var e;return o?(e="function"==typeof o?o:function(t,e){var i,n;return i=t[o],n=e[o],void 0===i?1:void 0===n?-1:(n=isNaN(i)?(i=i.toLowerCase(),n.toLowerCase()):(i=parseFloat(i),parseFloat(n)),a?i<n?-1:1:i<n?1:-1)},t.sort(e)):t}},{defaults:{ACTION_TD:'    <div class="oper-cell">        <div b-template b-repeat="action in getActions(item, $parent.$index, $parent.$parent.list.length)">            <cell-action b-with="action"></cell-action>        </div>    </div>',page:1,count:20,hasFirst:!1,initGetData:!1,outerSorting:!1,outerPaging:!0,actionOnDisabled:!1}})).tag("cell-action",n)}),define("widget/i18n",function(t,n,e){var i,o,a,s=t("qccomponent"),c=t("manager"),r=t("constants");n.isI18n=function(){return i||(i=new Promise(function(e,t){c.getUserAreaInfo(function(t){e(t&&2==+t.area)},t)})),i},n.then=function(t,e){return n.isI18n().then(t,e)},n.notI18n=function(){return n.then(function(t){return!t})},n.syncThen=(n.then(function(t){o=!0,a=t}),function(t){return t&&o?Promise.resolve(t(a)):n.then(t)});var l={symbol:["¥{money}","${money}"],code:["{money} CNY","{money} USD"],words:["{money}元","{money}美元"]},d=["CNY","USD"];n.getCurrency=function(t){return t&&0<=d.indexOf(t)?Promise.resolve(t):n.then(function(t){return t?"USD":"CNY"})},n.toI18nMoney=function(e,i,t){return n.getCurrency(t).then(function(t){return(l[i]||l.symbol)[d.indexOf(t)].replace("{money}",e)})},n.getBeeConfig=function(){return{isI18n:n.isI18n,notI18n:n.notI18n,getCurrency:n.getCurrency,toI18nMoney:n.toI18nMoney}},n.bindBee=function(e){e.$set(n.getBeeConfig()),n.then(function(t){e.$set("i18n",t)})},s.tag("money",s.extend({$tpl:"<span>{{toI18nMoney(value, format, currency)}}</span>",toI18nMoney:n.toI18nMoney})),s.tag("i18n-show",s.extend({$tpl:'<span><div b-template b-if="isI18n()">{{>$content}}</div></span>'},{defaults:{isI18n:n.isI18n}})),s.tag("i18n-hide",s.extend({$tpl:'<span><div b-template b-if="notI18n()">{{>$content}}</div></span>'},{defaults:{notI18n:n.notI18n}})),n.then(function(t){t&&Object.keys(r.EIP_REGION_PRICE).forEach(function(t){var e=r.EIP_REGION_PRICE[t];e.price=(parseFloat(e.price)/6.9).toFixed(4)})})}),define("widget/login/login",function(e,t,i){var S=e("$"),_=e("net"),T=e("util"),D=e("appUtil"),n=e("event"),a=e("dialog"),L=(e("router"),e("pageManager")),o=e("constants"),s=e("insight");var c=function m(){if(!window.localStorage)return!1;try{return!(window.localStorage.isPrivate=!1)}catch(t){return!1}}()?window.localStorage:{getItem:function(){},setItem:function(){}},r="//"+QCMAIN_HOST+"/login?s_url=",l="//"+QCMAIN_HOST+"/register/completion?s_url=",d=function(){return new Promise(function(t,e){var i=window.qcLoginSdkUrl||"https://cloud.tencent.com/qccomponent/login/api.js";window.seajs&&window.seajs.use(i,function(){t(window.QCLogin)})})},u=T.cookie.get("language");d();var p={_uin:"",_nick:"",isVisible:!1,isLoggedOut:!1,init:function(t,e){this.echoObj=t,this.setUin(this.getRealUin()),this.echo(),this.isLogin()&&this.checkLogin(null,function(){e&&e()}),this.bindEvent()},echo:function(t){this.isLogin()?this.echoObj.html(T.tmpl('<div class="qc-user-inner"><i class="qc-user-icon"></i><span class="qc-user-name"  data-hot="header.user.center" title="<%=name%>"><%=name%></span><i class="qc-nav-arrows"></i><div class="qc-user-info qc-user-panel"><div class="qc-user-panel-inner J-dropdownPanel"></div></div></div>',{name:this.getDisplayName()})):this.gotoLoginUrl()},gotoLoginUrl:function(){var t;location.href=(t=location.href,r+encodeURIComponent(t))},isLogin:function(){return!!this.getUin()},getRealUin:function(){return parseInt(T.cookie.get("uin").replace(/\D/g,""),10)},getUin:function(){return this._uin||this.getRealUin()},setUin:function(t){this._uin=t},getNick:function(){return this._nick||decodeURIComponent(T.cookie.get("nick"))},setNick:function(t){this._nick=t},getDisplayName:function(){return this._displayName||c.getItem("lastDisplayName")||""},setDisplayName:function(t){(this._displayName=t)&&c.setItem("lastDisplayName",t)},show:function(e){this.isVisible||this.isUnloading||this.ACCOUNT_HAS_CHANGED||(this.isVisible=!0,this.clearSession(),d().then(function(t){D.isI18n()?location.href="https://intl.cloud.tencent.com/login?s_url="+encodeURIComponent(location.href):t.showLoginBox(S.extend({hide_close_icon:1},e))}),S(document).trigger("logout"))},clearSession:function(){T.cookie.del("skey"),T.cookie.del("p_skey"),T.cookie.del("nodesess","console.qcloud.com"),T.setACSRFToken("")},checkLogin:function(x,k){var $=this,t=!!x;e.async("manager",function(I){I.checkLogin(function(t){if(t){var e=t.userInfo||{},i=t.ownerInfo||{},n=(t.systemTime||(new Date).getTime())-(new Date).getTime(),o=e.nick,a=e.displayName||o,s=e.permProjects,c=e.isShowAllProject,r=e.canManageCloudResource,l=e.globalManageFinancePerm,d=e.globalManageResourcePerm,u=e.globalManageHumanResourcePerm,p=e.isOwner,f=e.isProjectUser,h=e.isAgent,m=e.isAgentClient,g=e.isSpread,v=t.qcloudAppId,b="3"==i.cur_devcheck_state,y=b&&"8"==i.authDetail.authType,C=p||u||e.collUserInfo.permList.some(function(t){return t&&"MANAGE_FINANCE"===t.opName});if(!$.checkI18NVersion(e.areaInfo,i.msgLang))return;$.setNick(o),$.setDisplayName(a),T.cookie.set("nick",encodeURIComponent(o)),T.cookie.set("appid",v),T.cookie.set("moduleId",v),T.cookie.set("ownerUin",e.ownerUin),T.cookie.set("systemTimeGap",n);var w=T.cookie.get("ownerUin");w&&!/^O.*G$/.test(w)&&T.cookie.set("ownerUin","O"+w+"G"),_.setLandingOwnerUin(T.getOwnerUin()),D.setManagePerm(r),D.setVerified(b),D.setVerifiedOverseas(y),D.setComData({hasFinancePerm:C,projects:s,isShowAllProject:c,canManageCloudResource:r,globalManageFinancePerm:l,globalManageResourcePerm:d,globalManageHumanResourcePerm:u,isOwner:p,isProjectUser:f,isAgent:h,isAgentClient:m,isSpread:g,ownerUin:e.ownerUin,userInfo:e,ownerInfo:i,ownerUin:e.ownerUin,appId:v,systemClientTimeGap:n}),S(document).trigger("login_data_inited"),I.getAllWhiteList(function(){!1===D.getManagePerm()&&D.setNoPermHtml(),!1===D.isVerified()&&D.setUnverifiedHtml(),!0===D.isVerifiedOverseas()&&D.setVerifiedOverseasHtml()}),I.getUserAreaInfo(function(t){t&&2==t.area&&(D.setI18n(!0),L.checkRoutesI18n())})}$.echo(),k&&k(),S(document).trigger("login-ready"),x&&!k&&location.reload()},function(t){$.checkLoginFail(t,x)},t)})},checkI18NVersion:function(t,e){if(t&&2==t.area){if(!o.INTL_AVAILABLE_LANG[u])return T.cookie.set("language","en"),location.reload(),!1}else if(!o.CN_AVAILABLE_LANG[u])return T.cookie.set("language","zh"),location.reload(),!1;return T.cookie.set("intl",t?t.area:1,null,null,720),!0},checkLoginFail:function(t,e){var i;12==t.code||44==t.code?location.href=(i=location.href,l+encodeURIComponent(i)):99981==t.code||(e?L.renderOops():!function(t){for(var e=[7,9,21,49,50];e.length;)if(t==e.shift())return!0;return!1}(t.code)?L._renderErrorPage("userInfoError"):this.show())},logout:function(t){this.isLoggedOut||(this.isLoggedOut=!0,e.async("manager",function(t){t.quitLogin()}),T.cookie.del("uin"),T.cookie.del("luin"),T.cookie.del("skey"),T.cookie.del("p_skey"),T.cookie.del("nick"),T.cookie.del("regionId"),T.cookie.del("projectId"),T.cookie.del("appid"),T.cookie.del("nodesess","console.qcloud.com"),T.cookie.del("refreshSession"),T.setACSRFToken(""),this.setUin(""),this.setNick(""),e.async("main/api",function(t){t.logoutInner()}),S(document).trigger("logout"),d().then(function(t){t.logout()}),t||(this.isUnloading=!0,this.gotoLoginUrl()))},bindEvent:function(){var o=this;n.addCommonEvent("click",{logout:function(){o.logout()}}),S(window).off("update_project_data").on("update_project_data",function(){o.isLogin()&&o.checkLogin(null)}),S(document).on("accountChanged",function(t,n){o.ACCOUNT_HAS_CHANGED||(o.ACCOUNT_HAS_CHANGED=!0,d().then(function(i){setTimeout(function(){try{i.hideLoginBox()}catch(e){}var t="当前页面登录账号已经发生变化，如果您在其他页面已经登录另一腾讯云账号，刷新页面会使用另一账号登录，如果您在其他页面退出登录，刷新页面后需要您重新登录。";n==o.ERR_OWNER_HAS_CHANGED&&(t="当前页面账号身份已经发生变化，如果您在其他页面切换了账号身份，刷新页面会使用新的账号身份，如果您的登录状态已过期，刷新页面后需要您重新登录。"),a.create(t,"460",null,{title:"登录账号变更提示",struct:"rich",closeIcon:!1,isMaskClickHide:!1,button:{"刷新页面":function(){location.reload()},"登录其他账号":function(){var t="https://"+QCMAIN_HOST+"/login?s_url="+encodeURIComponent(location.href);location.href=t}},defaultCancelBtn:!1,buttonHighlight:[1,0]})},1500)}))}),S(window).on("beforeunload",function(){self.ACCOUNT_HAS_CHANGED=!0})},ERR_SESSION_HAS_CHANGED:-8,ERR_OWNER_HAS_CHANGED:-9},f=s.register("login-show",{level:s.EventLevel.Warn});p.show=s.watch(p.show,f,function(t,e){return p.isVisible?null:S.extend({message:"登录框被调用",options:t&&JSON.stringify(t),cookie:document.cookie},e)});var h=s.register("logout",{level:s.EventLevel.Info});p.logout=s.watch(p.logout,h,function(t){return p.isLoggedOut?null:{message:"登录框 logout 方法被调用",cookie:document.cookie,silent:t}}),i.exports=p}),define("widget/market/updatedealstatus",function(t,e,i){var n=t("$"),o=t("dialog"),a=t("tips"),s=t("util"),c=(t("validator"),t("models/market")),r="请根据实际情况填写实施完成的相关信息，如账号密码、授权license、其它变动等，最多能输入300个字符",l='    <div class="dialog_layer_cont">        <div class="whitelist">            <div class="list-wrap clearfix">                <textarea id="deal_remarks" placeholder="请根据实际情况填写实施完成的相关信息，如账号密码、授权license、其它变动等，最多能输入300个字符" style="width: 434px;"></textarea>            </div>        </div>    </div>',d={showSetCompleteDialog:function(t){var e=this,i={dealName:t.dealName||"",status:t.status||0,callback:t.succCallback};o.create(s.tmpl(l),"550","",{title:"完成反馈",preventResubmit:!0,button:{"确定实施完成":function(){e.setDealComplete(i)}}}),this.checkPlaceholderSupport()||o.el.find("#deal_remarks").val(r),e.bindEvent()},showSetDealProcessingDialog:function(t){o.confirm("确认开始实施吗？",function(){c.request({name:"setServiceStatus",data:{dealName:t.dealName||"",status:t.status||0},success:function(){a.success("操作成功"),t.succCallback&&t.succCallback()}})},null,"提示",400,"")},setDealComplete:function(e){var t=o.el.find("#deal_remarks"),i=t.val();if(i==r&&(i=""),300<i.length)return a.error("长度不能超过300个字符"),t.focus(),void(o.el&&o.el.find(".btn_unclick").removeClass("btn_unclick"));c.request({name:"setServiceStatus",data:{dealName:e.dealName||"",status:e.status||0,dealRemarks:i},success:function(t){a.success("操作成功"),e.callback&&e.callback(i,t),o.hide()}})},bindEvent:function(){this.checkPlaceholderSupport()||o.el.find("#deal_remarks").blur(function(){""==n(this).val()&&n(this).val(r)}).focus(function(){n(this).val()==r&&n(this).val("")})},checkPlaceholderSupport:function(){return"placeholder"in document.createElement("input")}};i.exports=d}),define("widget/monacoEditor/monacoEditor",function(t,e,i){var n=t("qccomponent"),s=t("$"),c='<iframe src="//{{cdnHost}}/qcloud/app/qcconsole_web/vs/index.html" id="{{iframeId}}" b-ref="iframe" frameborder="0" name="zh-cn"  width="100%" height="100%"></iframe>',r='<div><style type="text/css">.ie-editor{    margin-left: 20px;    max-width: 780px;    max-height: 300px;    width: 780px;    height: 300px;    overflow: auto;    border: none;    outline: none;    resize: none;    background-color: #fff;}.readonly .ie-editor{    background-color:#f2f2f2;    cursor: not-allow}</style><textarea class="ie-editor" disabled?="disabled" b-ref="txt" b-model="value"></textarea></div>';function o(t,o){if(t.containerId&&t.ORIGINS&&t.ORIGINS.length&&t.ACTIONS&&t.language){this.isSupportWorker="function"==typeof window.Worker&&!t.debug,this.options=s.extend({},{language:"",containerId:null,ORIGINS:[],ACTIONS:{}},t);var a=this,e=this.isSupportWorker?c:r,i=n.extend({});this.bee=new i(e,{cdnHost:QCCDN_HOST,iframeId:"iframe-editor-"+(new Date).getTime(),value:a.options.value}),this.render(),this.isSupportWorker?(this.editorFrameWindow=this.bee.$refs.iframe.$el.contentWindow,s(window).off("message.cam").on("message.cam",function(t){var e=t.data||t.originalEvent.data,i=t.origin||t.originalEvent.origin,n=e.action;if(a.options.ORIGINS.some(function(t){return t===i})&&e.data){if("documentReady"===n)return a.setDefaultOptions(),void(o&&o());"updateValue"===n&&a.updateValue(e.data),"updateOptions"===n&&a.updateOptions(),a.options.ACTIONS[n]&&a.options.ACTIONS[n](e)}})):(this.bee.$set("disabled",this.options.readOnly),o&&o())}}o.prototype={render:function(){s("#"+this.options.containerId).html(this.bee.$el)},getIframe:function(){return this.isSupportWorker?this.bee.$refs.iframe:null},updateOptions:function(t){this.isSupportWorker&&this.editorFrameWindow.postMessage({action:"updateOptions",data:{options:t}},"*")},setDefaultOptions:function(){this.editorFrameWindow.postMessage({action:"setDefaultOptions",data:{readOnly:this.options.readOnly,language:this.options.language,value:this.options.value,schema:this.options.schema}},"*")},setReadOnlyStatus:function(t){this.isSupportWorker?this.editorFrameWindow.postMessage({action:"setReadOnlyStatus",data:{readOnly:t}},"*"):this.bee.$set("disabled",t)},setModify:function(){this.setReadOnlyStatus(!1)},setReadOnly:function(){this.setReadOnlyStatus(!0)},updateValue:function(t){this.value=t.value,this.bee.$set("value",t.value)},getValue:function(){return this.bee.value?this.bee.value:this.options.value},setValue:function(t){this.isSupportWorker?this.editorFrameWindow.postMessage({action:"setValue",data:{value:t}},"*"):this.bee.$set("value",t)},destroy:function(){self.isSupportWorker&&s(this.bee.$refs.iframe.$el).remove()}},i.exports=o}),define("widget/msg/msg",function(t,e,i){var s=t("$"),n=t("util"),o=(t("event"),t("manager"),t("router"),t("tips")),a=t("models/message"),c=t("widget/operatelog/emitter"),r=t("./util"),l=t("appUtil"),d=t("models/api"),u='<div class="qc-tool-inner" id = "thisIsMsgCenter"><div class="qc-tool-head J-message-head"><h3 class="qc-tool-head-title">消息中心</h3><a class="qc-tool-more" href="/message" data-event="nav" data-hot="header.message.more">查看更多</a><a class="qc-tool-head-close J-closeMsgIcon"><i class="qc-close-panel"></i></a></div><div class="qc-tool-body J-message-body"><div class="qc-nav-message-list" id="message_list"><div class="qc-tool-info"><i class="log-loading-icon"></i>加载中</div></div></div></div>',p='<%for(var i=0,item; item=list[i]; i++){%><div class="qc-nav-message-inner" data-msgid="<%=item.msg_id%>"><div class="qc-nav-message-div"><span class="qc-nav-message-text"><%=item.category%></span><span class="qc-nav-message-time"><%=item._timedesc%></span></div><div class="qc-message-dd-hover J-messageRead" data-msgid="<%=item.msg_id%>"><a href="javascript:;">标记已读</a></div><a href="/message/detail/<%=item.msg_id%>" title="查看站内信详情"><%=item.titile%></a></div><%}%>',f={init:function(t){var e=this;t=t||{},e.$wrapEl=s(t.wrapEl);var i=s(u);e.$wrapEl.find(".J-dropdownPanel").append(i),e.$list=e.$wrapEl.find("#message_list"),e.on("refresh",function(){e.refresh()}),e.needRefreshList=!0,e.updateStatus(),e.on("showpopup",function(){e.needRefreshList&&(e.needRefreshList=!1,e.renderList(),e.updateStatus())}),e.bindEvent()},reset:function(){this.timerDelay=100},showPopup:function(){s("#topnav").trigger("header_right_tool_show"),this.$wrapEl.addClass("qc-nav-select"),this.emit("showpopup"),this.autoHeight()},hidePopup:function(){this.$wrapEl.removeClass("qc-nav-select")},bindEvent:function(){var i=this;i.$wrapEl.on("click",".J-headerMsgIcon",function(){i.$wrapEl.hasClass("qc-nav-select")?i.hidePopup():i.showPopup()}),i.$wrapEl.on("click",".J-closeMsgIcon",function(){i.hidePopup()}),i.$wrapEl.on("click",".J-messageRead",function(t){t.stopPropagation();var e=s(this);return i.markMsg(e),!1}),s(window).on("resize",l.throttle(function(){i.autoHeight()},250)),s("#topnav").on("header_right_tool_show",function(){i.hidePopup()})},refresh:function(){this.renderList(),this.updateStatus()},renderList:function(){var i=this;i.getList().then(function(t){if(0!=(t=t.slice(0,18)).length){i.decorateData(t);var e=n.tmpl(p,{list:t});i.$list.html(e)}else i.showEmpty()})},getList:function(){return d.request({serviceType:"message",cmd:"SearchSiteMsg",data:{category_id:"0",is_read:0,page:1,count:18,language:window.VERSION}},{secure:1}).then(function(t){var e=t&&t.data&&t.data.messages;return Array.isArray(e)?e:[]})},showEmpty:function(){this.$list.html('<div class="qc-tool-info">暂无未读消息</div>')},markMsg:function(e){var i=this,n=e.attr("data-msgid");n=parseInt(n,10),i.requestMesssageCgi("msgRead",{cids:[n]}).then(function(t){t&&-1==t.failed_msg.indexOf(n)?e.closest(".qc-nav-message-inner").fadeOut("slow",function(){e.remove(),i.refresh()}):o.error("消息标记已读失败")})},decorateData:function(t){t&&0!=t.length&&s.each(t,function(t,e){e._timedesc=r.getTimeDesc(e.time)})},requestMesssageCgi:function(t,e){e=e||{};var i=s.Deferred();return a.request({name:t,data:e,success:function(t){t?i.resolve(t):i.resolve(null)},fail:function(t){i.resolve(null)}}),i},updateStatus:function(){var i=this;i.requestMesssageCgi("getMsgSummary",{}).then(function(t){var e;t&&("undefined"!=typeof t.unread&&((e=i.$wrapEl.find(".J-headerMsgIcon em").eq(0)).text(99<t.unread?"99+":t.unread),t.unread?e.css("visibility","visible"):e.css("visibility","hidden")),i.needRefreshList=!0)})},autoHeight:function(){var t=s("#thisIsMsgCenter").find(".J-message-head").outerHeight(!0),e=s("#thisIsMsgCenter").find(".J-message-body"),i=parseInt(e.css("padding-top"))||0,n=parseInt(e.css("padding-bottom"))||0,o=this.$wrapEl.find(".J-dropdownPanel"),a=s(window).height()-50;o.height(a),e.height(a-i-n-t)},echo:function(t){this.updateStatus()}};c(f),i.exports=f}),define("widget/msg/util",function(t,e,i){var n={getTimeDesc:function(t){var e=/^(\d{4})-(\d{1,2})-(\d{1,2}) (\d{2}):(\d{2})(?::(\d{1,2}))?$/.exec(t);if(!e)return t;var i=1*e[1],n=1*e[2]-1,o=1*e[3],a=1*e[4],s=1*e[5],c=1*(e[6]||0),r=new Date(i,n,o,a,s,c),l=new Date,d=Math.round((l-r)/1e3);return 86400<d?t:3600<d?Math.round(d/3600)+"小时前":60<d?Math.round(d/60)+"分钟前":d+"秒前"}};i.exports=n}),define("widget/operatelog/config",function(t,e,i){i.exports={businessIdConstants:{CVM:1,IMAGE:3,CREATE_CVM:2},businessMap:{1:{name:"云主机"},3:{name:"镜像"}},statusMap:{0:{desc:"成功",textClassName:"finish-task"},1:{desc:"失败",textClassName:"unusual-task"},2:{desc:"处理中",textClassName:"loading-task"},"-99":{desc:"未知",textClassName:"loading-task"}},REGIONMAP_R:{gz:1,sh:4,hk:5,ca:6,shjr:7},businessCommandList:[{id:-1,label:"不限",commands:[{id:-1,code:"",label:"不限"}]},{id:1,label:"云主机",commands:[{id:-1,label:"不限"},{id:7,label:"开机"},{id:8,label:"关机"},{id:1,label:"重启"},{id:3,label:"重置密码"},{id:5,label:"重装系统"},{id:9,label:"配置调整"},{id:10,label:"关联密钥"},{id:17,label:"生产子机"},{id:18,label:"修改名称"},{id:19,label:"修改机器所属项目"},{id:21,label:"销毁子机"}]},{id:3,label:"镜像",commands:[{id:-1,label:"不限"},{id:4,label:"创建镜像"},{id:16,label:"删除镜像"}]},{id:4,label:"VPC",commands:[{id:-1,label:"不限"},{id:100,label:"新建私有网络"},{id:101,label:"删除私有网络"},{id:102,label:"修改私有网络"},{id:103,label:"新建子网"},{id:104,label:"删除子网"},{id:105,label:"修改子网"},{id:106,label:"修改子网关联路由表"},{id:107,label:"删除路由表"},{id:108,label:"修改路由表内容"},{id:109,label:"升级续费VPN网关"},{id:110,label:"修改vpn网关"},{id:111,label:"新建对端网关"},{id:112,label:"删除对端网关"},{id:113,label:"修改对端网关"},{id:5e3,label:"创建vpn通道"},{id:5001,label:"更新vpn通道"},{id:5002,label:"删除vpn通道"},{id:5003,label:"创建vpn网关"}]}],statusList:[{id:-1,label:"不限"},{id:0,label:"成功"},{id:1,label:"失败"},{id:2,label:"执行中"}]}}),define("widget/operatelog/emitter",function(t,e,i){function n(t){if(t)return function i(t){for(var e in n.prototype)t[e]=n.prototype[e];return t}(t)}n.prototype.on=n.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this},n.prototype.one=function(t,e){function i(){this.off(t,i),e.apply(this,arguments)}return i.fn=e,this.on(t,i),this},n.prototype.off=n.prototype.removeListener=n.prototype.removeAllListeners=n.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},0==arguments.length)return this._callbacks={},this;var i,n=this._callbacks["$"+t];if(!n)return this;if(1==arguments.length)return delete this._callbacks["$"+t],this;for(var o=0;o<n.length;o++)if((i=n[o])===e||i.fn===e){n.splice(o,1);break}return this},n.prototype.emit=function(t){this._callbacks=this._callbacks||{};var e=[].slice.call(arguments,1),i=this._callbacks["$"+t];if(i)for(var n=0,o=(i=i.slice(0)).length;n<o;++n)i[n].apply(this,e);return this},n.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]},n.prototype.hasListeners=function(t){return!!this.listeners(t).length},i.exports=n}),define("widget/operatelog/floattips",function(t,e,i){var o=t("$"),n=t("util"),a=t("./emitter"),s=t("./util"),c='<p class="tc-15-msg <%=className%>"><span class="tip-info"><i class="<%=iconClassName%>"></i><span class="msg-span"><%=msg%></span></span><a href="javascript:;" class="logs-btn-close _close" title="关闭"></a></p>',r={0:{text:"成功",className:"succeed",iconClassName:"m-success-icon"},1:{text:"失败",className:"error",iconClassName:"m-error-icon"},2:{text:"处理中",className:"warning",iconClassName:"m-restart-icon"}};function l(){this.$tipsContainer=null}s.inherit(l,a),o.extend(l.prototype,{init:function(t){t=t||{},this.$tipsContainer=t.$container},handleTaskArr:function(t){var i=this;this.$tipsContainer&&(t=t||[],o.each(t,function(t,e){i.showTaskTip(e)}))},showTaskTip:function(t){var e=r[t.status];if(e){var i=o.extend({},e);i.msg=t.command_desc+e.text,this.displayTip(i)}},displayTip:function(t){if(this.$tipsContainer){var e=n.tmpl(c,t),i=o(e);i.on("click","._close",function(t){i.fadeOut("normal",function(){i.remove()})}),i.hide(),this.$tipsContainer.append(i),i.fadeIn(),setTimeout(function(){i.fadeOut("normal",function(){i.remove()})},5e3)}},showNoticeTip:function(t,e){t=t||{},void 0===e&&(e=0);var i=r[e];if(i){var n=o.extend({},i);n.msg=t.msg+i.text,2==e&&t.msg&&t.msg.indexOf("中")==t.msg.length-1&&(n.msg=t.msg),this.displayTip(n)}},showTaskSuccessTip:function(t){this.showNoticeTip(t,0)},showTaskErrorTip:function(t){this.showNoticeTip(t,1)},showTaskProcessTip:function(t){this.showNoticeTip(t,2),this.emit("addtask",t)}}),i.exports=new l}),define("widget/operatelog/util",function(t,e,i){var c=t("./config"),n=t("appUtil"),o={inherit:function(t,e){var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t},throttle:function(t,e){return n.throttle(t,e)},debounce:function(t,e){var i,n,o=null,a=null;function s(){i=null,n=t.apply(a,o),o=a=null}return function(){return o=arguments,a=this,i&&clearTimeout(i),i=setTimeout(s,e),n}},getInstanceLink:function(t,e){return t._nolinktips=t.hover_tips,t.outlink},getInstanceLink_old:function(t,e){var i=c.businessIdConstants;return e.business_id==i.CVM?21==e.command?(t._nolinktips="该主机已销毁",""):17==e.command&&2==t.status?(t._nolinktips="正在生产中，暂时还不能查看",""):this.getDetailLink("cvm",t,e):e.business_id==i.IMAGE?16==e.command?(t._nolinktips="该镜像已删除",""):4==e.command&&0!==t.status?(2==t.status?t._nolinktips="镜像制作中":t._nolinktips="镜像制作失败",""):this.getDetailLink("image",t,e):e.business_id==i.CREATE_CVM?2==t.status?(t._nolinktips="正在生产中，暂时还不能查看",""):this.getDetailLink("cvm",t,e):(t._nolinktips="该对象暂时还不可用","javascript:;")},getDetailLink:function(t,e,i){var n="",o=e.instance_id,a=c.REGIONMAP_R[i.region];switch(t){case"cvm":if(/ins-/.test(o))n="/cvm/detail/"+a+"/"+o;else{n="/cvm/index?";var s=[];s.push("rid="+a),s.push("instanceId="+o),s.push("uuid="+o),n+=s.join("&")}break;case"image":n=/img-/.test(o)?"/cvm/image/detail/"+a+"/"+o:"/cvm/image"}return n}};i.exports=o}),define("widget/page/BeeRoute",function(t,e,i){var n="routeParams",o="_toHistoryTimer",r=t("router"),p=t("appUtil"),a=t("lib/Class"),s=t("pageManager"),c={beforeRender:function(i,n){return function(){var t=i.apply(this,arguments),e=n.apply(this,arguments);return t?e?$.when(t,e):t:e}},onRender:1,onDestroy:1,processBeeConfig:function(e,i){return function(){var t=e.apply(this,arguments);return i.call(this,t)||t}}},l={params:1};i.exports=a.extend({Bee:t("qccomponent"),cacheParams:!1,routeBase:"",params:{fromNav:{defaults:"",initial:"waiting"}},constructor:function(t){t&&this.mixin(t)},setParam:function(a,s){var t,e;"string"==typeof a&&(t=a,e=s,s=arguments[2],(a={})[t]=e),a=a||{},(s=s||{}).initial&&(delete this[n],s.replace=!0,s.silent=!0,s.history=!1);var i,c,r=this,l=r[n]||(r[n]={}),d=l,u={};s.replace?(i=Object.keys(l).concat(Object.keys(a)),d=r[n]={}):i=Object.keys(a),i.forEach(function(t){var e,i=l[t],n=a[t],o=r._getParamMeta(t);n!==undefined&&""!==n||(s.initial&&o.initial!==undefined?n=$.isFunction(o.initial)?o.initial():o.initial:o.defaults!==undefined&&(n=$.isFunction(o.defaults)?o.defaults():o.defaults)),o.formula&&(n=o.formula(n)),i!==n&&(!s.fromParam&&s.history===undefined&&o.history&&(s.history=!0),n===undefined?delete d[t]:d[t]=n,c=!0,s.fromBee||(u[t]=n),s.silent||(e="onParam"+p.capitalize(t),r[e]&&r[e](n,s)))}),r.bee&&r.bee.$set(u),c&&!1!==s.history&&(r.cacheParams?r._cacheParamsToHistory(d,!0!==s.history):r._paramsToHistory(d,!0!==s.history))},getParam:function(t){return this[n]&&this[n][t]},_eachParam:function(e){var i=this,t=i.params;Object.keys(t).forEach(function(t){e(t,i._getParamMeta(t))})},_getParamMeta:function(t){var e=this.params[t],i={route:t,defaults:undefined,formula:null};return"object"==typeof e?$.extend(i,e):i.defaults=e,i},_cacheParamsToHistory:function(t,e){var i=this;i[o]&&i[o].destroy();var n=setTimeout(function(){i._paramsToHistory(t,e)},100);i[o]={destroy:function(){clearTimeout(n)}}},_paramsToHistory:function(a,t){var s=[],c=encodeURIComponent;this._eachParam(function(t,e){var i,n,o=e.route;o&&(i=a[t],n=$.isFunction(e.defaults)?e.defaults():e.defaults,e.formula&&(i=e.formula(i),n=e.formula(n)),i===n&&!e.fixed||i===undefined||s.push(c(o)+"="+c(i)))}),r.navigate(this.routeBase+"?"+s.join("&"),undefined,t)},render:function(n){n=arguments[arguments.length-1]||{};var o=this,a={};if(o._eachParam(function(t,e){var i;e.route?(n.hasOwnProperty(e.route)&&(i=(i=n[e.route])?decodeURIComponent(i):""),a[t]=i):a[t]=o.getParam(t)}),o.setParam(a,{initial:!o.actived,fromParam:!0}),!o.actived){o.actived=!0,o.getParam("fromNav")&&o.setParam("fromNav","");var t=o.beforeRender(),e=function(){o.actived&&(o.Bee&&(o.bee=new o.Bee(o.getBeeConfig()),o.$el=$(o.bee.$el).appendTo(s.appArea.html("")),o._eachParam(function(t,e){o.bee.$watch(t,function(){o.setParam(t,this[t],{fromBee:!0})})})),o.onRender())};t?t.done(e):e()}},beforeRender:$.noop,onRender:$.noop,getBeeConfig:function(){var i=this,n={};return i._eachParam(function(t,e){n[t]=i.getParam(t)}),i.processBeeConfig({$data:n,actionHandler:function(){i.handleAction(this.name,this)}})},handleAction:function(t,e){var i="onAction"+p.capitalize(t),n=[].slice.call(arguments,1);this[i]&&this[i].apply(this,n)},processBeeConfig:function(t){return t},_isInnerRoute:function(){return 0===r.fragment.indexOf(this.routeBase)&&!/[?&]fromNav([=&#]|$)/.test(r.fragment)},destroy:function(){this._isInnerRoute()||(this.actived=!1,this._destroy("bee",o),this.onDestroy())},onDestroy:$.noop,_destroy:function(){var t,e,i;for(t=0;t<arguments.length;t++)(i=this[e=arguments[t]])&&(i.destroy?i.destroy():i.$destroy?i.$destroy():i.remove&&i.remove(),this[e]=null)},extend:function(t){return $.extend({},this,t)},mixin:function(n){var t,o=this;return Object.keys(n).forEach(function(t){var e,i=n[t];o[t]=t in c?(e=c[t],$.isFunction(e)||(e=p.afterFn),e(o[t],i)):t in l?$.extend({},o[t],i):i}),1<arguments.length?(t=[].slice.call(arguments,1),o.mixin.apply(o,t)):o}})}),define("widget/page/DetailPanel",function(t,e,i){var n=t("qccomponent"),o=t("appUtil"),s="_loadToken",a="_completeToken",c=i.exports=n.extend({$valuekey:"id",$beforeInit:function(){var e=this;c.__super__.$beforeInit.apply(e,arguments),e.$watch(e.composedIdExpression,function(t){e.isComposedIdAvailable(t)?(e.$set("notValid",!1),e.$set("composedId",t)):e.$set("notValid",!0)},!0),e.$watch("composedId",e.bufferReload=o.bufferFn(function(t){(t=t||e.composedId)&&e._assureDataLoad().done(function(){e.data&&!e.notFound&&e._assureDataCompleted()})},100),!0),e.initCallback&&e.initCallback(e)},_assureDataLoad:function(){var n=this,t=n.composedId,o=$.Deferred();if(o.then(function(){n.$set({loading:!1})}),!n.isComposedIdAvailable(t))return o.reject();if(n.$set("notFound",!1),n.isDataMatch(t,n.data))return o.resolve();n.$set({loading:!0,data:{}});var a=n[s]={};return $.when(n.getData(t),n.getItemProcessor(t)).done(function(t,e){if(n[s]===a){var i=t;e&&i&&(i=e(i)),n.$set({notFound:!t,data:i}),o.resolve()}}).fail(o.reject).always(function(){n.$set("loading",!1)}),o},_assureDataCompleted:function(){var e=this,t=e.composedId,i=e.data,n=e[a]={};if(e.isNeedComplete(t,i)){var o=e.getItemCompleter(t,[i],1);o&&o.then(function(t){t(i,function(t){e[a]===n&&e.update(t)})})}},update:function(e){var i=this;Object.keys(e).forEach(function(t){i.$set("data."+t,e[t])}),i.updateCallback&&i.updateCallback(e)},loadData:function(t){},getData:function(t){return this.loadData(t)},getItemProcessor:function(t){return $.Deferred().resolve()},prepareItemCompleter:function(t){},getItemCompleter:function(t,e,i){var n=this.prepareItemCompleter(t);if(n)return n(e,i).then(function(i){return function(t,e){e(i(t))}})},isComposedIdAvailable:function(t){return t.regionId&&t.id},isDataMatch:function(t,e){return t.id===e[this.detailId||this.idProperty]},isNeedComplete:function(t,e){return!0},$beforeDestroy:function(){this[s]=this[a]=null,c.__super__.$beforeDestroy.apply(this,arguments)}},{defaults:{composedIdExpression:"{regionId:regionId, id:id}",idProperty:"id",detailId:"",loading:!0,notValid:!1}})}),define("widget/page/makeAsyncDialogButton",function(t,e,i){var a=t("dialog"),s=function(){a.hide()},c=function(t){a.freeze(!1).toggleBtnLoading(!1,t).toggleBtnDisable(!1,t)};i.exports=function(e){return Object.keys(e).forEach(function(t,n){var o=e[t];e[t]=function(t){var e=o.apply(this,arguments);if(!0!==e){var i=!1;if(e&&e.then)return e.then(function(){i=!0},function(){i=!0}),i||a.freeze(!0).toggleBtnLoading(!0,n),void e.then(s,function(){c(n)});c(n)}else s()}}),e}}),define("widget/page/mixins/grid",function(t,e,i){var n=t("widget/popover/BeeConfirm").extend({defaults:{confirmKey:"确定"}}),c=t("appUtil"),o=t("widget/alg/Locks"),r="_bufferReload",l="_bufferRefreshHeight",a="_refreshing",s="_refreshLocks",d="_loadToken",u={keyword:"searchKey"};t("widget/cam/cam");i.exports={basicGridFields:["page","count","orderField","order"],gridFields:["keyword"],watchFields:["regionId"],refreshInterval:1e4,idProperty:"id",nameProperty:"name",params:{page:{defaults:1,formula:function(t){return+t||1}},count:{defaults:20,formula:function(t){return+t||20}},order:{defaults:0,formula:function(t){return+t||0}},orderField:{defaults:""},keyword:""},onRender:function(){var t=this,e=t.bee,i=e.$refs,n=t.grid=i.grid,o=function(){t.bufferReload()};[].concat(t.basicGridFields,t.gridFields).forEach(function(t){c.beeBindBoth(e,n,t,"pending"+c.capitalize(t))}),[].concat(t.basicGridFields,t.gridFields,t.watchFields).forEach(function(t){e.$watch(t,o)}),[].concat(t.gridFields,t.watchFields).forEach(function(t){e.$watch(t,function(){e.$set("page",1)})}),o()},processBeeConfig:function(t){var e=this;return t.$data.gridCfg={backList:function(){this.$set({searchKey:"",pendingKeyword:""})},handleAction:function(){e.handleGridAction.apply(e,arguments)}},t},onDestroy:function(){this._destroy(d,r,l,a,s)},setRefreshing:function(t,e){var i=this,n=i.grid;i.actived&&(t?(i[a]&&!e||(i[a]&&i[a].destroy(),i[a]=c.bufferFn(function(){0<n.selectedNum||i.getRefreshingLocks().isLocked()?i[a]():i.bufferReload(!0)},e||i.refreshInterval,function(t){var e=new Date((new Date).getTime()+t);i.bee&&i.bee.$set("refreshingTime",e)})),i[a]()):i[a]&&i[a].destroy())},getRefreshingLocks:function(){var i=this,t=i[s];return t||((t=i[s]=new o).onChange=function(t){var e=i.bee;e&&e.$set("refreshingLocked",t)}),t},getData:function(){},setData:function(e){var i=this.bee;[].concat(this.basicGridFields,this.gridFields).forEach(function(t){e[u[t]||t]=i[t]}),i.$refs.grid.setData(e)},getItemProcessor:function(t){return $.Deferred().resolve(function(t){return t})},prepareItemCompleter:function(t){},getItemCompleter:function(t,e,i){var n=this.prepareItemCompleter(t);if(n)return n(e,i).then(function(i){return function(t,e){e(i(t))}})},bufferReload:function(t){var a=this,s=a.bee,e=s.$refs;a[r]||(a[l]=c.bufferFn(function(){a.grid.setMaxHeight()}),a[r]=c.bufferFn(function(t){var n=e.grid,o=a[d]={};t||(n.$set({list:[]}),n.showLoading("加载中...")),$.when(a.getData().fail(n.errorCallback.bind(n)).done(n.dataCallback.bind(n)),a.getItemProcessor(s)).done(function(t,e){if(o===a[d]&&a.actived){e&&(t.list=t.list.map(e)),a.setData(t);var i=a.getItemCompleter(s,t.list,t.totalNum);i&&i.then(function(i){t.list.forEach(function(t,e){i(t,function(t){o===a[d]&&a.actived&&(n.updateItem(e,t),a[l]())})})})}}).always(function(){o===a[d]&&a.actived&&(t||n.hideLoading())})})),a[r](t)},handleGridAction:function(t,e){var i="onGrid"+c.capitalize(t),n=[].slice.call(arguments,1);this[i]&&this[i].apply(this,n)},onActionColumns:function(){this.bee.$refs.grid.showFieldsManager()},onActionSearch:function(t){this.bee.$set("keyword",$.trim(t.keyword))},confirm:function(t,e){this.bee.$refs.grid||this.grid;var i=$.Deferred();return new n({handler:e&&e.target||t.attachEl,$data:t,onConfirm:function(){i.resolve()},onCancel:function(){i.reject()}}),i}}}),define("widget/pagination/pagination",function(t,e,i){var c=t("$"),r=t("util"),n=function(t){return this.options=c.extend({},{renderTo:null,page:1,perPageCount:20,totalNum:0,listFun:null},t),this.show(),this};n.prototype={show:function(){var t=this.options,e={},i=t.page,n=t.perPageCount,o=t.totalNum,a=c(t.renderTo);e.currentPage=i,e.totalPage=parseInt((o+n-1)/n);var s=r.tmpl('    <% if (totalNum > 0) { %>      <div class="tc-page-simple col2-main-page" data-cp="<%- info.currentPage %>">        <span class="indent">共<%- totalNum %>条</span>        <span class="indent"><%- info.currentPage %>/<%- info.totalPage %>页</span>        <a href="javascript:void(0);" title="第一页" class="tc-page-first<% if (info.currentPage === 1 || info.currentPage > info.totalPage) { %> disable<% } %>" data-role="first_page"></a><a href="javascript:void(0);" title="上一页" class="tc-page-pre<% if (info.currentPage === 1 || info.currentPage > info.totalPage) { %> disable<% } %>" data-role="prev_page"></a><a href="javascript:void(0);" title="下一页" class="tc-page-next<% if (info.currentPage >= info.totalPage) { %> disable<% } %>" data-role="next_page"></a><a href="javascript:void(0);" title="最后一页" class="tc-page-last<% if (info.currentPage >= info.totalPage) { %> disable<% } %>" data-role="last_page"></a>      </div>    <% } %>',{info:e,totalNum:o});this.info=e,this.$el=c(s),a.html("").append(this.$el),this.bindEvent()},bindEvent:function(){var t=this,e=this.$el,i=e.find("[data-role='prev_page']"),n=e.find("[data-role='next_page']"),o=e.find("[data-role='first_page']"),a=e.find("[data-role='last_page']");i.click(function(){t.prevNextPage(this,-1)}),n.click(function(){t.prevNextPage(this,1)}),o.click(function(){t.goPage(this,1)}),a.click(function(){t.goPage(this,t.info.totalPage)})},goPage:function(t,e){$obj=c(t),$obj.hasClass("disable")||this.renderList(e)},prevNextPage:function(t,e){var i=parseInt(c(t).closest("div").attr("data-cp"));this.goPage(t,i+e)},renderList:function(t){var e=this.options.listFun;e&&e(t)}},i.exports=n}),define("widget/panel/panel",function(t,e,i){var a=t("$"),n=t("util"),o=(t("appUtil"),t("pageManager")),s='    <a class="btn-close" href="javascript:void(0)" id="closePanleBtn">关闭</a>    <div id="panelPaginationWrap"></div>    <div class="sidebar-panel-container" data-child="innerContainer"></div>',c="panelContain_"+Math.floor(1e4*Math.random()),r={rendTo:o.appArea,width:"795px",height:"",onBeforeShow:null,onAfterShow:null,onBeforeHide:null,onAfterHide:null,module:{},data:{},speed:300,transition:null,pagination:null},l={},d=(document.body.style,n.supportTransform()),u=0,p=!1,f=n.setTransformTransitionForElem,h=function(){m.hide()},m=i.exports={show:function(t,e){for(var i in t||(t={}),l={},r)l[i]=r[i];l=a.extend(l,t);var n=document.getElementById(c);if(n||(n=document.createElement("div"),a(n).attr("id",c),n.className="sidebar-panel",d&&f(n,"translate3d(100%,0px,0px)",""),a(n).html(s),l.rendTo.append(n),p=!0),n.style.height=l.height,"always"==l.transition?this.hide():l.module&&l.module.destroy&&l.module.destroy(),this.pagination.init(l.pagination),a("#closePanleBtn").unbind("click",h),a("#closePanleBtn").bind("click",h),a("#"+c+" [data-child=innerContainer]").empty(),"panel"!=l.rendTo.attr("data-parent")&&(a(n).parent().length&&(a(n).parent().removeAttr("data-parent"),a(n).parent()[0].removeChild(n)),l.rendTo.attr("data-parent","panel"),l.rendTo.append(n),p=!0),l.module&&l.module.render&&l.module.render(a("#"+c+" [data-child=innerContainer]"),l.data),!e&&l.onBeforeShow&&l.onBeforeShow(),d){var o=(100/parseInt(l.speed)).toFixed(1);u&&clearTimeout(u),p?setTimeout(function(){n.style.width=l.width,f(n,"translate3d(0px,0px,0px)","all "+o+"s ease-out")},10):(n.style.width=l.width,f(n,"translate3d(0px,0px,0px)","all "+o+"s ease-out")),u=setTimeout(function(){f(n,undefined,""),!e&&l.onAfterShow&&l.onAfterShow()},1e3*o)}else a(n).show(),n.style.width="0px",a(n).stop(!0,!0),a(n).animate({width:l.width},l.speed,"swing",function(){!e&&l.onAfterShow&&l.onAfterShow()})},hide:function(t){l.module&&l.module.destroy&&l.module.destroy(),a("#closePanleBtn").unbind("click",h);var e=document.getElementById(c);if(e)if(!t&&l.onBeforeHide&&l.onBeforeHide(),d){var i=(100/parseInt(l.speed)).toFixed(1);u&&clearTimeout(u),f(e,"translate3d(100%,0px,0px)","all "+i+"s ease-out"),u=setTimeout(function(){!t&&l.onAfterHide&&l.onAfterHide(),f(e,undefined,"")},1e3*i)}else a(e).stop(!0,!0),a(e).animate({width:"0px"},l.speed,"swing",function(){a(e).hide(),!t&&l.onAfterHide&&l.onAfterHide()})},pagination:{init:function(t){var e=a("#panelPaginationWrap");if(t){this.options=t;var i=n.tmpl('<div class="pagination" data-cp="<%- info.currentPage %>">        <a href="javascript:;" id="panelPrev" class="btn-page page-prev<% if (info.currentPage === 1 || info.currentPage > info.totalPage) { %> btn-page-disabled<% } %>" data-title="上一条"><i class="icon-page-prev"></i></a>        <a href="javascript:;" id="panelNext" class="btn-page page-next<% if (info.currentPage >= info.totalPage) { %> btn-page-disabled<% } %>" data-title="下一条"><i class="icon-page-next"></i></a>    </div>',{info:t});e.html(i),this.bindEvent()}else e.html("")},bindEvent:function(){var t=this,e=a("#panelPrev"),i=a("#panelNext");e.click(function(){t.prevNextPage(this,-1)}),i.click(function(){t.prevNextPage(this,1)})},goPage:function(t,e){if($obj=a(t),!$obj.hasClass("btn-page-disabled")){var i="panelPrev"==$obj.attr("id")?"prev":"next";this.callback(e,i)}},prevNextPage:function(t,e){var i=parseInt(a(t).closest("div").attr("data-cp"));this.goPage(t,i+e)},callback:function(t,e){var i=this.options.callback;i&&i(t,e)}},render:function(t){var e=document.getElementById(c);e&&(t?a("#"+c+" [data-child=innerContainer]").html(t):e.empty())}}}),define("widget/pills/pills",function(t,e,i){var d=t("$"),u=t("util"),n=function(t){this.options=d.extend({},{renderTo:null,data:null,className:"",change:null,newMode:!1},t),this.activeCls=this.options.newMode?"checked":"b_selected";var e=this.options.renderTo;if(e){e=d(e);var i=this.options.newMode?'    <div class="tc-15-rich-radio <%= className %>" role="radiogroup">        <% for (var i=0, item; item = data[i]; i++) { %>            <% if (!item.hide) { %>            <button type="button" data-value="<%- item.value %>" class="tc-15-btn m <% if (i===0) { %> first <% } %> <% if (i===data.length -1) { %> last <% } %> <% if (item.active) { %> checked <% } %>  <% if (item.disabled) { %> disabled <% } %>" data-title="<%= item.tips %>">                <span><%= item.name %></span>                <% if (item.ico) { %> <i class="<%= item.ico %>"><%= item.iconVal %></i> <% } %>             </button>            <% } %>        <% } %>    </div>':'    <span class="shop_ui_block ui_block_55 <%= className %>">    <% for (var i=0, item; item = data[i]; i++) { %>    <% if (!item.hide) { %>            <a href="javascript:;"  data-value="<%- item.value %>" class="b_item <% if (i===0) { %> b_first <% } %> <% if (i===data.length -1) { %> b_last <% } %> <% if (item.active) { %> b_selected <% } %>  <% if (item.disabled) { %> b_disable <% } %>" data-title="<%= item.tips %>">            <span class="text"><%= item.name %></span>            <% if (item.ico) { %> <i class="<%= item.ico %>"></i> <% } %>             </a>            <% } %>        <% } %>    </span>',n=u.tmpl(i,{data:this.options.data,className:this.options.className}),o=d(n);return this.$el=o,e.append(o),this.bindEvent(),this}};n.prototype={bindEvent:function(){var t=this,e=this.options.newMode?"button:not(.disabled)":"a:not(.b_disable)";this.$el.off("click").on("click",e,function(){t.select(this),t.change(this)})},select:function(t){var e=this.activeCls;this.$el.find("."+e).removeClass(e),d(t).addClass(e)},status:function(t){var e=this.options.newMode?"disabled":"b_disable";for(var i in t.values)t.disabled?this.$el.find('[data-value="'+t.values[i]+'"]').addClass(e):this.$el.find('[data-value="'+t.values[i]+'"]').removeClass(e)},change:function(t){var e=this.options.change;e&&e.call(this,d(t))},getActiveObj:function(){return this.$el.find("."+this.activeCls)},val:function(t){var e=this.$el;if(t===undefined)return e.find("."+this.activeCls).attr("data-value");var i=e.find('[data-value="'+t+'"]');i.length&&this.select(i)},setData:function(t){if(t&&t.length){for(var e=this,i=e.$el,n=e.getCheckedData(),o=this.options.newMode?'    <div class="tc-15-rich-radio <%= className %>" role="radiogroup">        <% for (var i=0, item; item = data[i]; i++) { %>            <% if (!item.hide) { %>            <button type="button" data-value="<%- item.value %>" class="tc-15-btn m <% if (i===0) { %> first <% } %> <% if (i===data.length -1) { %> last <% } %> <% if (item.active) { %> checked <% } %>  <% if (item.disabled) { %> disabled <% } %>" data-title="<%= item.tips %>">                <span><%= item.name %></span>                <% if (item.ico) { %> <i class="<%= item.ico %>"><%= item.iconVal %></i> <% } %>             </button>            <% } %>        <% } %>    </div>':'    <span class="shop_ui_block ui_block_55 <%= className %>">    <% for (var i=0, item; item = data[i]; i++) { %>    <% if (!item.hide) { %>            <a href="javascript:;"  data-value="<%- item.value %>" class="b_item <% if (i===0) { %> b_first <% } %> <% if (i===data.length -1) { %> b_last <% } %> <% if (item.active) { %> b_selected <% } %>  <% if (item.disabled) { %> b_disable <% } %>" data-title="<%= item.tips %>">            <span class="text"><%= item.name %></span>            <% if (item.ico) { %> <i class="<%= item.ico %>"></i> <% } %>             </a>            <% } %>        <% } %>    </span>',a=this.options.newMode?"button:not([disabled])":"a:not([disabled])",s=!1,c=0;c<t.length;c++){var r=t[c];if(r.name==n.name&&r.value==n.value){r.active=1,s=!0;break}}var l=u.tmpl(o,{data:t,className:e.options.className});i.html(d(l)),e.options.data=t,e.bindEvent(),s||i.find(a).first().trigger("click")}},getCheckedData:function(){for(var t=this.options.data,e={value:this.getActiveObj().data("value")},i=0;i<t.length;i++)if(t[i].value==e.value){e.name=t[i].name;break}return e}},i.exports=n}),define("widget/popover/BeeConfirm",function(t,e,i){var n=t("qccomponent").getComponent("popup-confirm");i.exports=n.extend({$afterInit:function(){n.prototype.$afterInit.apply(this,arguments);var t=this;setTimeout(function(){t.show()},0)},hide:function(t){if(this.state){var e=this,i=t?e.onConfirm():e.onCancel();!1!==i&&(i&&i.then?i.then(function(){n.__super__.hide.call(e),e.$destroy(!0)}):(n.__super__.hide.call(e),e.$destroy(!0)))}}},{defaults:{confirmKey:"删除",style:"width:250px;"}})}),define("widget/popover/Editor",function(t,e,i){var v=t("qccomponent"),n=t("tips"),b="_docClickHandler",y="_backspaceHandler",o=v.extend({constructor:function(t){var e,i,n,o=this,a=$(t.target),s=(n=t.attachEl)?$(n):$(document.body),c=t.offset||{top:0,left:0},r=t.alignRight;v.call(o,t),(e=$(o.$el)).appendTo(s),i=a.offset();var l,d=t.box?$(t.box):s,u=a.outerHeight(),p=a.outerWidth(),f=e.outerHeight(),h=e.outerWidth(),m=d.offset(),g=d.innerHeight();r&&(c.left-=h-p),l=i.top+u+f+c.top>m.top+g?{top:i.top-f-c.top,left:i.left+c.left}:{top:i.top+u+c.top,left:i.left+c.left},e.offset(l),setTimeout(function(){$(document).on("click",o[b]=function(t){e[0]===t.target||$.contains(e[0],t.target)||o.$destroy()}).on("keydown",o[y]=function(t){8!==t.keyCode||$(t.target).closest('input[type="text"]:not([readonly]), input[type="password"]:not([readonly]), textarea:not([readonly])').length||t.preventDefault()})})},$afterDestroy:function(){$(document).off("click",this[b]).off("keydown",this[y])},$tpl:'<div class="tc-15-edit-in-place" style="position:absolute;top:-9999px;left:-9999px;z-index:1002;background-color:#fff;overflow:visible;">{{>content}}<button class="tc-15-btn m" b-on="{click:handleYes}">{{yesText}}</button> <button class="tc-15-btn m weak" b-on="{click:handleNo}">{{noText}}</button></div>',yesText:"保存",noText:"取消",handleYes:function(){var t=this,e=$.Deferred();e.done(function(){t.$destroy()}).fail(function(t){n.error(t)}),!1!==this.onYes(e)&&e.resolve()},handleNo:function(){this.onNo(),this.$destroy()},handleSimpleEdit:function(t){var e,i=t.def||$.Deferred(),n=t.updater,o=t.host,a=t.method||"$set",s=t.index,c=t.key,r=t.loadingKey||c+"Changing",l=t.newValue,d=t.oldValue,u="pending"===i.state(),p=function(e){if(n)return n(e);0<=s?o[a](s,e):Object.keys(e).forEach(function(t){o[a](t,e[t])})};return(e={})[c]=l,u&&(e[r]=!0),p(e),i.fail(function(){(e={})[c]=d,p(e)}),i.always(function(){(e={})[r]=!1,p(e)}),i},onYes:$.noop,onNo:$.noop});i.exports=o}),define("widget/popover/HelpTips",function(t,e,i){var n=t("qccomponent").extend({$tpl:'    <div class="tc-15-bubble-icon">        <i class="tc-icon icon-what"></i>        <div class="tc-15-bubble tc-15-bubble-{{getCurPos(position)}}"             b-style="{width: width, marginLeft: position == \'top\' || position == \'bottom\' ? -width/2 : 8, marginTop: position == \'left\' || position == \'right\' ? -width/2 : 0}">            <div class="tc-15-bubble-inner">                <p style="white-space: normal">                    {{> content || $content }}                </p>            </div>        </div>    </div>',getCurPos:function(t){return n.POSMAP[t]||"top"}},{defaults:{position:"bottom",width:300},POSMAP:{left:"right",right:"left",top:"bottom",bottom:"top"}});i.exports=n}),define("widget/popover/TextEditor",function(t,e,i){var n=t("./Editor");i.exports=n.extend({content:'    <div class="tc-15-input-text-wrap m {{invalid ? \'error\' : \'\'}}">        <div class="clr">{{>inputTpl}}</div>        <div class="tc-15-input-tips">{{invalid || tips}}</div>    </div>',inputTpl:'    <input type="text" class="tc-15-input-text" b-model="value" b-on="{keypress : ifEnter}">',$afterInit:function(){n.prototype.$afterInit.apply(this,arguments),this.oldValue=this.value||""},ifEnter:function(t){13===t.keyCode&&this.handleYes()},validate:$.noop,doSave:function(t,e){return $.Deferred().resolve()},onYes:function(){var t,e,i=this.value,n=this.oldValue;return i===n?$.Deferred().resolve():(t=this.validate(i),this.$set("invalid",t),!t&&(e=this.doSave(i,n),this.onSave(e,i,n),e))}})}),define("widget/popover/popover",function(t,e,i){var n=t("$"),o=(t("event"),t("util")),a=t("lib/Class"),s=["left","top","right","bottom"];function c(t,e){e=e||{},this.$el=n(o.tmpl(e.tpl||this.tpl,{content:t})),this.el=this.$el[0],this._auto=!1!==e.auto,this.$el.data("popover",this),this.$el.attr("data-role","popover"),this.posOffset=n.extend({top:0,left:0},e.posOffset),e.className&&this.$el.addClass(e.className),e.style&&this.$el.css(e.style),this.position(e.position||"top"),this.options=e,this._global=e.global}n("body").off("mousedown.popover").on("mousedown.popover",function(t){n("[data-role=popover][data-close=mousedown]").filter(function(){return!n(t.target).closest("[data-role=popover][data-close=mousedown]").is(this)}).remove()}),n.extend(c,{arrowOffset:8,close:function(t){var e;t instanceof c?t.hide():(e=n(t).data("popover"))&&e.hide()},closeAll:function(){n("[data-role=popover]").each(function(){var t=n(this).data("popover");t&&t.hide()})}},a),n.extend(c.prototype,{tpl:'    <div class="tc-bubble" style="z-index: 9999">        <div class="tc-bubble-inner">            <%- content %>        </div>    </div>',attach:function(t){this.target=t,this.bindHoverEvent()},show:function(t,e){e=e||{},this.target=t,this.$target=n(t),e.persist||this.$el.attr("data-close","mousedown"),this._global?n(document.body).append(this.el):this.$target.after(this.el);var i=this.$target.data("popover");i&&i.hide(),this.$target.data("popover",this),this.reposition()},position:function(t){this._pos=t},reposition:function(){var t=this._pos;if(-1!==s.indexOf(t)){var e,i=this.offset(t),n=this._auto&&this.suggested(t,i);switch(n&&n!==t&&(t=n,i=this.offset(t)),t){case"top":e="bottom";break;case"bottom":e="top";break;case"left":e="right";break;case"right":e="left"}this.$el.addClass("tc-bubble-"+e),this.$el.css(i)}},suggested:function(t,e){var i,n=this.el,o=n.clientWidth,a=n.clientHeight,s=window.scrollY,c=window.scrollX,r=window.innerWidth,l=window.innerHeight,d={top:!0,bottom:!0,left:!0,right:!0};e.top+a>s+l&&(d.bottom=!1),e.top<s&&(d.top=!1),e.left+o>c+r&&(d.right=!1),e.left<c&&(d.left=!1);var u=t.split(/\s+/);for(i=0;i<u.length&&d[u[i]];i++)if(i===u.length-1)return t;for(i=0;i<u.length;i++)if(d[u[i]])return u[i];return d[t]?t:d.top?"top":d.bottom?"bottom":d.left?"left":d.right?"right":void 0},offset:function(t){var e=this.constructor.arrowOffset;if(!(this._global?this.el.getBoundingClientRect():this.$el.position()))throw new Error("could not get bounding client rect of Tip element");var i=this.$el.width(),n=this.$el.height(),o=this._global?this.target.getBoundingClientRect():this.$target.position();if(!o)throw new Error("could not get bounding client rect of `target`");var a,s=this.$target.width(),c=this.$target.height(),r=function l(t,e){var i=e.body||e.getElementsByTagName("body")[0],n=e.documentElement||i.parentNode,o=n.clientTop||i.clientTop||0,a=n.clientLeft||i.clientLeft||0,s=window.pageYOffset||n.scrollTop,c=window.pageXOffset||n.scrollLeft;return{top:t.top+s-o,left:t.left+c-a}}(o,document);if(!r)throw new Error("could not determine page offset of `target`");switch(t){case"top":a={top:r.top-n-e,left:r.left+s/2-i/2};break;case"bottom":a={top:r.top+c+e,left:r.left+s/2-i/2};break;case"right":a={top:r.top+c/2-n/2,left:r.left+s+e};break;case"left":a={top:r.top+c/2-n/2,left:r.left-i-e};break;default:throw new Error('invalid position "'+t+'"')}return a.top+=this.posOffset.top,a.left+=this.posOffset.left,a},hide:function(){this.remove()},remove:function(){this.$target.removeData("popover"),this.$el.removeData("popover"),this.$el.remove()},bindHoverEvent:function(){var t=this;n(this.target).on("mouseover",function(){t.show(t.target)}).on("mouseout",function(){t.hide()})}}),i.exports=c}),define("widget/projects/projectSelector",function(t,e,i){var n=t("qccomponent"),o=t("manager"),d=t("appUtil"),a=n.getComponent("qc-select"),s=a.extend({$valuekey:"projectId",$afterInit:function(){$(this.$el).attr("data-project-selector",""),$(this.$el).find("[data-list]").css({maxHeight:240}),this.needAll||d.setDefaultPid(0);var r=this,l=d.getProjectId();this.__super__.$afterInit.call(this),$(this.$el).hide(),this.$watch("selected",function(t){t&&(d.setProjectId(t.projectId),this.$set("projectId",t.projectId))}),o.getProjects(function(c){setTimeout(function(){var t,e,i=c.data,n=!!r.$data.needAll&&(r.$data.cam||c.isShowAll);if(i&&i.length&&(1!==i.length||0!=i[0].projectId)){if(!n){for(var o,a=!1,s=0;o=i[s];s++)if(l==o.projectId){a=!0;break}if(!a)return d.setProjectId(i[0].projectId),void location.reload()}t=i.map(function(t){return{label:t.name,projectId:t.projectId}}),n&&t.unshift({label:"全部项目",projectId:-1}),t.forEach(function(t){t.projectId==l&&(e=t)}),r.$set({list:t,selected:e||t[0]}),$(r.$el).css("display","")}},0)})}},{defaults:$.extend({},a.defaults,{needAll:!0})});n.tag("project-selector",s),i.exports=s}),define("widget/projects/projects",function(t,e,i){var d=t("$"),u=t("util"),p=t("appUtil"),f=(t("event"),t("selector")),n=t("manager"),o=(t("login"),t("tips"),function(t){!1===t.needAll&&(p.setDefaultPid(0),-1==t.selectedId&&(t.selectedId=0));var e={renderTo:null,needAll:!0,selectedId:p.getProjectId()},r=this;this.options=d.extend({},e,t);var l=this.options.renderTo,i=this.options.getProjects||n.getProjects.bind(n);if(l)return i(function(t){var e=t.data,i=!!r.options.needAll&&t.isShowAll;if(e&&e.length&&(1!==e.length||0!=e[0].projectId)){if(!i){for(var n,o=!1,a=0;n=e[a];a++)if(r.options.selectedId==n.projectId){o=!0;break}if(!o)return p.setProjectId(e[0].projectId),void location.reload()}l=d(l),r.data=e,r.isShowAll=i;var s=u.tmpl('    <div class="tc-15-dropdown tc-15-dropdown-in-hd" data-project-selector>        <a href="javascript:;" class="tc-15-dropdown-link"><span><%= selectedName %></span><i class="caret"></i></a>        <ul class="tc-15-dropdown-menu" role="menu" style="max-height:240px; overflow-y:auto">            <% if (isShowAll) { %>                <li data-id="-1" <% if (-1 == selectedId) { %> class="selected" <% } %>>                    <a href="javascript:;">全部项目</a>                </li>            <% } %>            <% for (var i=0,item; item = data[i]; i++) { %>                <li data-id="<%-item.projectId%>" <% if (item.projectId == selectedId) { %> class="selected" <% } %>>                    <a href="javascript:;" title="<%= item.name %>"><%= item.name %></a>                </li>            <% } %>        </ul>    </div>',{data:e,isShowAll:i,selectedId:r.options.selectedId,selectedName:r.getSelectedName(r.options.selectedId)}),c=d(s);l.append(c),r.selector=new f(c,{newMode:!0}),r.bindEvent()}}),this});o.prototype={bindEvent:function(){var t=this;this.selector.change(function(){p.setProjectId(this.val()),t.options.change&&t.options.change.call(t)}),this.selector.open(function(){})},getSelectedName:function(t){var e="";if(-1==t)return"全部项目";for(var i,n=0;i=this.data[n];n++)if(i.projectId==t){e=i.name;break}return e},val:function(t){return this.selector?this.selector.val(t):t==undefined?this.options.selectedId:void 0}},i.exports=o}),define("widget/pubsubhub/pubsubhub",function(t,e,i){var n=t("$");i.exports={on:function(){return n.fn.on.apply(n(this),arguments)},off:function(){return n.fn.off.apply(n(this),arguments)},trigger:function(){return n.fn.trigger.apply(n(this),arguments)},one:function(){return n.fn.one.apply(n(this),arguments)}}}),define("widget/range/range",function(t,e,i){var r=t("$"),n=t("util"),o=(t("appUtil"),"mousemove.widget_range"),a="mouseup.widget_range",s=function(t){if(this.options=r.extend({},{renderTo:null,value:1,min:0,max:100,width:300,unit:"Mbps",section:[{value:5,width:60},{value:20,width:150},{value:100,width:300}],step:1,change:null},t),this.options.renderTo){renderTo=r(this.options.renderTo),this.options.unitOffset=6*this.options.unit.length;var e=n.tmpl('    <div class="ui_progress">        <div class="progress_area">            <div class="progress_bar my-range-bar" style="width:<%-width%>px">                <div class="progress_bg my-range-track" style="width:auto;">                    <div class="progress_in my-range-selected"></div>                    <a href="javascript:void(0);" class="btn_drag my-range-thumb" style="z-index:1"></a>                </div>                <div class="scale" style="width:auto">                    <% for (var i=0, item; item = section[i]; i++) { %>                    <div class="scale_dot my-range-scale" style="left:<%=item.width-2%>px;"></div>                    <% } %>                </div>            </div>            <div class="input_area">                <input type="text" class="input_mini" value="<%-value%>" style="margin-left:10px;width: 45px"/>                <span class="text"><%-unit%></span>            </div>        </div>        <div class="text_area">            <% for (var i=0, item; item = section[i]; i++) { var left = item.width - (unitOffset + item.value.toString().length * 6) / 2; %>                <span class="text" style="left:<%- left %>px;"><%-item.value%><%-unit%></span>            <% } %>        </div>    </div>',this.options);this.el=r(e),this.rangeBar=this.el.find(".my-range-bar"),this.rangeTrack=this.el.find(".my-range-track"),this.rangeSelected=this.el.find(".my-range-selected"),this.rangeThumb=this.el.find(".my-range-thumb"),this.rangeScale=this.el.find(".my-range-scale"),this.rangeIpt=this.el.find('input[type="text"]'),this.minX=this.valueToX(this.options.min),this.maxX=this.valueToX(this.options.max),renderTo.html("").append(this.el),this.bindEvent(),this.val(this.options.value)}};s.prototype={bindEvent:function(){var i=this;this.options;this.rangeThumb.on("mousedown",function(t){i.thumbMousedown(t)}).on("dragstart",function(){return!1}),this.rangeBar.on("click",function(t){r(t.target).hasClass("my-range-thumb")||(i.slide(t.clientX),i.changeFun())}),this.rangeIpt.change(function(t){i.changeVal(this)}).keydown(function(t){var e=t.keyCode||t.which;13!=e&&32!=e&&108!=e||i.changeVal(this)})},changeVal:function(t){var e=this,i=this.options,n=parseInt(r.trim(r(t).val()));isNaN(n)?e.val(e.options.value):n<i.min?e.val(i.min):n>i.max?e.val(i.max):e.val(n)},thumbMousedown:function(t){var e=this;return this.diff=this.relativeX(t.clientX)-this.getThumbLeft(),r(document).off(o).off(a).on(o,function(t){e.mousemove(t)}).on(a,function(t){e.mouseup(t)}),!1},mousemove:function(t){this.slide(t.clientX)},mouseup:function(t){r(document).off(o).off(a),this.changeFun()},slide:function(t){var e=this.diff||0;this.update(this.relativeX(t)-e)},update:function(t){var e=this.getThumbOffset(),i=this.options,n=(i.min,i.max,i.step,i.width,i.section,this.minX),o=this.maxX;t<n&&(t=n),o<t&&(t=o);var a=t-e;this.rangeThumb.css("left",a),this.rangeSelected.width(a);var s=this.xToValue(t);this.rangeIpt.val(this.getTargetValue(s))},getTargetValue:function(t){t=Math.round(t);var e=this.options.step;"function"==typeof e&&(e=e(t));var i=t%e;return 0!==i&&(t+=e-i),t},changeFun:function(){var t=this.options;this.inited?t.change&&t.change.call(this,this.val()):this.inited=!0},getThumbOffset:function(){return 0},getThumbLeft:function(){return this.rangeThumb.position().left},relativeX:function(t){return t-this.rangeTrack.offset().left},calculateSection:function(t,e){for(var i,n=this.options.section,o=this.rangeScale,a="",s=0,c=0;i=n[c];c++)if(t<=i[e]){a=i,s=c;break}return"width"===e&&(o.removeClass("dot_pass"),o.each(function(t){t<s&&r(this).addClass("dot_pass")})),{startX:0===s?0:n[s-1].width+1,startV:0===s?0:n[s-1].value+1,wCount:0===s?a.width:a.width-n[s-1].width-1,rCount:0===s?a.value:a.value-n[s-1].value-1}},valueToX:function(t){var e=this.calculateSection(t,"value");return t=(t-e.startV)/e.rCount*e.wCount+e.startX},xToValue:function(t){var e=this.calculateSection(t,"width");return t=(t-e.startX)/e.wCount*e.rCount+e.startV},val:function(t){this.options;if(t===undefined)return parseInt(this.rangeIpt.val());this.update(this.valueToX(t)),this.changeFun()},setMaxMin:function(t,e){this.options[t]=e,"max"===t?this.maxX=this.valueToX(e):this.minX=this.valueToX(e)}},i.exports=s}),define("widget/region/region",function(t,e,i){var l=t("$"),d=t("util"),u=t("appUtil"),p=(t("event"),t("selector")),n=t("manager"),o=function(t){var e={renderTo:null,selectedId:u.getRegionId()},s=this;this.options=l.extend({},e,t);var c=this.options.whiteList,r=this.options.renderTo;if(r)return n.queryRegion(function(t){if(data=u.clone(t),r=l(r),c){for(var e={},i=0;i<c.length;i++)e[c[i]]=!0;for(var n in data)e[n]||delete data[n]}var o=d.tmpl('    <div class="tc-15-dropdown tc-15-dropdown-in-hd">        <a href="javascript:;" class="tc-15-dropdown-link"><span><%= selectedName %></span><i class="caret"></i></a>        <ul class="tc-15-dropdown-menu" role="menu">            <% for (var id in sortData ) { var realId = id.replace("_", ""); %>                <li data-id="<%-realId%>" <% if (realId == selectedId) { %> class="selected" <% } %>>                    <a href="javascript:;" title="<%= sortData[id] %>"><%= sortData[id] %></a>                </li>            <% } %>        </ul>    </div>',{data:data,sortData:u.getRegionOrderHackObj(data),selectedId:s.options.selectedId,selectedName:data[s.options.selectedId]}),a=l(o);r.append(a),s.selector=new p(a,{newMode:!0}),s.bindEvent()},undefined,this.options.regionListType),this};o.prototype={bindEvent:function(){var t=this;this.selector.change(function(){u.setRegionId(this.val()),t.options.change&&t.options.change.call(t)}),this.selector.open(function(){})},val:function(t){return this.selector.val(t)}},i.exports=o}),define("widget/region/regionAreaSelector",function(t,e,i){var n=t("widget/selectors/AreaDropdownSelector"),o=t("config/regionconfig"),a=t("manager"),s=t("qccomponent"),c=n.extend({$afterInit:function(){var o=this;this.useDefaultRegionList&&a.queryRegion(function(e){var i={},t=Object.keys(e),n=o.getGroups(t);t.map(function(t){i[t]={label:e[t]}}),o.$set("groups",n),o.$set("items",i)},undefined),o.regionList&&(o.$set("items",o.regionList),o.$set("groups",o.getGroups(Object.keys(o.regionList)))),o.$watch("regionList",function(t,e){o.$set("items",t),o.$set("groups",o.getGroups(Object.keys(t)))})},mainlandRegionsId:o.getMainlandRegionList(),getGroups:function(t){var e=this.mainlandRegionsId,i=[{name:"大陆地区",itemsId:[]},{name:"其他",itemsId:[]}];return t.map(function(t){-1==e.indexOf(String(t))?i[1].itemsId.push(String(t)):i[0].itemsId.push(String(t))}),i}});s.tag("region-area-selector",c),i.exports=c}),define("widget/region/regionPills",function(t,e,i){var n=t("qccomponent"),o=t("manager"),r=t("constants"),l=t("appUtil"),a=n.getComponent("qc-segment"),s={idKey:"regionId",regionId:l.getRegionId(),global:!1,"short":!1,reset:!1},d=a.extend({$valuekey:"regionId",$afterInit:function(){var t,c=this;this.whiteList;d.__super__.$afterInit.call(this),this.reset&&(c.regionId=l.getRegionId()),this.$on("selected",function(t){t&&(this.global&&l.setRegionId(t.regionId),this.$set("regionId",t.regionId))}),this.$watch("regionId",function(t){c.toggle({regionId:t})}),$.when((t=$.Deferred(),o.queryRegion(t.resolve,t.reject),t.promise()),"function"==typeof c.getWhiteList?c.getWhiteList():$.Deferred().resolve(c.whiteList||[])).done(function(t,e){t=l.clone(t);var i=[],n=l.getRegionOrderHackObj(t),o=!1,a=r.REGIONNAMES;for(var s in n)s=s.replace("_",""),e.length&&e.indexOf(s)<0?(delete t[s],s==c.regionId&&(o=!0)):c["short"]?i.push({label:a[s],regionId:s,$checked:s==c.regionId}):i.push({label:t[s],regionId:s,$checked:s==c.regionId});c.$set({list:i,regionId:o?i[0].regionId:c.regionId})})}},{defaults:s});n.tag("region-pill",d),i.exports=d}),define("widget/region/regionSelector",function(t,e,i){var n=t("qccomponent"),l=t("manager"),d=t("tips"),u=t("appUtil"),p=n.getComponent("qc-select").extend({$valuekey:"regionId",$afterInit:function(){var o=this,a=this.whiteList||[],s=this.regionId||u.getRegionId();this.$set("selected",{regionId:s}),p.__super__.$afterInit.call(this);var c=$(this.$el);c.hide(),$(this.$el).attr("data-region-selector",""),this.$watch("selected",function(t){t&&!1!==this.global&&u.setRegionId(t.regionId);var e=t&&t.regionId;e!==this.regionId&&this.$set("regionId",e)});var r,t,e;this.$watch("regionId",function(){var t,e,i,n=this.selected,o=this.regionId;n&&n.regionId!==o&&this.$set("selected",(t=this.list,e=o,t.forEach(function(t){t.regionId===e&&(i=t)}),i||t[0]))}),e="function"==typeof this.getWhiteList?this.getWhiteList():$.Deferred().resolve(a),t=$.Deferred(),l.queryRegion(t.resolve,t.reject),$.when(e.done(function(t){a=t}),t.done(function(t){r=u.clone(t)})).done(function(){var e,t=[],i=u.getRegionOrderHackObj(r);for(var n in i)n=n.replace("_",""),a.length&&a.indexOf(n)<0?delete r[n]:t.push({label:r[n],regionId:n});t.forEach(function(t){t.regionId==s&&(e=t)}),void 0===e&&(d.error("所选地域不支持该功能，已自动为您切换到支持的地域"),e=t[0]),o.$set({list:t,selected:e||t[0]}),c.css("display","")})}});n.tag("region-selector",p),i.exports=p}),define("widget/region/ZoneSelector",function(t,e,i){var n=t("qccomponent"),o=t("manager"),c=t("appUtil"),a=n.getComponent("qc-select").extend({$valuekey:"zoneId",$afterInit:function(){var a=this,s=[{label:"全部",zoneId:-1}],t=this.regionId||c.getRegionId();$(a.$el).hide(),o.queryZone(t,function(t){for(var e,i=t,n=a.zoneId||-1,o=0;o<i.length;o++)s.push({label:i[o].zoneName,zoneId:i[o].zoneId}),n==i[o].zoneId&&(e={label:i[o].zoneName,zoneId:i[o].zoneId});a.$set({list:s,selected:e||s[0]}),$(a.$el).show()})}},{defaults:{selected:{label:"全部",zoneId:-1}}});n.tag("zone-selector",a),i.exports=a}),define("widget/scrollLoader/scrollLoader",function(t,e,i){var l=t("$"),n=function(t){this.options=l.extend({},{container:null,callback:null,loadingTip:"",noDataTip:"",additionalParam:null,page:1,totalNumField:"num",listDataField:"vmList",perPageCount:20},t);var e=this.options.container;if(e)return this.$el=l(e),this.bindEvent(),this.init(),this};n.prototype={init:function(){this.$el.html(""),this._initGet()},_initGet:function(){var n=this,o=this.$el,t=this.options,a=t.page,s=t.perPageCount,c=t.noDataTip,r=t.totalNumField,l=t.listDataField;this.getList(a,function(t){var e=t[r],i=t[l];n.totalPage=parseInt((e+s-1)/s),1!=a||i&&i.length||!c?setTimeout(function(){var t=n.$el[0];t.scrollHeight<=t.offsetHeight&&a<n.totalPage&&n._initGet()},0):o.append(c)}),t.page++},bindEvent:function(){var o=this,a=this.$el;a.off("scroll").on("scroll",function(){var t=a[0],e=t.scrollTop,i=t.scrollHeight,n=t.offsetHeight;0<e&&i-n<=e&&!o.isLoading&&o.scrollLoad()})},scrollLoad:function(){var t=this.options,e=t.page;!this.totalPage||this.totalPage&&e>this.totalPage||this.getList(t.page++)},getList:function(t,e){var i,n=this,o=this.options,a=o.additionalParam,s=this.$el,c=o.loadingTip;c&&(i=l(c),s.append(i)),this.isLoading=!0;var r=o.callback;r&&r(t,function(t){e&&e(t),n.isLoading=!1,i&&i.remove()},a)}},i.exports=n}),define("widget/search/search",function(t,e,i){var o=t("$"),a=t("util"),r=t("tips"),n=function(t){return this.options=o.extend({},{value:"",width:150,analyseType:"",dialogMode:0,placeholder:"搜索",multiIp:!1,listFun:null},t),this.show(),this};n.prototype={show:function(){var t=this.options,e=o(t.renderTo),i='  <style>  .sel-host-keywd{transition: width 0.3s linear;}  </style>  <div class="search-panel">    <input type="text" <% if (width) { %> style="width:<%-width%>px" <% } %> class="sel-host-keywd" value="<%=value%>" placeholder="<%=placeholder%>">     <button class="sel-host-btn" data-role="search">搜索</button>  </div>';1===t.dialogMode?i='<div class="search-box">     <input type="text" class="search-inp" <% if (width) { %> style="width:<%-width%>px" <% } %> value="<%=value%>" placeholder="<%=placeholder%>"><a href="javascript:;" class="new-search-btn" data-role="search"><i class="new-search-icon"></i></a>     </div>':2===t.dialogMode?i='<div class="search-box">        <input class="inp-txt" type="text" <% if (width) { %> style="width:<%-width%>px" <% } %> value="<%=value%>" placeholder="<%=placeholder%>">        <i class="search-icon" data-role="search"></i>    </div>':t.multiIp&&(i='  <div class="search-panel search-panel-textarea" tab-index="0">    <textarea <% if (width) { %> style="width:<%-width%>px" <% } %> class="sel-keywd-textarea def-scroll" value="<%=value%>" placeholder="<%=placeholder%>"><%=value%></textarea><button class="sel-host-btn" data-role="search">搜索</button>  </div>');var n=a.tmpl(i,{value:t.value,width:t.width,placeholder:t.placeholder});this.$el=o(n),this.$ipt=this.$el.find('input[type="text"]'),this.$ipt.length||(this.$ipt=this.$el.find("textarea")),this.$btn=this.$el.find('[data-role="search"]'),e.html("").append(this.$el),this.bindEvent()},bindEvent:function(){var e=this,i=this.options;if(this.$btn.click(function(){e.doSearch(),i.multiIp&&e.$ipt.removeClass("area-expand-height")}),this.$ipt.on("keydown",function(t){if(13===t.which&&!i.multiIp)return e.doSearch(),!1}),i.multiIp){var n=this.$ipt,o=this.$btn;o.on("mousedown",function(){o.data("down",!0)}).on("mouseup",function(){o.data("down",!1)}),n.on("focus",function(t){o.data("down",!1),n.addClass("area-expand-height")}).on("blur",function(t){o.data("down")||n.removeClass("area-expand-height")})}},val:function(t){var e=this.$ipt;if(t===undefined)return o.trim(e.val());e.val(t)},doSearch:function(){var t=this.val();"cvm"===this.options.analyseType&&(t=this.getCvmAnalyseValue())===undefined||this.renderList(t)},getCvmAnalyseValue:function(){var t=this.val(),e=/^(?:(?:[1-9]?[0-9]|1[0-9]{2}|2(?:[0-4][0-9]|5[0-5]))\.){3}(?:[1-9]?[0-9]|1[0-9]{2}|2(?:[0-4][0-9]|5[0-5]))$/,i=this.options.multiIp,n=null;if(t)if(n={},i&&/\n/.test(t)){for(var o,a=t.replace(/\s+/,"\n").split("\n"),s=[],c=0;o=a[c];c++){if(!e.test(o))return r.error("暂不支持批量模糊搜索,请检查输入");s.push(o)}n.ipList=s}else/^\d{1,3}((\.(\d{1,3})?)?){0,3}$/.test(t)?n.vagueIp=t:n.alias=t;return n},renderList:function(t){var e=this.options.listFun;e&&e(t)}},i.exports=n}),define("widget/searchSelector/SearchSelector",function(t,e,i){var n=t("qccomponent").getComponent("qc-select"),c=t("$"),r=n.extend({listTpl:n.prototype.listTpl+'<li class="disabled" b-if="$loading"><a href="javascript:;">加载中...</a></li>',$afterInit:function(){r.__super__.$afterInit.call(this),this.initGetData&&this._getData({page:1,count:this.count}),this.bindEvents()},bindEvents:function(){var e=this;c(this.$el).on("keydown",function(t){13===t.keyCode&&t.stopPropagation()}),c(this.$el).find("ul").on("scroll",function(){var t=c(this);this.scrollHeight-e.pagerOffset<=t.height()+this.scrollTop&&!e.$loading&&e.page<e.totalNum/e.count&&e._getData({page:e.page+1})})},_getData:function(o,a){var s=this;return o=c.extend({count:r.defaults.count},o),s.$set("$loading",!0),new Promise(function(i,n){s.getData(o,function(t,e){s.$set("$loading",!1),t?n(t):(s.$set(c.extend({},o,{totalNum:e.totalNum})),a?s.$set("list",e.list):s.list.splice.apply(s.list,[s.list.length,0].concat(e.list)),(a||s.list.length)&&s.defaultSelect&&s.$set("selected",e.selected||e.list[0]),i(e))})})},getData:function(t,e){e(null,[{label:"label",value:"value"}])},filterData:function(t){return t},search:function(t){this._getData({page:1,searchKey:t},!0)}},{defaults:{initGetData:!0,defaultSelect:!1,styleType:1,page:1,count:20,filter:!0,openReset:!1,pagerOffset:20,label:"请选择"}});i.exports=r}),define("widget/selectors/AreaDropdownSelector",function(t,e,i){var n=t("qccomponent"),o=n.extend({$tpl:'    <div class="tc-15-dropdown tc-15-dropdown-btn-style tc-15-menu-active">        <a class="tc-15-dropdown-link" href="javascript:void(0);" b-on-click="toggle()">            <em>{{selected ? items[selected].label : \'请选择\'}}</em>            <i class="caret"></i>        </a>        <div class="tc-15-dropdown-menu area-dropdown-menu" b-style="{display: showDropdown ? \'block\' : \'none\'}">            <div b-repeat="group in groups">                <p class="text-weak">{{group.name}}</p>                <ul class="area-list">                    <li b-repeat="id in group.itemsId"                        class="{{selected == id ? \'cur\' : \'\'}}"                        disable={{items[id].disable}}                        data-id="{{items[id].id}}"                        b-on="{click: clickHandler(id)}"                    >                        <a href="javascript:void(0);">{{items[id].label}}</a>                    </li>                </ul>            </div>        </div>    </div>',$valuekey:"selected",clickHandler:function(e){var i=this;return function(){var t=i.items[e];t.disable||i.selectItem(e,t)}},selectItem:function(t,e){this.$set("selected",String(t)),this.$set("showDropdown",!1),this.onChange&&this.onChange(this.selected)},toggle:function(){this.$set("showDropdown",!this.showDropdown)}},{defaults:{selected:null,showDropdown:!1}});n.tag("area-dropdown-selector",o),i.exports=o}),define("widget/selectors/CvmSelector",function(t,e,i){var n=t("./ListSelector"),o=t("models/iaas"),s=t("appUtil"),a=n.extend({getData:function(n){var t=(n=n||{}).count||this.count,e=n.page||this.page,o=this,i=$.extend({},this.extraParam,{limit:t,offset:t*(e-1),projectId:this.projectId}),a=n.searchKey;return a&&(/^ins-\w{8}$/.test(a)?i.uInstanceIds=[a]:s.isValidIp(a)?i.searchWord=a:i.instanceName=a),this.request(i).then(function(t){var e=(t=t.data).deviceList||[],i=o.parseData({list:e,totalNum:t.totalNum});return i&&i.then||(i=Promise.resolve(i)),i.then(function(t){return $.extend({},n,t)})})},request:function(t){return o.apiRequest({regionId:this.regionId,cmd:"DescribeInstanceMainInfo",data:t,serviceType:"cvm"},{camTips:!1})},parseData:function(t){return t}},{defaults:{multipleSearch:!1,checkType:"radio",checkKey:"uInstanceId",colums:[{name:"主机ID/名称",key:"uInstanceId",tdTpl:'<p>{{item.uInstanceId}}</p><p class="text-overflow">{{item.alias}}</p>'},{name:"内网IP",key:"deviceLanIp"},{name:"公网IP",key:"deviceWanIp"}]}});i.exports=a}),define("widget/selectors/EniSelector",function(t,e,i){var n=t("./ListSelector"),a=t("models/iaas"),o=n.extend({getData:function(n){var t=(n=n||{}).count||this.count,e=n.page||this.page,o=this,i=$.extend({},{limit:t,offset:t*(e-1)},this.extraParam);return n.searchKey&&(/^eni-\w{8}$/.test(n.searchKey)?i.networkInterfaceId=n.searchKey:i.eniName=n.searchKey),a.apiRequest({regionId:this.regionId,cmd:"DescribeNetworkInterfaces",data:i,serviceType:"vpc"},{camTips:!1}).then(function(t){var e=(t=t.data).data||[],i=o.parseData({list:e,totalNum:t.totalNum});return i&&i.then||(i=Promise.resolve(i)),i.then(function(t){return $.extend({},n,t)})})},parseData:function(t){return t.list.forEach(function(t){t.ipNum=t.privateIpAddressesSet.length}),t}},{defaults:{multipleSearch:!1,checkType:"radio",checkKey:"networkInterfaceId",colums:[{name:"弹性网卡ID/名称",key:"networkInterfaceId",tdTpl:'<p>{{item.networkInterfaceId}}</p><p class="text-overflow">{{item.eniName}}</p>'},{name:"绑定IP数",key:"ipNum"}]}});i.exports=o}),define("widget/selectors/LbSelector",function(t,e,i){var n=t("widget/searchSelector/SearchSelector"),s=t("models/api"),o=n.extend({$afterInit:function(){o.__super__.$afterInit.call(this),this.$watch("vpcId",function(t){t!=undefined&&this.checkVpc(t)})},checkVpc:function(o){var a=this;this.list.forEach(function(t,e){var i=t.vpcId!=o,n={$disabled:i,title:i&&a.disabledTitle?a.disabledTitle:t.label};a.list.$set(e,n)})},getData:function(t,o){var a=this,e={offset:(t.page-1)*t.count,limit:t.count,projectId:t.projectId||this.projectId};t.searchKey&&(e.searchKey=t.searchKey),Promise.all([s.request({serviceType:"vpc",cmd:"DescribeVpcEx",data:{limit:999}}),s.request({serviceType:"lb",cmd:"DescribeLoadBalancers",data:e})]).then(function(t){var n={};t[0].data.reduce&&t[0].data.reduce(function(t,e){return t[1*e.vpcId.split("_")[2]]=e.unVpcId,t},n);var e=t[1],i=e.loadBalancerSet.map(function(t,e){var i=(n[t.vpcId]||t.vpcId)!=a.vpcId;return a.selected&&a.selected.unLoadBalancerId==t.unLoadBalancerId&&setTimeout(function(){a.$set("selected",a.list[e])}),{label:t.loadBalancerName,value:t.loadBalancerId,unLoadBalancerId:t.unLoadBalancerId,vpcId:n[t.vpcId]||t.vpcId,$disabled:i,title:i&&a.disabledTitle?a.disabledTitle:t.loadBalancerName}});o(null,{list:i,totalNum:e.totalCount})},o)}},{defaults:{label:"请选择负载均衡",emptyTips:'{{searchKey ? "无搜索结果" : "无负载均衡"}}'}});i.exports=o}),define("widget/selectors/ListSelector",function(t,e,i){var n=t("qccomponent"),o=t("dialog"),a=t("widget/cam/cam"),s=n.extend({$tpl:'    <div>        <div class="search-box {{ multipleSearch ? \'multi-search-box\' : \'\' }}">            <form action="javascript:;" b-on-submit="search(keyword)">                <div class="search-input-wrap">                    <textarea b-if="multipleSearch" b-model="keyword" class="tc-15-input-text search-input" placeholder="{{searchPlaceholder}}"></textarea>                    <input b-if="!multipleSearch" b-model="keyword" type="text" class="tc-15-input-text search-input"  placeholder="{{searchPlaceholder}}" />                    <a href="javascript:;" b-on-click="clearSearch()" b-if="keyword" role="button" class="btn-rm-txt" title="清空">清空</a>                </div>                <input class="search-btn" type="button" b-on-click="search(keyword)" value="搜索">            </form>        </div>        <div class="tc-15-table-panel" b-on="_events">            <form action="javascript:;">            <div class="tc-15-table-fixed-head" b-style="{paddingRight: _hasYScroll ? scrollBarSize : 0}">                <table class="tc-15-table-box">                    <colgroup>                        <col b-if="showCheckColum" style="width: 50px">                        <col b-repeat="col in colums" b-style="{width: col.width || \'auto\'}">                    </colgroup>                    <thead>                    <tr>                        <th b-if="showCheckColum"></th>                        <th b-repeat="col in colums">                            <div>                                {{> col.thTpl || col.name || \'-\' }}                            </div>                        </th>                    </tr>                    </thead>                </table>            </div>            <div class="tc-15-table-fixed-body" b-style="tbodyStyle" b-ref="gridbody">                <table class="tc-15-table-box tc-15-table-rowhover">                    <colgroup>                        <col b-if="showCheckColum" style="width: 50px">                        <col b-repeat="col in colums" b-style="{width: col.width || \'auto\'}">                    </colgroup>                    <tbody>                    <tr tabindex="0" b-if="searchKey">                        <td class="text-center" colspan="{{colums.length + 1}}">                            <div b-if="totalNum">                                <span class="text-overflow">搜索"{{searchKey}}"，找到{{totalNum}}条结果。</span>                                <a href="javascript:;" b-on-click="clearSearch()">返回原列表</a>                            </div>                            <div b-if="!totalNum">                                <span class="text-overflow">抱歉，没有找到相关{{ searchItemName }}，尝试其他搜索条件。</span>                                <a href="javascript:;" b-on-click="clearSearch()">返回原列表</a>                            </div>                        </td>                    </tr>                    <tr tabindex="0" b-if="showAdd">                        <td class="text-center" colspan="{{colums.length + 1}}">                            <div>                                <a href="javascript:;">+ 创建弹性公网IP</a>                            </div>                        </td>                    </tr>                    <tr tabindex="0" b-repeat="item in list" class="{{item.$disable ? \'disable\': \'\'}}" data-title?="item.$disableTips">                        <td b-if="showCheckColum">                            <div class="tc-15-first-checkbox">                                <input data-check disabled?="item.$disable"                                       b-if="checkType == \'checkbox\'" type="checkbox" b-model="item.$checked" name="$checked" value="{{item[checkKey]}}" class="tc-15-checkbox">                                <input data-check disabled?="item.$disable"                                       b-if="checkType == \'radio\'" type="radio" b-model="$checked" data-value="{{item[checkKey]}}" name="$checked" value="{{item[checkKey]}}" class="tc-15-radio">                            </div>                        </td>                        <td b-repeat="col in colums">                            <div>                                {{> col.tdTpl || item[col.key] || \'-\' }}                            </div>                        </td>                    </tr>                    <tr tabindex="0" b-if="totalNum == 0 && !searchKey && !camTips">                        <td class="text-center" colspan="{{colums.length + 1}}">                            <div>                                {{emptyTips}}                            </div>                        </td>                    </tr>                    <tr tabindex="0" b-if="tips">                        <td class="text-center" colspan="{{colums.length + 1}}">                            <div>                                {{> tips }}                            </div>                        </td>                    </tr>                    <tr tabindex="0" b-if="loading">                        <td class="text-center" colspan="{{colums.length + 1}}">                            <div><i class="n-loading-icon"></i><span class="text">加载中...</span>                            </div>                        </td>                    </tr>                    </tbody>                </table>            </div>            </form>        </div>    </div>',$afterInit:function(){var t=this,e=$(this.$refs.gridbody);this.initGetData&&this.pullData({page:1},!0),$(this.$el).on("keydown",function(t){13===t.keyCode&&t.stopPropagation()}),this.scrollPager&&e.on("scroll",function(){this.scrollHeight-t.pagerOffset<=e.height()+this.scrollTop&&!t.loading&&t.page<t.totalNum/t.count&&t.pullData({page:t.page+1,searchKey:t.searchKey})})},pullData:function(e,i){var n=this;return n.showLoading(),n.$set("camTips",!1),this.getData.apply(this,arguments)["catch"](function(t){if(a.isCamRefused(t))return n.showTips("<cam-tips>"+t.message+"</cam-tips>"),n.$set("camTips",!0),{totalNum:0,list:[]};throw t}).then(function(t){return n.$set($.extend({},e,{totalNum:t.totalNum})),i?n.$set("list",t.list):n.list.splice.apply(n.list,[n.list.length,0].concat(t.list)),n.hideLoading(),n.$emit&&n.$emit("updated"),n.autoCenterDialog&&o&&o.center(),n.$set("_hasYScroll",n.$refs.gridbody.scrollHeight>n.$refs.gridbody.clientHeight),t})},search:function(t){this.pullData({page:1,searchKey:t&&t.trim()},!0)},clearSearch:function(){this.$set("keyword",""),this.search("")},getData:function(){return Promise.resolve({list:[],totalNum:0})},showLoading:function(){this.$set("loading",!0)},hideLoading:function(){this.$set("loading",!1)},showTips:function(t){this.$set("tips",t)},hideTips:function(t){this.$set("tips",null)},_events:{"click .tc-15-table-fixed-body tr":function(t){var e=$(t.currentTarget);if(e[0].bee){var i=e[0].bee.$data;if(!i.$disable){var n=e.find("[data-check]");$(t.target).is(n)||n.click(),this.currentItem=i}}}}},{defaults:{multipleSearch:!1,showCheckColum:!0,checkType:"checkbox",checkKey:"id",scrollBarSize:17,scrollPager:!0,searchPlaceholder:"请输入关键字",initGetData:!0,autoCenterDialog:!0,emptyTips:"列表为空",tbodyStyle:{maxHeight:300},pagerOffset:20,page:1,count:20,colums:[]}});i.exports=s}),define("widget/selectors/SgSelector",function(t,e,i){var n=t("./ListSelector"),o=t("models/iaas"),a=(t("appUtil"),n.extend({$afterInit:function(){a.__super__.$afterInit.call(this),this.$watch("projectId",function(t){(t||0===t)&&this.clearSearch()},!0)},getData:function(i){var n=this,t=(i=i||{}).searchKey,e=$.extend({},{projectId:this.projectId},this.extraParam);return t&&(/^sg-\w{8}$/.test(t)?e.sgId=t:e.sgName=t),o.apiRequest({regionId:this.regionId,cmd:"DescribeSecurityGroups",data:e,serviceType:"dfw"}).then(function(t){var e=t.data||[];return $.extend({},i,n.parseData({list:e,totalNum:e.length}))})},parseData:function(t){return t}},{defaults:{multipleSearch:!1,scrollPager:!1,checkType:"checkbox",checkKey:"sgId",colums:[{name:"安全组ID/名称",key:"sgId",tdTpl:'<p><a href="/cvm/securitygroup/detail/{{item.sgId}}?rid={{regionId}}" target="_blank">{{item.sgId}}</a></p><p class="text-overflow">{{item.sgName}}</p>'},{name:"备注",key:"sgRemark"}]}}));i.exports=a}),define("widget/selectors/SubnetSelector",function(t,e,i){var n=t("qccomponent"),a=t("models/api"),s=t("manager"),c=t("appUtil"),o=n.extend({$tpl:'    <div class="tc-15-table-panel network-table">        <div class="tc-15-table-fixed-body">            <table class="tc-15-table-box tc-15-table-rowhover">                <colgroup>                    <col class="tc-15-table-col1" style="width: 5%">                    <col class="tc-15-table-col2">                </colgroup>                <tbody>                <tr tabindex="0" title?="item.$disabled !== true && item.$disabled" b-repeat="item in list" b-ref="list" class="{{item.$disabled ? \'disable\': \'\'}}">                    <td>                        <div class="tc-15-first-checkbox">                            <input disabled?="disabled || item.$disabled || (!item.$selected && disabledUnSelect)" b-model="item.$selected" id="lb-{{item.value}}" type="checkbox" class="tc-15-checkbox" value="{{item.value}}" />                        </div>                    </td>                    <td>                        <div style="height: 42px; line-height: 42px">                            <label for="lb-{{item.value}}" style="height: 100%;display: block;">                                <span class="text-overflow">{{item.label}}</span>                            </label>                        </div>                    </td>                </tr>                <tr b-if="vpcId != 0 && !list.length">                    <td colspan="2">                        <div>                            当前网络没有子网                        </div>                    </td>                </tr>                </tbody>            </table>        </div>    </div>',$valuekey:"selected",$afterInit:function(){o.__super__.$afterInit.call(this),this.$watch("[vpcId, regionId,disableItems]",this.reload.bind(this),!0),this.$watch("list",function(t){if(t.map){var e=t.filter(function(t){return t.$selected});this.$set("selected",e)}},!0),this.$watch("selected",function(t){var e=this.list,n=this;t&&t.forEach(function(i){e.forEach(function(t,e){n.$refs.list[e].$set("$selected",i.value==t.value&&t.label==t.label)})})},!0)},getData:function(i,n){var o=this;return n=n||c.getRegionId(),new Promise(function(e,t){1*i==0?s.queryZone(n,function(t){e(t.map(function(e){var i={label:e.zoneName,status:e.status,value:e.zoneId,$selected:o.defaultSelected&&o.defaultSelected.some(function(t){return t.zoneId==e.zoneId})};return o.disableItems&&o.disableItems.some(function(t){if(e.zoneId==t.id)return i.$disabled=t.title||!0,!0}),i}).filter(function(t){return t.status&&!(-1<(o.hideItems||[]).indexOf(1*t.value))}))},t):a.request({serviceType:"vpc",cmd:"DescribeSubnetEx",regionId:n,data:{vpcId:i,limit:999}}).then(function(t){e(t.data.map(function(e){var i={label:e.unSubnetId+" ("+e.subnetName+")",value:e.unSubnetId,$selected:o.defaultSelected&&o.defaultSelected.some(function(t){return t.subnetId==e.unSubnetId})};return o.disableItems&&o.disableItems.some(function(t){if(e.zoneId==t.id)return i.$disabled=t.title||!0,!0}),i}))},t)})},reload:function(){var e=this;this.getData(this.vpcId,this.regionId).then(function(t){e.$set("list",t)})}});i.exports=o}),define("widget/selectors/VpcSelector",function(t,e,i){var n=t("widget/searchSelector/SearchSelector"),c=t("models/api"),o=n.extend({getData:function(t,o){var a=this,s={offset:t.page-1,limit:t.count,regionId:t.regionId};t.searchKey&&(s.vpcName=t.searchKey),c.request({cmd:"DescribeVpcEx",serviceType:"vpc",data:s}).then(function(t){var e,i=a.selected,n=t.data.map(function(t){return t.isDefault&&(e=!0),{label:t.isDefault?t.unVpcId+" | "+t.vpcName+"（默认）":t.unVpcId+" | "+t.vpcName,value:t.unVpcId,isDefault:t.isDefault}});a.baseNetwork&&0==s.offset&&n.unshift({label:"基础网络",value:"0"}),!a.baseNetwork&&a.showNewDefaultVpc&&(e||(n.unshift({isDefault:!0,label:"Default-VPC（默认）",value:"",title:"系统将默认创建一个/16的私有网络"}),1<n.length&&(i=n[1]))),o(null,{list:n,totalNum:t.totalCount,selected:i})},o)}},{defaults:{count:999,defaultSelect:!0,style:"min-width: 120px",baseNetwork:!0,filter:!1,label:"加载中...",showNewDefaultVpc:!1,emptyTips:'{{searchKey ? "无搜索结果" : "无私有网络"}}'}});i.exports=o}),define("widget/shutdownTip/shutdownTip",function(t,e,i){var o=t("$"),a=t("appUtil"),s=t("util"),c=t("dialog"),r=t("manager"),l='    <div class="coin-alert" id="getFlowCscResultErrTip">        <table class="ui-popmsg">            <tbody>                <tr>                    <td height="72" class="i"><i class="ico ico-warn mr10"></i></td>                    <td height="72" class="t">                        <span class="info"><span class="tit">下列云主机<%=opName%>失败</span><br></span>                        <ul style="padding:5px 0;color:#666" id="shutDownTipDevice"><li style="color:#999;font-size:12px">正在加载...</li></ul>                        <div>                            <% if (from == "password") { %>                                请检查用户名是否正确后重试!                            <% } else { %>                                请将上述云服务器关机后重试!                            <% } %>                        </div>                    </td>                </tr>            </tbody>        </table>    </div>',d="    <% for (var i = 0, item; item = deviceList[i]; i++) { %>        <li><%=item.alias%> (<%-item.deviceLanIp%>)</li>    <% } %>",n={resolve:function(t,e){var i=[];if("password"==e&&t&&t.operate&&t.operate.detail&&t.operate.detail.length)for(var n=0;o=t.operate.detail[n];n++)o.error_code!=undefined&&0!=o.error_code&&i.push(o.instance_name);else if("sshkey"==e&&t&&t.resultDetail&&t.resultDetail.failedList&&t.resultDetail.failedList.length){var o;for(n=0;o=t.resultDetail.failedList[n];n++)o.result&&o.result.errorCode&&-8614==o.result.errorCode&&i.push(o.uuid)}i.length&&this.show(i,e)},show:function(t,e){var i="";"password"==e?i="重置密码":"sshkey"==e&&(i="操作密钥");var n=s.tmpl(l,{opName:i,from:e});c.create(n,420,"",{title:"操作失败",isMaskClickHide:!1,button:{"关闭":function(){c.hide()}},defaultCancelBtn:!1}),r.getCvmList({count:t.length,offset:0,regionId:a.getRegionId(),uuidList:t},function(t){var e=t.deviceList,i=s.tmpl(d,{deviceList:e});o("#shutDownTipDevice").html(i)})}};i.exports=n}),define("widget/step/step",function(t,e,i){var s=t("$"),n=t("event"),o=t("lib/Class"),c=t("dialog"),a=function(){},r=function r(t){t=t||{},s.extend(this,t),this._loaded=[],this.curStep=0,this.init()};s.extend(r.prototype,{width:700,title:"",content:"",steps:2,nextText:"下一步",confirmText:"确定",preBtnTpl:'<a href="javascript:;" data-event="prev" class="back-btn" style="display: none" role="button"></a>',stepMap:{0:a,1:a},onConfirm:a,onClose:a,init:function(){var t=this;this.$dialog=c.create(this.content,this.width,"",{title:this.title,beforeButtonHtml:this.preBtnTpl,preventResubmit:!0,isMaskClickHide:!1,button:{"":function(){t.next()}},defaultCancelCb:function(){t.destroy()}}),this.bindEvent(),this.$nextBtn=this.$dialog.find(".btn.btn_blue"),this.$prevBtn=this.$dialog.find("a[data-event=prev]"),t.$dialog.find("[data-step]:not(:first)").hide(),this.step(0)},destroy:function(){c.hide(),this.onClose(),s(this).trigger("stepclose")},next:function(t){void 0===t&&(t=this.curStep+1),this.step(t)},prev:function(t){void 0===t&&(t=this.curStep-1),this.step(t)},step:function(n){var t,e,i,o,a=this;c.toggleBtnDisable(!0),n===this.steps?(t=this.onConfirm())&&t.then?t.then(function(){a.destroy()},function(){c.toggleBtnDisable(!1)}):!1!==t?a.destroy():c.toggleBtnDisable(!1):((o=a.$dialog.find("[data-step="+n+"]")).data("loading",!0),t=this.stepMap[n].call(this,this,o,a._loaded[n]),e=function(){0===n?(a.$curStep=o,this.$prevBtn.hide(),this.$nextBtn.text(this.nextText)):(this.$prevBtn.show(),n===this.steps-1?this.$nextBtn.text(this.confirmText):this.$nextBtn.text(this.nextText)),a.$dialog.find("[data-step]").hide(),o.fadeIn(),a.$curStep=o,c.toggleBtnDisable(!1),o.data("loading",!1),c.center(),a._loaded[n]=!0;var t=a.curStep;a.curStep=n,s(a).trigger("stepchange",[n-t]);var e=c.el.find('[data-field="step-ui"]');if(e.length){e.find("li").addClass("disabled");for(var i=0;i<=n;i++)e.find("li").eq(i).removeClass("disabled")}}.bind(this),i=function(){c.toggleBtnDisable(!1),o.data("loading",!1)},t&&t.then?t.then(e,i):!1===t?i():e())},bindEvent:function(){var t=this;n.bindCommonEvent(this.$dialog.find(".dialog_layer_ft")[0],"click",{prev:function(){t.prev()}})}}),s.extend(r,o),i.exports=r}),define("widget/step/steps",function(t,e,i){var n=t("qccomponent").extend({$tpl:'    <div>        <div class="tc-15-step col{{steps.length + 1}}">            <ol>                <li b-repeat="step in steps" class="{{$index <= curStep ?  \'\' : \'disabled\'}}">                    <div class="tc-15-step-name" b-on-click="prev($index)" b-style="{cursor: $index < curStep ? \'pointer\' : \'\'}">                        <span class="tc-15-step-num">{{$index + 1}}</span>                        {{step.title}}                    </div>                    <div class="tc-15-step-arrow" b-if="$index < steps.length - 1"></div>                </li>            </ol>        </div>        <div>            <div b-ref="steps" b-repeat="step in steps" b-style="{display: $index == curStep ? \'\' : \'none\'}">                {{> step.content }}            </div>        </div>        {{> footerTpl }}    </div>',footerTpl:'    <div class="create-2-btn-ground" b-if="showBtns" style="margin-bottom: 1.5em;overflow:hidden">        <button b-ref="prev" b-if="curStep" type="button" class="tc-15-btn {{disable ? \'disabled\' : \'\'}}"                disabled?="disable" b-on-click="prev()">{{prevBtn}}</button>        <div class="create-2-fr">            <button b-ref="next" type="button" class="tc-15-btn {{disable ? \'disabled\' : \'\'}}"                    disabled?="disable" b-on-click="next()">{{curStep == steps.length -1 ? confirmBtn : nextBtn}}</button>            <button b-ref="cancel" b-if="cancel" type="button"                    class="tc-15-btn weak" b-on-click="_cancel()">{{cancelBtn}}</button>        </div>    </div>',$afterInit:function(){n.__super__.$afterInit.call(this),this._step(0)},next:function(){var t=this;if(!t.disable){var e=this._confirm();!1!==e&&(e&&e.then?(t.$set("disable",!0),e.then(function(){t.$set("disable",!1),t._step(t.curStep+1)},function(){t.$set("disable",!1)})):this._step(this.curStep+1))}},prev:function(t){this.disable||(t==undefined&&(t=this.curStep-1),t<this.curStep&&this._step(t))},_step:function(t){0<=t&&t<=this.steps.length-1&&(0<t&&this.$refs.steps[t-1].$set({_done:!0}),this.$set("curStep",t),this._init())},_init:function(t){return t=void 0===t?this.curStep:t,this.steps[t]&&this.steps[t].init&&this.steps[t].init.apply(this,[this.steps[t],t])},_confirm:function(t){return t=void 0===t?this.curStep:t,this.steps[t]&&this.steps[t].confirm&&this.steps[t].confirm.apply(this,[this.steps[t],t])},_cancel:function(){this.cancel&&this.cancel()},steps:[]},{defaults:{nextBtn:"下一步",prevBtn:"上一步",cancelBtn:"取消",confirmBtn:"完成",showBtns:!0}});i.exports=n}),define("widget/tabGroup/tabGroup",function(t,e,i){var n=t("qccomponent"),o=(t("manager"),t("constants"),t("appUtil"),n.extend({valueKey:"selected",tabs:[],list:[],content:"",$afterInit:function(){var t,e=this.selected||this.list&&this.list[0];if(e){var i=this.getIndex(e);(t=this.list[i])&&this._onChange(t,i)}},showPager:function(){this.$set("isShowPager",!0)},hidePager:function(){this.$set("isShowPager",!1)},_onChange:function(t,e){t&&(this.$set("selected",t),this.$set("currentIndex",e),this.onChange(t,e))},getIndex:function(i){var n=-1;return this.list.some(function(t,e){if(t.id===i.id)return n=e,!0}),n},prev:function(){var t=this.selected,e=this.getIndex(t)-1,i=this.list[e];i&&this._onChange(i,e)},next:function(){var t=this.selected,e=this.getIndex(t)+1,i=this.list[e];i&&this._onChange(i,e)},onChange:function(t,e){},$tpl:'    <div>        <div class="tc-15-rich-radio" role="radiogroup" b-if="!hideTab">            <a href="javascript:;" b-if="isShowPager" class="btn-last" b-on-click="prev()">上一个</a>            <div>                <button b-repeat="item in list" b-on-click="_onChange(item,$index)" class="tc-15-btn first m {{item.id==selected.id? \'checked\' : \'\'}} {{item.$disabled? \'disabled\': \'\'}}"                        role="radio" disabled?="item.$disabled" aria-checked?="item.id==selected.id">{{item.label}}</button>            </div>            <a href="javascript:;" b-if="isShowPager" class="btn-next" b-on-click="next()">下一个</a>        </div>        {{> content }}    </div>'},{defaults:{}}));i.exports=o}),define("widget/timePills/timePills",function(t,e,i){var r=t("$"),l=t("util"),n=function(t){var e={renderTo:null,data:this.getData(),change:null,activeCls:"checked",tpl:'<div>        <div class="tc-15-rich-radio <%= className %>" role="radiogroup">                <% for (var i=0, item; item = list[i]; i++) { %>                    <% if (!item.hide) { %>                    <button type="button" data-value="<%- item.value %>" data-name="<%- item.name %>" <% if (item.label) { %>data-label="<%= item.label %>" <% } %>  class="tc-15-btn m <% if (item.active) { %> checked <% } %>  <% if (item.disabled) { %> disabled <% } %>" data-title="<%= item.tips %>">                        <span data-name="<%- item.name %>"><%= item.name %></span>                        <% if (showDiscountIcon && item.iconClass) { %> <i class="<%= item.iconClass %>"><%= item.iconText %></i> <% } %>                     </button>                    <% } %>                <% } %>            </div>            <% if (showOtherTime) { %>                <a href="javascript:(0)" data-event="otherTime">其他时长</a>            <% } %></div>',showOtherTime:!0,showDiscountIcon:!0,defaultTriggerChange:!1};this.options=r.extend({},e,t);var i=this.options.renderTo;if(i){i=r(i);var n=l.tmpl(this.options.tpl,{list:this.options.data,className:this.options.className,showOtherTime:this.options.showOtherTime,showDiscountIcon:this.options.showDiscountIcon}),o=r(n);if(this.$el=o,i.append(o),this.bindEvent(),this.options.defaultTriggerChange)this.getActiveObj().trigger("click");return this}};n.prototype={bindEvent:function(){var t=this;t.$el.find("button:not(.disabled)").on("click",function(){t.select(this),t.change()}),t.$el.find("[data-event=otherTime]").on("click",function(){this.remove(),t.setData(t.getData(!0))})},select:function(t){var e=this.options.activeCls,i=this.$el.find("."+e),n=r(t),o=n.data("label")||"",a=i.data("name");i.removeClass(e).find("span").text(a),n.addClass(e),o&&n.find("span").text(o)},status:function(t){var e="disabled";for(var i in t.values)t.disabled?this.$el.find('[data-value="'+t.values[i]+'"]').addClass(e):this.$el.find('[data-value="'+t.values[i]+'"]').removeClass(e)},change:function(){var t=this.options.change,e=this.val();t&&t.call(this,e)},getActiveObj:function(){return this.$el.find("."+this.options.activeCls)},val:function(t){var e=this.$el;if(t===undefined)return e.find("."+this.options.activeCls).attr("data-value");var i=e.find('[data-value="'+t+'"]');i.length&&this.select(i)},setData:function(t){if(t&&t.length){for(var e=this.$el,i=this.getCheckedData(),n=this.options.tpl,o=!1,a=0;a<t.length;a++){var s=t[a];if(s.name==i.name&&s.value==i.value){o=s.active=!0;break}s.active=!1}var c=l.tmpl(n,{list:t,className:this.options.className,showOtherTime:!1,showDiscountIcon:this.options.showDiscountIcon});e.html(r(c)),this.options.data=t,this.bindEvent(),o||e.find("button:not([disabled])").first().trigger("click")}},getCheckedData:function(){for(var t=this.options.data,e={value:this.getActiveObj().data("value")},i=0;i<t.length;i++)if(t[i].value==e.value){e.name=t[i].name;break}return e},getData:function(t){var e=[],i=0;if(t){for(i=1;i<=5;i++)e.push({label:i+"个月",name:i,value:i});for(i=6;i<=11;i++)e.push({label:i+"个月",name:i,value:i,iconClass:"icon-hui",iconText:"88折"})}else for(i=1;i<=3;i++)e.push({label:i+"个月",name:i,value:i});return e.concat([{name:"1年",value:"12",active:!0,iconClass:"icon-hui",iconText:"83折"},{name:"2年",value:"24",iconClass:"icon-hui",iconText:"7折"},{name:"3年",value:"36",iconClass:"icon-hui",iconText:"5折"}])}},i.exports=n}),define("widget/uploadfile/uploadfile",function(t,e,i){var a=t("$"),s=t("util"),c=t("net"),n=function(t){var e=s.getUin();this.options=a.extend({},{renderTo:null,data:null,loading:null,success:null,fail:null},t);var i=this.options.renderTo;if(i){var n=c._addParam(this.options.data.cgi,{action:this.options.data.action||"uploadImgFile",uin:e,csrfCode:s.getACSRFToken(),skey:s.cookie.get("skey"),format:"iframe",t:(new Date).getTime()});i=a(i);var o=s.tmpl('<style>.upload-form, .upload-file{cursor: pointer; opacity: 0; filter: alpha(opacity=0); position: absolute; top: 0; right: 0; bottom: 0; left: 0; z-index: 1; width: 100%; height: 100%}</style><form class="upload-form" action="<%=url%>" enctype="multipart/form-data" method="post"><input class="upload-file" type="file" name="uploadfile" accept="<%=data.filetypes%>" /><input type="hidden" name="uin" value="<%=uin%>" /><input type="hidden" name="<%=data.name%>" <%=data.attr%> placeholder="<%=data.placeholder%>" value="" /><input type="hidden" name="photo_flag" value="<%=data.photo_flag%>"></form>',{data:this.options.data,uin:e,url:n});return i.css({position:"relative",overflow:"hidden"}),i.append(o),this.$form=i.find("form"),this.$file=i.find('input[type="file"]'),this.bindEvent(),this}};n.prototype={bindEvent:function(){var t=this;this.$file.change(function(){t.change()})},check:function(){var t=new RegExp("."+this.options.data.filetypes.replace(/image\/|\s/g,"").replace(/\,/g,"|."),"ig"),e=this.$file.val().split(/\\|\//).pop(),i={chkName:t.test(e),chkSize:!0};window.File&&window.FileList&&(2048<this.$file[0].files[0].size/1024&&(i.chkSize=!1));return i},change:function(){var t=this.$file.val().split(/\\|\//).pop();if(t){this.onChange({name:t});var e=this.check();e.chkName||this.onFail({msg:"文件格式必须为JPG或PNG"}),e.chkSize||this.onFail({msg:"文件大小不能超过2M"}),e.chkName&&e.chkSize&&this.submit()}},submit:function(){this.renderIframe()},onLoading:function(){this.options.loading&&this.options.loading()},onChange:function(t){this.options.change&&this.options.change(t)},onFail:function(t){this.options.fail&&this.options.fail(t)},onSuccess:function(t){this.options.success&&this.options.success(t)},renderIframe:function(){var e=this,t="iframeTarget"+(new Date).getTime();if(/msie [\w.]+/.test(navigator.userAgent.toLowerCase()))var i='javascript:false;document.write("");';var n=s.tmpl('<iframe name="<%=name%>" <%if(src){%> <%=src%> <%}%> style="display:none"></iframe>',{name:t,src:i||!1});this.$iframeForm=a(n),this.iframeForm=this.$iframeForm[0],this.$form.attr("target",t),setTimeout(function(){e.$iframeForm.appendTo("body"),e.$iframeForm.load=e.cb,e.iframeForm.callback=function(t){t&&0==t.code?e.onSuccess(t.data):e.onFail(t.data)},e.$form.submit(),e.onLoading()},10)},cb:function(){this.$iframeForm.remove()}},i.exports=n}),define("widget/validate/validate",function(t,e,i){var c=t("$"),n={validate:function(t,e){var i=this;this.$container=t,this.opt=e||{},this.opt.rules=this.opt.rules||{},this.opt.ignoreBlurSuccess=this.opt.ignoreBlurSuccess||{},this.opt&&c.each(this.opt.rules,function(t,e){i._bind(t)})},_bind:function(e){var i=this,n=(i.opt.rules[e],i.opt.ignoreBlurSuccess),t=i.$container.find('[name="'+e+'"]'),o=t.closest('[data-role="fieldcont"]');o.size()<=0&&(o=t.parent());var a=o.find(".icon-valid-flag"),s=o.find(".form-input-help"),c=s.text();t.focus(function(){s.text(c),o.removeClass("is-success").removeClass("is-error")}),t.blur(function(){var t=i._check(e);t.errmsg?(s.text(t.errmsg),o.addClass("is-error")):(s.text(c),!n[e]&&t&&t.val&&o.addClass("is-success")),a.show()})},_setErrStatus:function(t,e){this.opt.rules[t];var i=this.$container.find('[name="'+t+'"]'),n=i.closest('[data-role="fieldcont"]');n.size()<=0&&(n=i.parent());var o=n.find(".icon-valid-flag"),a=n.find(".form-input-help");o.show(),a.text(e.errmsg),n.addClass("is-error")},_check:function(t){var e=this.opt.rules[t],i=this.$container.find('[name="'+t+'"]'),o=i.attr("data-field-title")||"";if("string"==typeof e){var n={};n[e]=!0,e=n}var a=this.getRealValue(i),s=[];return c.each(e,function(t,e){var i=u["fn_"+t];if(!i)return s.push("验证规则("+t+")不存在"),!1;var n=i(a,e);return!0!==n?(s.push(o+n),!1):void 0}),{val:a,errmsg:s.join("")}},getRealValue:function(t){if(0==t.size())return"";var e=t.attr("type");t.get(0).tagName;if("checkbox"!=e&&"radio"!=e)return t.val();var i=[];return t.each(function(t,e){c(e).prop("checked")&&i.push(c(e).val())}),0==i.length?"":i},isValidate:function(){var n=this,o=[],a={};return this.opt.rules&&c.each(this.opt.rules,function(t,e){var i=n._check(t);i.errmsg?(o.push(i.errmsg),n._setErrStatus(t,i)):a[t]=i.val}),{errmsg:o.join(""),param:a}}},o=/^[1-9]\d{4,13}$/,a=/^[0-9]+$/,s=/^[0-9\-]+$/,r=/^[a-z0-9]+([._\\-]*[a-z0-9])*@([a-z0-9]+[-a-z0-9]*[a-z0-9]*\.){1,63}[a-z0-9]+$/i,l=/^((http|https|ftp):\/\/)?(\w(\:\w)?@)?([0-9a-z_-]+\.)*?([a-z0-9-]+\.[a-z]{2,6}(\.[a-z]{2})?(\:[0-9]{2,6})?)((\/[^?#<>\/\\*":]*)+(\?[^#]*)?(#.*)?)?$/i,d=/^(([-\u4E00-\u9FA5a-z0-9]{1,61})\.)+([\u4E00-\u9FA5a-z]{2,63})$/,u={fn_required:function(t,e){return!!t||"不能为空"},fn_qq:function(t,e){return!!o.test(t)||"不满足QQ号规则"},fn_number:function(t,e){return!!a.test(t)||"不满足数字规则"},fn_phone:function(t,e){return!!s.test(t)||"不满足电话号码规则"},fn_email:function(t,e){return!!r.test(t)||"不满足Email地址规则"},fn_url:function(t,e){return!!l.test(t)||"不满足URL规则"},fn_minLength:function(t,e){return undefined!=t&&t.length>=e||"不满足最低长度"},fn_maxLength:function(t,e){return undefined!=t&&t.length<=e||"超过最大长度"},togetherWith:function(t,e){},fn_domain:function(t,e){return!(undefined==t||!d.test(t))||"不合法"},fn_domain3:function(t,e){return undefined!=t&&d.test(t)?!(t.split(".").length<=2)||"仅支持单个非一级域名，如：a.abc.com":"不合法"}};i.exports=n}),define("widget/validator/util",function(t,e,i){var r=t("qccomponent").getComponent("qc-popover"),l=t("appUtil"),n=t("util"),d=t("tips"),o=function(){};n.insertStyle(".vpc-input-error {border-color: #e1504a!important;color: #e1504a!important;outline: 0 none!important}"),i.exports={_toggleError:function(t,e,i){if(t=$(t),i=i||{},!e||t&&t.length&&t.is(":visible")){var n=!!e,o=t,a="last-error-tip",s=i.errClass||"vpc-input-error is-error";o.toggleClass(s,n);var c=t.data(a);n?(i.scrollIntoView&&t[0].scrollIntoView(),t.focus(),c||(c=new r({$data:$.extend({trigger:"",hideDestroy:!0,content:e},t.data(),{target:t[0],handler:i.$btn,attachEl:i.attachEl||t[0]}),$afterDestroy:function(){t.data(a,null)}}),t.is(":text,textarea")&&t.one("keyup.errorTip",function(){c.hide()}),c.hide=l.beforeFn(c.hide,function(){o.removeClass(s),t.off(".errorTip")}),t.data(a,c)),c.$set("content",e),c.show()):c&&c.hide()}else e&&d.error(e)},multiValidate:function(t,e,i,n,o){var a,s,c,r;for(e=e||Object.keys(t),i=i||{},o=o||{},n=$(n),a=0;a<e.length;a++)if(this[s=e[a]]&&(c=this[s](t[s],i[s],t),n.length&&(r=this._find$el(n,s,o),this._toggleError(r,c,o)),c))return c},_find$el:function(t,e,i){return i=i||{},(t=$(t)).find("["+(i.attr||"data-name")+'="'+e+'"]')},extend:function(t){o.prototype=this;var e=new o;return $.extend(e,t)}}}),define("widget/validator/validator",function(t,e,i){var p=t("$"),f=t("appUtil"),n={showErr:function(t,u){return t=p(t),u=p.extend({needFocus:1},u),t.each(function(){var e=p(this),i=u.tipEl,t=u.errMode;i||(i=t?e.parent().find(".tc-15-input-tips"):e.next(".wrong")).length||(i=t?p("<div/>").addClass("tc-15-input-tips").insertAfter(e):p("<span/>").addClass("wrong").insertAfter(e)),(i=p(i)).data("origHtml")===undefined&&i.data("origHtml",i.html()),t?e.closest(".tc-15-input-text-wrap").addClass("error"):e.addClass("red"),u.tip&&i.html(u.tip).show();var n=u.focusObj||e;n=p(n);var o=u.evtTriggerObj||e;o=p(o);var a=u.evtType||"default";u.needFocus&&n.focus();var s=function(t){t&&t(),e.removeClass("red"),e.closest(".tc-15-input-text-wrap").removeClass("error"),i.data("origHtml")?i.html(i.data("origHtml")):i.hide()};if("default"==a){var c=function(){o.off("keydown",r)},r=function(){s(c)};c(),o.on("keydown",r)}else{var l=function(){o.off(a,d)},d=function(){s(l)};l(),o.on(a,d)}f.restoreDialogBtn(),u.callback&&u.callback()}),!1}};i.exports=n}),define("widget/validator/validatorV2",function(t,e,i){var n=t("lib/Class"),o=t("widget/popover/popover"),r=t("$"),a=t("appUtil"),s=function(t){t=t||{},r.extend(this,t),this._rules=r.extend({},this.constructor.rules,t.rules)};r.extend(s.prototype,{errClass:"error",typeAttr:"name",validateSelector:"[data-validate]",rules:null,showErr:function(t,e,i){(i=i||{}).silence||(i.noTips||this.showTips(t,e,i.popoverOpts),r(t).addClass(this.errClass))},hideErr:function(t){this.hideTips(t),r(t).removeClass(this.errClass)},showTips:function(t,e,i){var n=r.extend({className:"error-tops",position:"left"},this.popover,i);new o('<i class="err-icon"></i><span class="error-txt">'+e+"</span>",n).show(t)},hideTips:function(t){var e=r(t).data("popover");e&&e.hide()},validate:function(t,e,i){e=e||{};var n,o=r(t),a=e.value||t.value,s=e.type||o.attr(this.typeAttr),c=this._rules;if(c[s]){if(!t.disabled&&(n=c[s].call(this,a,t,i)))return(e.showErr||this.showErr).call(this,t,n,e,i),!1}else console.error("没有找到校验规则: "+s);return(e.hideErr||this.hideErr).call(this,t),!0},checkAll:function(t){for(var e,i=r(t).find(this.validateSelector),n=!0,o=0,a=i.length;o<a;o+=1)if(e=i[o],!this.validate(e,{showErr:r.noop,hideErr:r.noop,noTips:!0})){n=!1;break}return n},validateAll:function(t,e){for(var i,n,o=r(t).find(this.validateSelector),a=!0,s=0,c=o.length;s<c;s++)n=o[s],i=this.validate(n,{noTips:!0},e),a&&!i&&(n.focus&&n.focus(),n.select&&n.select(),n.scrollIntoView(!1),a=!1,this.validate(n,{},e));return a}}),r.extend(s,n,{rules:{name:function(t){var e=!1;return t?25<t.length?e="您输入的名称过长了":a.isValidName(t)||(e='名称仅支持中文、英文、数字、下划线、分隔符"-"、小数点'):e='请输入名称，名称仅支持中文、英文、数字、下划线、分隔符"-"、小数点',e},email:function(t){return!(/^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$/.test(t)&&t.length<=60)&&"请输入正确的邮箱地址"},phone:function(t){return/^[1]{1}[3-8]{1}[0-9]{1}\d{8}$/.test(t)&&11===t.length?ret=!1:ret="请输入正确的大陆手机号码",ret}}}),i.exports=s});